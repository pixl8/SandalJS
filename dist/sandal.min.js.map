{"version":3,"file":"sandal.min.js","sources":["../src/utils/dom.js","../src/utils/animation.js","../src/utils/position.js","../src/utils/index.js","../src/components/modal.js","../src/components/helpers.js","../src/components/dropdown.js","../src/components/tooltip.js","../src/components/popover.js","../src/components/tab.js","../src/components/collapse.js","../src/components/alert.js","../src/components/button.js","../src/components/carousel.js","../src/components/scrollspy.js","../src/components/affix.js","../src/sandal.js"],"sourcesContent":["/**\n * Sandal - DOM Utilities\n * Simplified to use JQNext for core DOM operations\n * Keeps only unique utilities not provided by JQNext\n */\n\nimport $ from 'jqnext';\n\n// Re-export JQNext as $ for convenience\nexport { $ };\n\n/**\n * Get element by data attribute\n * @param {string} name - Data attribute name (without 'data-' prefix)\n * @param {string} [value] - Optional value to match\n * @param {Element|Document} context - Context to search within\n * @returns {Element|null}\n */\nexport function getByData(name, value, context = document) {\n  const selector = value !== undefined \n    ? `[data-${name}=\"${value}\"]` \n    : `[data-${name}]`;\n  return context.querySelector(selector);\n}\n\n/**\n * Get all elements by data attribute\n * @param {string} name - Data attribute name (without 'data-' prefix)\n * @param {string} [value] - Optional value to match\n * @param {Element|Document} context - Context to search within\n * @returns {Element[]}\n */\nexport function getAllByData(name, value, context = document) {\n  const selector = value !== undefined \n    ? `[data-${name}=\"${value}\"]` \n    : `[data-${name}]`;\n  return Array.from(context.querySelectorAll(selector));\n}\n\n/**\n * Create element from HTML string\n * @param {string} html \n * @returns {Element}\n */\nexport function createFromHTML(html) {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return template.content.firstChild;\n}\n\n/**\n * Get scroll position\n * @returns {{x: number, y: number}}\n */\nexport function getScroll() {\n  return {\n    x: window.scrollX || document.documentElement.scrollLeft,\n    y: window.scrollY || document.documentElement.scrollTop\n  };\n}\n\n/**\n * Get viewport dimensions\n * @returns {{width: number, height: number}}\n */\nexport function getViewport() {\n  return {\n    width: window.innerWidth || document.documentElement.clientWidth,\n    height: window.innerHeight || document.documentElement.clientHeight\n  };\n}\n\n/**\n * Check if element is in viewport\n * @param {Element} element \n * @param {number} [threshold=0] - Percentage threshold (0-1)\n * @returns {boolean}\n */\nexport function isInViewport(element, threshold = 0) {\n  const rect = element.getBoundingClientRect();\n  const viewport = getViewport();\n  \n  const visibleHeight = Math.min(rect.bottom, viewport.height) - Math.max(rect.top, 0);\n  const visibleWidth = Math.min(rect.right, viewport.width) - Math.max(rect.left, 0);\n  \n  const visibleArea = visibleHeight * visibleWidth;\n  const totalArea = rect.height * rect.width;\n  \n  return visibleArea / totalArea >= threshold;\n}\n\n/**\n * Focus element with optional prevention of scroll\n * @param {Element} element \n * @param {boolean} [preventScroll=false]\n */\nexport function focus(element, preventScroll = false) {\n  element.focus({ preventScroll });\n}\n\n/**\n * Get focusable elements within container\n * @param {Element} container \n * @returns {Element[]}\n */\nexport function getFocusable(container) {\n  const selector = [\n    'a[href]',\n    'button:not([disabled])',\n    'input:not([disabled])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])'\n  ].join(',');\n  \n  return Array.from(container.querySelectorAll(selector)).filter(el => {\n    return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n  });\n}\n\nexport default {\n  $,\n  getByData,\n  getAllByData,\n  createFromHTML,\n  getScroll,\n  getViewport,\n  isInViewport,\n  focus,\n  getFocusable\n};","/**\n * Sandal - Advanced Animation Utilities\n * Uses Web Animation API for animations not covered by JQNext\n * JQNext provides: fadeIn, fadeOut, slideDown, slideUp, slideToggle, animate\n */\n\nimport $ from 'jqnext';\n\n// Re-export JQNext for convenience\nexport { $ };\n\n/**\n * Default animation options\n */\nconst DEFAULT_OPTIONS = {\n  duration: 300,\n  easing: 'ease',\n  fill: 'forwards'\n};\n\n/**\n * Common easing functions\n */\nexport const Easing = {\n  linear: 'linear',\n  ease: 'ease',\n  easeIn: 'ease-in',\n  easeOut: 'ease-out',\n  easeInOut: 'ease-in-out',\n  // Cubic bezier equivalents\n  easeInCubic: 'cubic-bezier(0.32, 0, 0.67, 0)',\n  easeOutCubic: 'cubic-bezier(0.33, 1, 0.68, 1)',\n  easeInOutCubic: 'cubic-bezier(0.65, 0, 0.35, 1)',\n  // Bootstrap 3 default\n  bootstrap: 'cubic-bezier(0.25, 0.1, 0.25, 1)'\n};\n\n/**\n * Animate element using Web Animation API\n * @param {Element} element \n * @param {Keyframe[]} keyframes \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function animate(element, keyframes, options = {}) {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n  const animation = element.animate(keyframes, opts);\n  \n  return new Promise((resolve, reject) => {\n    animation.onfinish = () => resolve(animation);\n    animation.oncancel = () => reject(new Error('Animation cancelled'));\n  });\n}\n\n/**\n * Scale in element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function scaleIn(element, options = {}) {\n  element.style.display = '';\n  return animate(element, [\n    { transform: 'scale(0.8)', opacity: 0 },\n    { transform: 'scale(1)', opacity: 1 }\n  ], { duration: 200, easing: Easing.easeOutCubic, ...options });\n}\n\n/**\n * Scale out element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function scaleOut(element, options = {}) {\n  await animate(element, [\n    { transform: 'scale(1)', opacity: 1 },\n    { transform: 'scale(0.8)', opacity: 0 }\n  ], { duration: 200, easing: Easing.easeInCubic, ...options });\n  \n  element.style.display = 'none';\n}\n\n/**\n * Slide in from direction\n * @param {Element} element \n * @param {'top'|'bottom'|'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function slideIn(element, direction = 'top', options = {}) {\n  element.style.display = '';\n  \n  const transforms = {\n    top: 'translateY(-100%)',\n    bottom: 'translateY(100%)',\n    left: 'translateX(-100%)',\n    right: 'translateX(100%)'\n  };\n  \n  return animate(element, [\n    { transform: transforms[direction], opacity: 0 },\n    { transform: 'translate(0, 0)', opacity: 1 }\n  ], { duration: 300, easing: Easing.easeOutCubic, ...options });\n}\n\n/**\n * Slide out to direction\n * @param {Element} element \n * @param {'top'|'bottom'|'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function slideOut(element, direction = 'top', options = {}) {\n  const transforms = {\n    top: 'translateY(-100%)',\n    bottom: 'translateY(100%)',\n    left: 'translateX(-100%)',\n    right: 'translateX(100%)'\n  };\n  \n  await animate(element, [\n    { transform: 'translate(0, 0)', opacity: 1 },\n    { transform: transforms[direction], opacity: 0 }\n  ], { duration: 300, easing: Easing.easeInCubic, ...options });\n  \n  element.style.display = 'none';\n}\n\n/**\n * Reflow element (force layout recalculation)\n * @param {Element} element \n */\nexport function reflow(element) {\n  return element.offsetHeight;\n}\n\n/**\n * Wait for next animation frame\n * @returns {Promise<number>}\n */\nexport function nextFrame() {\n  return new Promise(resolve => requestAnimationFrame(resolve));\n}\n\n/**\n * Wait for two animation frames (useful for transitions)\n * @returns {Promise<void>}\n */\nexport async function doubleRaf() {\n  await nextFrame();\n  await nextFrame();\n}\n\n/**\n * Check if prefers-reduced-motion is set\n * @returns {boolean}\n */\nexport function prefersReducedMotion() {\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n\n/**\n * Get animation duration respecting prefers-reduced-motion\n * @param {number} duration \n * @returns {number}\n */\nexport function getDuration(duration) {\n  return prefersReducedMotion() ? 0 : duration;\n}\n\n/**\n * Cancel all animations on element\n * @param {Element} element \n */\nexport function cancelAnimations(element) {\n  element.getAnimations().forEach(animation => animation.cancel());\n}\n\n/**\n * Pause all animations on element\n * @param {Element} element \n */\nexport function pauseAnimations(element) {\n  element.getAnimations().forEach(animation => animation.pause());\n}\n\n/**\n * Resume all animations on element\n * @param {Element} element \n */\nexport function playAnimations(element) {\n  element.getAnimations().forEach(animation => animation.play());\n}\n\n/**\n * Carousel-specific: slide animation\n * @param {Element} element \n * @param {'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function carouselSlide(element, direction, options = {}) {\n  const distance = direction === 'left' ? '-100%' : '100%';\n  return animate(element, [\n    { transform: 'translateX(0)' },\n    { transform: `translateX(${distance})` }\n  ], { duration: 600, easing: Easing.easeInOut, ...options });\n}\n\n/**\n * Carousel-specific: slide in next item\n * @param {Element} element \n * @param {'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function carouselSlideIn(element, direction, options = {}) {\n  const startDistance = direction === 'left' ? '100%' : '-100%';\n  element.style.display = '';\n  return animate(element, [\n    { transform: `translateX(${startDistance})` },\n    { transform: 'translateX(0)' }\n  ], { duration: 600, easing: Easing.easeInOut, ...options });\n}\n\nexport default {\n  $,\n  animate,\n  scaleIn,\n  scaleOut,\n  slideIn,\n  slideOut,\n  reflow,\n  nextFrame,\n  doubleRaf,\n  prefersReducedMotion,\n  getDuration,\n  cancelAnimations,\n  pauseAnimations,\n  playAnimations,\n  carouselSlide,\n  carouselSlideIn,\n  Easing\n};","/**\n * Sandal - Modern Positioning Utilities\n * Uses Floating UI for tooltip/popover positioning\n * Falls back to basic positioning if Floating UI is not available\n */\n\n// Floating UI will be bundled or loaded externally\nlet floatingUI = null;\n\n/**\n * Initialize with Floating UI reference\n * @param {Object} floatingUIInstance \n */\nexport function setFloatingUI(instance) {\n  floatingUI = instance;\n}\n\n/**\n * Check if Floating UI is available\n * @returns {boolean}\n */\nexport function hasFloatingUI() {\n  return floatingUI !== null || (typeof window !== 'undefined' && window.FloatingUIDOM);\n}\n\n/**\n * Get Floating UI instance\n * @returns {Object|null}\n */\nfunction getFloatingUI() {\n  return floatingUI || (typeof window !== 'undefined' && window.FloatingUIDOM);\n}\n\n/**\n * Bootstrap placement to Floating UI placement mapping\n */\nconst PLACEMENT_MAP = {\n  top: 'top',\n  bottom: 'bottom',\n  left: 'left',\n  right: 'right',\n  auto: 'top' // Default for auto\n};\n\n/**\n * Calculate position using Floating UI\n * @param {Element} reference - Reference element (trigger)\n * @param {Element} floating - Floating element (tooltip/popover)\n * @param {Object} options \n * @returns {Promise<{x: number, y: number, placement: string}>}\n */\nexport async function computePosition(reference, floating, options = {}) {\n  const {\n    placement = 'top',\n    offset: offsetValue = 0,\n    flip = true,\n    shift = true,\n    arrow = null,\n    container = null\n  } = options;\n\n  const fui = getFloatingUI();\n  \n  if (fui && fui.computePosition) {\n    // Use Floating UI\n    const middleware = [];\n    \n    if (offsetValue) {\n      middleware.push(fui.offset(offsetValue));\n    }\n    \n    if (flip) {\n      middleware.push(fui.flip());\n    }\n    \n    if (shift) {\n      middleware.push(fui.shift({ padding: 5 }));\n    }\n    \n    if (arrow) {\n      middleware.push(fui.arrow({ element: arrow }));\n    }\n    \n    const result = await fui.computePosition(reference, floating, {\n      placement: PLACEMENT_MAP[placement] || placement,\n      middleware\n    });\n    \n    return {\n      x: result.x,\n      y: result.y,\n      placement: result.placement,\n      middlewareData: result.middlewareData\n    };\n  }\n  \n  // Fallback: basic positioning without Floating UI\n  return computePositionFallback(reference, floating, options);\n}\n\n/**\n * Fallback positioning without Floating UI\n * @param {Element} reference \n * @param {Element} floating \n * @param {Object} options \n * @returns {{x: number, y: number, placement: string}}\n */\nfunction computePositionFallback(reference, floating, options = {}) {\n  const { placement = 'top', offset: offsetValue = 10 } = options;\n  \n  const refRect = reference.getBoundingClientRect();\n  const floatRect = floating.getBoundingClientRect();\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  \n  let x, y;\n  let finalPlacement = placement;\n  \n  // Calculate base position\n  switch (placement) {\n    case 'top':\n      x = refRect.left + (refRect.width - floatRect.width) / 2;\n      y = refRect.top - floatRect.height - offsetValue;\n      break;\n    case 'bottom':\n      x = refRect.left + (refRect.width - floatRect.width) / 2;\n      y = refRect.bottom + offsetValue;\n      break;\n    case 'left':\n      x = refRect.left - floatRect.width - offsetValue;\n      y = refRect.top + (refRect.height - floatRect.height) / 2;\n      break;\n    case 'right':\n      x = refRect.right + offsetValue;\n      y = refRect.top + (refRect.height - floatRect.height) / 2;\n      break;\n    case 'auto':\n    default:\n      // Auto: try top first, then bottom\n      x = refRect.left + (refRect.width - floatRect.width) / 2;\n      y = refRect.top - floatRect.height - offsetValue;\n      \n      // Check if it would go above viewport\n      if (y < 0) {\n        y = refRect.bottom + offsetValue;\n        finalPlacement = 'bottom';\n      } else {\n        finalPlacement = 'top';\n      }\n      break;\n  }\n  \n  // Simple flip: check if it goes off-screen\n  const viewport = {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n  \n  // Flip vertical\n  if ((finalPlacement === 'top' && y < 0) || \n      (finalPlacement === 'bottom' && y + floatRect.height > viewport.height)) {\n    if (finalPlacement === 'top') {\n      y = refRect.bottom + offsetValue;\n      finalPlacement = 'bottom';\n    } else {\n      y = refRect.top - floatRect.height - offsetValue;\n      finalPlacement = 'top';\n    }\n  }\n  \n  // Flip horizontal\n  if ((finalPlacement === 'left' && x < 0) || \n      (finalPlacement === 'right' && x + floatRect.width > viewport.width)) {\n    if (finalPlacement === 'left') {\n      x = refRect.right + offsetValue;\n      finalPlacement = 'right';\n    } else {\n      x = refRect.left - floatRect.width - offsetValue;\n      finalPlacement = 'left';\n    }\n  }\n  \n  // Shift: keep within viewport bounds\n  x = Math.max(5, Math.min(x, viewport.width - floatRect.width - 5));\n  y = Math.max(5, Math.min(y, viewport.height - floatRect.height - 5));\n  \n  // Add scroll offset for absolute positioning\n  return {\n    x: x + scrollX,\n    y: y + scrollY,\n    placement: finalPlacement\n  };\n}\n\n/**\n * Apply position to floating element\n * @param {Element} floating \n * @param {{x: number, y: number}} position \n */\nexport function applyPosition(floating, { x, y }) {\n  Object.assign(floating.style, {\n    position: 'absolute',\n    left: `${x}px`,\n    top: `${y}px`,\n    margin: '0'\n  });\n}\n\n/**\n * Position arrow element\n * @param {Element} arrow \n * @param {Object} middlewareData \n * @param {string} placement \n */\nexport function positionArrow(arrow, middlewareData, placement) {\n  if (!arrow || !middlewareData?.arrow) return;\n  \n  const { x, y } = middlewareData.arrow;\n  \n  const staticSide = {\n    top: 'bottom',\n    right: 'left',\n    bottom: 'top',\n    left: 'right'\n  }[placement.split('-')[0]];\n  \n  Object.assign(arrow.style, {\n    left: x != null ? `${x}px` : '',\n    top: y != null ? `${y}px` : '',\n    right: '',\n    bottom: '',\n    [staticSide]: '-4px'\n  });\n}\n\n/**\n * Auto-update position on scroll/resize (using Floating UI autoUpdate)\n * @param {Element} reference \n * @param {Element} floating \n * @param {Function} update - Update callback\n * @returns {Function} - Cleanup function\n */\nexport function autoUpdate(reference, floating, update) {\n  const fui = getFloatingUI();\n  \n  if (fui && fui.autoUpdate) {\n    return fui.autoUpdate(reference, floating, update);\n  }\n  \n  // Fallback: basic scroll/resize listeners\n  const events = ['scroll', 'resize'];\n  const parents = getScrollParents(reference);\n  \n  const handleUpdate = () => requestAnimationFrame(update);\n  \n  events.forEach(event => {\n    window.addEventListener(event, handleUpdate, true);\n  });\n  \n  parents.forEach(parent => {\n    parent.addEventListener('scroll', handleUpdate, true);\n  });\n  \n  // Initial position\n  update();\n  \n  // Return cleanup function\n  return () => {\n    events.forEach(event => {\n      window.removeEventListener(event, handleUpdate, true);\n    });\n    parents.forEach(parent => {\n      parent.removeEventListener('scroll', handleUpdate, true);\n    });\n  };\n}\n\n/**\n * Get scroll parent elements\n * @param {Element} element \n * @returns {Element[]}\n */\nfunction getScrollParents(element) {\n  const parents = [];\n  let current = element.parentElement;\n  \n  while (current) {\n    const style = getComputedStyle(current);\n    const overflow = style.overflow + style.overflowX + style.overflowY;\n    \n    if (/auto|scroll|overlay/.test(overflow)) {\n      parents.push(current);\n    }\n    \n    current = current.parentElement;\n  }\n  \n  return parents;\n}\n\n/**\n * Get container element for positioning\n * @param {string|Element|boolean} container \n * @param {Element} defaultContainer \n * @returns {Element}\n */\nexport function getContainer(container, defaultContainer = document.body) {\n  if (container === false) return defaultContainer;\n  if (container === 'body') return document.body;\n  if (typeof container === 'string') return document.querySelector(container) || defaultContainer;\n  if (container instanceof Element) return container;\n  return defaultContainer;\n}\n\n/**\n * Get viewport boundaries\n * @returns {{top: number, right: number, bottom: number, left: number, width: number, height: number}}\n */\nexport function getViewportRect() {\n  return {\n    top: 0,\n    right: window.innerWidth,\n    bottom: window.innerHeight,\n    left: 0,\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n}\n\n/**\n * Check if element is within viewport\n * @param {Element} element \n * @returns {boolean}\n */\nexport function isInViewport(element) {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= window.innerHeight &&\n    rect.right <= window.innerWidth\n  );\n}\n\nexport default {\n  setFloatingUI,\n  hasFloatingUI,\n  computePosition,\n  applyPosition,\n  positionArrow,\n  autoUpdate,\n  getContainer,\n  getViewportRect,\n  isInViewport\n};","/**\n * Sandal - Utility Modules\n * Simplified to use JQNext for core functionality\n */\n\nimport $ from 'jqnext';\n\nexport * from './dom.js';\nexport * from './events.js';\nexport * from './animation.js';\nexport * from './position.js';\n\n// Re-export JQNext\nexport { $ };\n\n// Default exports as namespaces\nexport { default as DOM } from './dom.js';\nexport { default as Events } from './events.js';\nexport { default as Animation } from './animation.js';\nexport { default as Position } from './position.js';\n\n/**\n * Store component instance on element using JQNext's data system\n * @param {Element} element \n * @param {string} key - Component key (e.g., 'bs.modal')\n * @param {Object} instance \n */\nexport function setInstance(element, key, instance) {\n  $(element).data(key, instance);\n}\n\n/**\n * Get component instance from element using JQNext's data system\n * @param {Element} element \n * @param {string} key \n * @returns {Object|null}\n */\nexport function getInstance(element, key) {\n  return $(element).data(key) || null;\n}\n\n/**\n * Remove component instance from element using JQNext's data system\n * @param {Element} element \n * @param {string} key \n */\nexport function removeInstance(element, key) {\n  $(element).removeData(key);\n}\n\n/**\n * Get or create component instance\n * @param {Element} element \n * @param {string} key \n * @param {Function} Constructor \n * @param {Object} options \n * @returns {Object}\n */\nexport function getOrCreateInstance(element, key, Constructor, options) {\n  let instance = getInstance(element, key);\n  if (!instance) {\n    instance = new Constructor(element, options);\n    setInstance(element, key, instance);\n  }\n  return instance;\n}\n\n/**\n * Parse options from data attributes\n * @param {Element} element \n * @param {Object} defaults - Default options\n * @param {string} prefix - Data attribute prefix (e.g., 'bs' for data-bs-*)\n * @returns {Object}\n */\nexport function parseDataOptions(element, defaults = {}, prefix = '') {\n  const options = { ...defaults };\n  const dataPrefix = prefix ? `${prefix}-` : '';\n  \n  Object.keys(defaults).forEach(key => {\n    // Convert camelCase to kebab-case for data attribute lookup\n    const dataKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n    const attrName = `data-${dataPrefix}${dataKey}`;\n    const value = element.getAttribute(attrName);\n    \n    if (value !== null) {\n      // Type coercion\n      if (value === 'true') {\n        options[key] = true;\n      } else if (value === 'false') {\n        options[key] = false;\n      } else if (!isNaN(Number(value)) && value !== '') {\n        options[key] = Number(value);\n      } else {\n        try {\n          options[key] = JSON.parse(value);\n        } catch {\n          options[key] = value;\n        }\n      }\n    }\n  });\n  \n  return options;\n}\n\n/**\n * Get unique ID\n * @param {string} [prefix='sandal'] \n * @returns {string}\n */\nlet idCounter = 0;\nexport function getUID(prefix = 'sandal') {\n  do {\n    idCounter++;\n  } while (document.getElementById(`${prefix}${idCounter}`));\n  \n  return `${prefix}${idCounter}`;\n}\n\n/**\n * Check if element is disabled\n * @param {Element} element \n * @returns {boolean}\n */\nexport function isDisabled(element) {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) return true;\n  \n  if (element.classList.contains('disabled')) return true;\n  if (element.hasAttribute('disabled')) return true;\n  if (element.getAttribute('aria-disabled') === 'true') return true;\n  \n  return false;\n}\n\n/**\n * Execute callback or return selector element\n * @param {string|Element|Function} value \n * @param {Element} [context] \n * @returns {Element|null}\n */\nexport function getElement(value, context = document) {\n  if (value instanceof Element) return value;\n  if (typeof value === 'string') {\n    return context.querySelector(value);\n  }\n  return null;\n}\n\n/**\n * Trap focus within element\n * @param {Element} element \n * @returns {Function} - Cleanup function\n */\nexport function trapFocus(element) {\n  const focusable = getFocusable(element);\n  if (focusable.length === 0) return () => {};\n  \n  const firstFocusable = focusable[0];\n  const lastFocusable = focusable[focusable.length - 1];\n  \n  const handleKeydown = (e) => {\n    if (e.key !== 'Tab') return;\n    \n    if (e.shiftKey) {\n      if (document.activeElement === firstFocusable) {\n        e.preventDefault();\n        lastFocusable.focus();\n      }\n    } else {\n      if (document.activeElement === lastFocusable) {\n        e.preventDefault();\n        firstFocusable.focus();\n      }\n    }\n  };\n  \n  element.addEventListener('keydown', handleKeydown);\n  return () => element.removeEventListener('keydown', handleKeydown);\n}\n\n/**\n * Get focusable elements within container\n * @param {Element} container \n * @returns {Element[]}\n */\nfunction getFocusable(container) {\n  const selector = [\n    'a[href]',\n    'button:not([disabled])',\n    'input:not([disabled]):not([type=\"hidden\"])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])'\n  ].join(',');\n  \n  return Array.from(container.querySelectorAll(selector)).filter(el => {\n    return el.offsetWidth > 0 || el.offsetHeight > 0;\n  });\n}\n\n/**\n * Merge configuration objects deeply\n * @param {Object} target \n * @param {...Object} sources \n * @returns {Object}\n */\nexport function mergeConfig(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n  \n  if (isPlainObject(target) && isPlainObject(source)) {\n    for (const key in source) {\n      if (isPlainObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeConfig(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n  \n  return mergeConfig(target, ...sources);\n}\n\n/**\n * Check if value is plain object\n * @param {*} value \n * @returns {boolean}\n */\nfunction isPlainObject(value) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}","/**\n * Sandal Modal Component\n * Modern implementation using JQNext for DOM operations\n * Uses Web Animation API for smooth animations\n */\n\nimport $ from 'jqnext';\nimport {\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, getUID, trapFocus, reflow\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'modal';\nconst DATA_KEY = 'bs.modal';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  backdrop: true,\n  keyboard: true,\n  show: true,\n  focus: true\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  LOADED: `loaded${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n  BACKDROP: 'modal-backdrop',\n  OPEN: 'modal-open',\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show'\n};\n\nconst SELECTORS = {\n  DIALOG: '.modal-dialog',\n  MODAL_BODY: '.modal-body',\n  DATA_TOGGLE: '[data-toggle=\"modal\"]',\n  DATA_DISMISS: '.presidecms [data-dismiss=\"modal\"]',\n  FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom'\n};\n\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_DURATION = 150;\n\n/**\n * Modal Class\n * Provides modal dialog functionality\n */\nclass Modal {\n  /**\n   * Create a Modal instance\n   * @param {Element} element - The modal element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    // Use JQNext for element selection\n    this.$element = $(element);\n    this._element = this.$element[0];\n    \n    if (!this._element) return;\n    \n    this.$dialog = this.$element.find(SELECTORS.DIALOG);\n    this._dialog = this.$dialog[0];\n    this._backdrop = null;\n    this._isShown = false;\n    this._isTransitioning = false;\n    this._scrollbarWidth = 0;\n    this._focusTrap = null;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Bind events\n    this._bindEvents();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get modal element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Get options\n   * @returns {Object}\n   */\n  get options() {\n    return this._options;\n  }\n  \n  /**\n   * Toggle modal\n   * @param {Element} [relatedTarget] - Related target element\n   */\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget);\n  }\n  \n  /**\n   * Show modal\n   * @param {Element} [relatedTarget] - Related target element\n   */\n  async show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) return;\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW, { relatedTarget });\n    if (showEvent.defaultPrevented) return;\n    \n    this._isShown = true;\n    this._isTransitioning = true;\n    \n    // Check scrollbar and add padding\n    this._checkScrollbar();\n    this._setScrollbar();\n    \n    // Add modal-open class to body using JQNext\n    $('body').addClass(CLASSES.OPEN);\n    \n    // Set up modal\n    this._escape();\n    this._resize();\n    \n    // Dismiss button handler using JQNext event delegation\n    this.$element.on('click', SELECTORS.DATA_DISMISS, () => this.hide());\n    \n    // Backdrop click handler\n    this.$dialog.on('mousedown', () => {\n      this.$element.one('mouseup', (e) => {\n        if (e.target === this._element) {\n          this._ignoreBackdropClick = true;\n        }\n      });\n    });\n    \n    // Show backdrop then modal\n    await this._showBackdrop();\n    await this._showModal();\n    \n    this._isTransitioning = false;\n    \n    // Focus management\n    if (this._options.focus) {\n      this._element.focus();\n      this._focusTrap = trapFocus(this._element);\n    }\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN, { relatedTarget });\n  }\n  \n  /**\n   * Hide modal\n   */\n  async hide() {\n    if (!this._isShown || this._isTransitioning) return;\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE);\n    if (hideEvent.defaultPrevented) return;\n    \n    this._isShown = false;\n    this._isTransitioning = true;\n    \n    // Clean up focus trap\n    if (this._focusTrap) {\n      this._focusTrap();\n      this._focusTrap = null;\n    }\n    \n    // Remove escape handler\n    $(document).off('keydown', this._escapeHandler);\n    \n    // Remove resize handler\n    $(window).off('resize', this._resizeHandler);\n    \n    // Hide modal then backdrop using JQNext\n    this.$element.removeClass(CLASSES.IN);\n    \n    if (this.$element.hasClass(CLASSES.FADE)) {\n      await this._waitForTransition(this._element, TRANSITION_DURATION);\n    }\n    \n    await this._hideModal();\n    \n    this._isTransitioning = false;\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN);\n  }\n  \n  /**\n   * Handle update (adjust for scrollbar)\n   */\n  handleUpdate() {\n    this._adjustDialog();\n  }\n  \n  /**\n   * Destroy the modal instance\n   */\n  dispose() {\n    // Remove event listeners using JQNext\n    this.$element.off('click');\n    this.$dialog.off('mousedown');\n    $(document).off('keydown', this._escapeHandler);\n    $(window).off('resize', this._resizeHandler);\n    \n    // Remove focus trap\n    if (this._focusTrap) {\n      this._focusTrap();\n    }\n    \n    // Remove backdrop\n    if (this._backdrop) {\n      this._backdrop.remove();\n    }\n    \n    // Clean up instance\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._dialog = null;\n    this._backdrop = null;\n    this._options = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind modal events\n   * @private\n   */\n  _bindEvents() {\n    this.$element.on('click', (e) => {\n      if (e.target !== this._element) return;\n      if (this._ignoreBackdropClick) {\n        this._ignoreBackdropClick = false;\n        return;\n      }\n      if (this._options.backdrop === true) {\n        this.hide();\n      }\n    });\n  }\n  \n  /**\n   * Show backdrop\n   * @returns {Promise}\n   * @private\n   */\n  async _showBackdrop() {\n    if (this._options.backdrop) {\n      // Create backdrop using JQNext\n      this.$backdrop = $('<div>').addClass(CLASSES.BACKDROP);\n      this._backdrop = this.$backdrop[0];\n      \n      if (this.$element.hasClass(CLASSES.FADE)) {\n        this.$backdrop.addClass(CLASSES.FADE);\n      }\n      \n      this.$backdrop.appendTo('body');\n      \n      // Click handler for backdrop\n      this.$backdrop.on('click', () => {\n        if (this._options.backdrop !== 'static') {\n          this.hide();\n        }\n      });\n      \n      // Animate in\n      reflow(this._backdrop);\n      this.$backdrop.addClass(CLASSES.IN);\n      \n      if (this.$backdrop.hasClass(CLASSES.FADE)) {\n        await this._waitForTransition(this._backdrop, BACKDROP_DURATION);\n      }\n    }\n  }\n  \n  /**\n   * Show modal element\n   * @returns {Promise}\n   * @private\n   */\n  async _showModal() {\n    // Show modal using JQNext\n    this.$element.css('display', 'block')\n      .removeAttr('aria-hidden')\n      .attr({\n        'aria-modal': 'true',\n        'role': 'dialog'\n      })\n      .scrollTop(0);\n    \n    if (this.$dialog.length) {\n      this.$dialog.scrollTop(0);\n    }\n    \n    this._adjustDialog();\n    \n    reflow(this._element);\n    this.$element.addClass(CLASSES.IN);\n    \n    if (this.$element.hasClass(CLASSES.FADE)) {\n      await this._waitForTransition(this._dialog || this._element, TRANSITION_DURATION);\n    }\n  }\n  \n  /**\n   * Hide modal element\n   * @returns {Promise}\n   * @private\n   */\n  async _hideModal() {\n    // Hide modal using JQNext\n    this.$element.css('display', 'none')\n      .attr('aria-hidden', 'true')\n      .removeAttr('aria-modal')\n      .removeAttr('role');\n    \n    // Reset scrollbar\n    this._resetScrollbar();\n    $('body').removeClass(CLASSES.OPEN);\n    \n    // Remove backdrop\n    if (this.$backdrop) {\n      this.$backdrop.removeClass(CLASSES.IN);\n      \n      if (this.$backdrop.hasClass(CLASSES.FADE)) {\n        await this._waitForTransition(this._backdrop, BACKDROP_DURATION);\n      }\n      \n      this.$backdrop.remove();\n      this.$backdrop = null;\n      this._backdrop = null;\n    }\n  }\n  \n  /**\n   * Set up escape key handler\n   * @private\n   */\n  _escape() {\n    if (this._options.keyboard) {\n      this._escapeHandler = (e) => {\n        if (e.key === 'Escape' && this._isShown) {\n          e.preventDefault();\n          this.hide();\n        }\n      };\n      $(document).on('keydown', this._escapeHandler);\n    }\n  }\n  \n  /**\n   * Set up resize handler\n   * @private\n   */\n  _resize() {\n    this._resizeHandler = () => {\n      if (this._isShown) {\n        this._adjustDialog();\n      }\n    };\n    $(window).on('resize', this._resizeHandler);\n  }\n  \n  /**\n   * Adjust dialog for scrollbar\n   * @private\n   */\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n    \n    if (!this._isBodyOverflowing && isModalOverflowing) {\n      this._element.style.paddingLeft = `${this._scrollbarWidth}px`;\n    }\n    \n    if (this._isBodyOverflowing && !isModalOverflowing) {\n      this._element.style.paddingRight = `${this._scrollbarWidth}px`;\n    }\n  }\n  \n  /**\n   * Check scrollbar width\n   * @private\n   */\n  _checkScrollbar() {\n    const rect = document.body.getBoundingClientRect();\n    this._isBodyOverflowing = rect.left + rect.right < window.innerWidth;\n    this._scrollbarWidth = this._getScrollbarWidth();\n  }\n  \n  /**\n   * Get scrollbar width\n   * @returns {number}\n   * @private\n   */\n  _getScrollbarWidth() {\n    const scrollDiv = document.createElement('div');\n    scrollDiv.className = CLASSES.SCROLLBAR_MEASURER;\n    scrollDiv.style.cssText = 'position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll;';\n    document.body.appendChild(scrollDiv);\n    const scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;\n    scrollDiv.remove();\n    return scrollbarWidth;\n  }\n  \n  /**\n   * Set scrollbar padding on body\n   * @private\n   */\n  _setScrollbar() {\n    if (this._isBodyOverflowing) {\n      // Save original padding\n      this._originalPadding = document.body.style.paddingRight;\n      const computedPadding = parseFloat(getComputedStyle(document.body).paddingRight);\n      document.body.style.paddingRight = `${computedPadding + this._scrollbarWidth}px`;\n      \n      // Fixed elements using JQNext\n      $(SELECTORS.FIXED_CONTENT).each(function() {\n        const element = this;\n        const actualPadding = element.style.paddingRight;\n        const calculatedPadding = parseFloat(getComputedStyle(element).paddingRight);\n        element.dataset.paddingRight = actualPadding;\n        element.style.paddingRight = `${calculatedPadding + this._scrollbarWidth}px`;\n      });\n    }\n  }\n  \n  /**\n   * Reset scrollbar padding\n   * @private\n   */\n  _resetScrollbar() {\n    document.body.style.paddingRight = this._originalPadding || '';\n    \n    $(SELECTORS.FIXED_CONTENT).each(function() {\n      const element = this;\n      const padding = element.dataset.paddingRight;\n      if (padding !== undefined) {\n        element.style.paddingRight = padding;\n        delete element.dataset.paddingRight;\n      }\n    });\n  }\n  \n  /**\n   * Wait for transition to complete\n   * @param {Element} element \n   * @param {number} duration \n   * @returns {Promise}\n   * @private\n   */\n  _waitForTransition(element, duration) {\n    return new Promise(resolve => {\n      const handler = () => {\n        element.removeEventListener('transitionend', handler);\n        resolve();\n      };\n      element.addEventListener('transitionend', handler);\n      setTimeout(resolve, duration + 50); // Fallback\n    });\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @param {Object} detail\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    // Use JQNext trigger for proper namespace handling\n    // and compatibility with jQuery event handlers (like those in preside.iframe.modal.js)\n    const event = $.Event(eventType, detail);\n    this.$element.trigger(event);\n    return event;\n    \n    /* Fallback no longer needed - JQNext is always available\n    // Parse event type and namespace (e.g., \"hide.bs.modal\" -> type: \"hide\", namespace: \"bs.modal\")\n    */\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Modal instance from element\n   * @param {Element} element \n   * @returns {Modal|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Modal instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Modal}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Modal.getInstance(element) || new Modal(element, options);\n  }\n  \n  /**\n   * Handle click on modal toggle\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    const trigger = event.currentTarget || event.target.closest(SELECTORS.DATA_TOGGLE);\n    if (!trigger) return;\n    \n    // Get target using JQNext\n    const $trigger = $(trigger);\n    let target = $trigger.attr('data-target');\n    if (!target) {\n      const href = $trigger.attr('href');\n      if (href) {\n        target = href.replace(/.*(?=#[^\\s]+$)/, ''); // Strip for IE7\n      }\n    }\n    \n    const $modalElement = $(target);\n    if (!$modalElement.length) return;\n    \n    event.preventDefault();\n    \n    // Get options from trigger using JQNext\n    const options = {};\n    const backdrop = $trigger.attr('data-backdrop');\n    if (backdrop !== undefined) {\n      options.backdrop = backdrop === 'static' ? 'static' : backdrop !== 'false';\n    }\n    const keyboard = $trigger.attr('data-keyboard');\n    if (keyboard !== undefined) {\n      options.keyboard = keyboard !== 'false';\n    }\n    \n    const instance = Modal.getOrCreateInstance($modalElement[0], options);\n    instance.toggle(trigger);\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Modal;\nexport { Modal, EVENTS as ModalEvents, CLASSES as ModalClasses, SELECTORS as ModalSelectors };","/**\n * Shared component helpers\n * Wraps JQNext functions for component use\n */\n\nimport $ from 'jqnext';\n\n// Element selection\nexport const $$ = (selector, context) => Array.from((context || document).querySelectorAll(selector));\nexport const $1 = (selector, context) => (context || document).querySelector(selector);\n\n// DOM traversal\nexport const closest = (el, selector) => $(el).closest(selector)[0];\nexport const parent = (el) => el.parentElement;\nexport const children = (el) => Array.from(el.children);\nexport const siblings = (el) => Array.from(el.parentElement?.children || []).filter(child => child !== el);\nexport const find = (el, selector) => $(el).find(selector).get();\n\n// Classes\nexport const hasClass = (el, className) => $(el).hasClass(className);\nexport const addClass = (el, className) => $(el).addClass(className);\nexport const removeClass = (el, className) => $(el).removeClass(className);\nexport const toggleClass = (el, className) => $(el).toggleClass(className);\n\n// Attributes\nexport const getAttr = (el, attr) => $(el).attr(attr);\nexport const setAttr = (el, attr, value) => $(el).attr(attr, value);\nexport const removeAttr = (el, attr) => $(el).removeAttr(attr);\n\n// Data\nexport const getData = (el, key) => $(el).data(key);\nexport const setData = (el, key, value) => $(el).data(key, value);\nexport const data = getData; // Alias for getData\n\n// CSS\nexport const css = (el, prop, value) => value !== undefined ? $(el).css(prop, value) : $(el).css(prop);\n\n// Display\nexport const show = (el) => $(el).show();\nexport const hide = (el) => $(el).hide();\nexport const remove = (el) => $(el).remove();\n\n// Dimensions\nexport const dimensions = (el) => ({ width: $(el).width(), height: $(el).height() });\nexport const offset = (el) => $(el).offset();\n\n// Events - Support delegated events and options like jQuery\nexport const on = (el, event, selectorOrHandler, handlerOrOptions, options) => {\n  const $el = $(el);\n  \n  // Case 1: on(el, event, handler) - Simple event\n  if (typeof selectorOrHandler === 'function' && !handlerOrOptions) {\n    $el.on(event, selectorOrHandler);\n  }\n  // Case 2: on(el, event, selector, handler) - Delegated event\n  else if (typeof selectorOrHandler === 'string' && typeof handlerOrOptions === 'function') {\n    $el.on(event, selectorOrHandler, handlerOrOptions);\n  }\n  // Case 3: on(el, event, handler, options) - Event with options (ignore options, not supported)\n  else if (typeof selectorOrHandler === 'function' && typeof handlerOrOptions === 'object') {\n    $el.on(event, selectorOrHandler);\n  }\n};\n\nexport const off = (el, event, selector) => {\n  if (selector) {\n    $(el).off(event, selector);\n  } else {\n    $(el).off(event);\n  }\n};\n\nexport const trigger = (el, event, data) => {\n  if (typeof event === 'string') {\n    // Create jQuery event if string\n    const evt = $.Event(event);\n    if (data) {\n      Object.assign(evt, data);\n    }\n    $(el).trigger(evt);\n  } else {\n    $(el).trigger(event, data);\n  }\n};\n\n// Animation - Return promises that resolve when animation completes\nexport const fadeIn = (el, options = {}) => {\n  return new Promise(resolve => {\n    const duration = options.duration !== undefined ? options.duration : 150;\n    $(el).fadeIn(duration, function() {\n      resolve();\n    });\n  });\n};\n\nexport const fadeOut = (el, options = {}) => {\n  return new Promise(resolve => {\n    const duration = options.duration !== undefined ? options.duration : 150;\n    $(el).fadeOut(duration, function() {\n      resolve();\n    });\n  });\n};\n\n// Reflow\nexport const reflow = (el) => el.offsetHeight;\n\n// Utilities\nexport const sanitizeHTML = (html) => {\n  const div = document.createElement('div');\n  div.textContent = html;\n  return div.innerHTML;\n};\n\nexport default {\n  $$, closest, parent,\n  hasClass, addClass, removeClass, toggleClass,\n  getAttr, setAttr, removeAttr,\n  getData, setData,\n  css,\n  show, hide, remove,\n  dimensions, offset,\n  on, off, trigger,\n  sanitizeHTML\n};","/**\n * Sandal Dropdown Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport $ from 'jqnext';\nimport {\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, isDisabled\n} from '../utils/index.js';\nimport {\n  $$, closest, parent, hasClass, addClass, removeClass,\n  getAttr, setAttr, on, off\n} from './helpers.js';\n\n// Constants\nconst NAME = 'dropdown';\nconst DATA_KEY = 'bs.dropdown';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  offset: 0,\n  flip: true,\n  boundary: 'scrollParent',\n  reference: 'toggle',\n  display: 'dynamic'\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  DISABLED: 'disabled',\n  SHOW: 'show',\n  OPEN: 'open',\n  DROPUP: 'dropup',\n  DROPDOWN_MENU: 'dropdown-menu',\n  DROPDOWN_MENU_RIGHT: 'dropdown-menu-right'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle=\"dropdown\"]',\n  DROPDOWN: '.dropdown, .dropup, .btn-group',\n  DROPDOWN_MENU: '.dropdown-menu',\n  VISIBLE_ITEMS: '.dropdown-menu li:not(.divider):not(.disabled) a',\n  FORM_CHILD: '.dropdown form'\n};\n\nconst KEYS = {\n  TAB: 'Tab',\n  ESCAPE: 'Escape',\n  SPACE: ' ',\n  ARROW_UP: 'ArrowUp',\n  ARROW_DOWN: 'ArrowDown'\n};\n\n/**\n * Dropdown Class\n * Provides dropdown menu functionality\n */\nclass Dropdown {\n  /**\n   * Create a Dropdown instance\n   * @param {Element} element - The dropdown toggle element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this.$element = $(element);\n    this._element = this.$element[0];\n    \n    if (!this._element) return;\n    \n    // Get parent dropdown element\n    this._parent = this._getParentElement();\n    \n    // Get menu element\n    this._menu = this._getMenuElement();\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Bind events\n    this._bindEvents();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get toggle element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Toggle dropdown\n   */\n  toggle() {\n    if (isDisabled(this._element)) return;\n    \n    const isOpen = this._isShown();\n    \n    // Close other dropdowns\n    Dropdown.closeAll();\n    \n    if (isOpen) return;\n    \n    this.show();\n  }\n  \n  /**\n   * Show dropdown\n   */\n  show() {\n    if (isDisabled(this._element) || this._isShown()) return;\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW, { relatedTarget: this._element });\n    if (showEvent.defaultPrevented) return;\n    \n    // Add open class to parent\n    addClass(this._parent, CLASSES.OPEN);\n    \n    // Update ARIA\n    setAttr(this._element, 'aria-expanded', 'true');\n    \n    // Add document click listener to close\n    this._addDocumentListener();\n    \n    // Focus first item or toggle\n    this._element.focus();\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN, { relatedTarget: this._element });\n  }\n  \n  /**\n   * Hide dropdown\n   */\n  hide() {\n    if (!this._isShown()) return;\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE, { relatedTarget: this._element });\n    if (hideEvent.defaultPrevented) return;\n    \n    // Remove open class\n    removeClass(this._parent, CLASSES.OPEN);\n    \n    // Update ARIA\n    setAttr(this._element, 'aria-expanded', 'false');\n    \n    // Remove document listener\n    this._removeDocumentListener();\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN, { relatedTarget: this._element });\n  }\n  \n  /**\n   * Update dropdown position (noop for Bootstrap 3 compat)\n   */\n  update() {\n    // In Bootstrap 3, position is handled by CSS\n    // This method exists for API compatibility\n  }\n  \n  /**\n   * Destroy the dropdown instance\n   */\n  dispose() {\n    this._removeDocumentListener();\n    off(this._element, 'click');\n    off(this._element, 'keydown');\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._menu = null;\n    this._parent = null;\n    this._options = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind toggle events (keyboard only - clicks handled by data-api)\n   * @private\n   */\n  _bindEvents() {\n    // Note: Click events are handled by the data-api in sandal.js\n    // We only bind keyboard events here to avoid double-handling\n    on(this._element, 'keydown', (e) => {\n      this._handleKeydown(e);\n    });\n  }\n  \n  /**\n   * Add document click listener\n   * @private\n   */\n  _addDocumentListener() {\n    this._documentClickHandler = (e) => {\n      // Don't close if clicking inside dropdown\n      if (this._parent.contains(e.target)) {\n        // But do close if clicking a menu item (unless it's in a form)\n        const isMenuItem = closest(e.target, SELECTORS.VISIBLE_ITEMS);\n        const isInForm = closest(e.target, SELECTORS.FORM_CHILD);\n        if (!isMenuItem || isInForm) return;\n      }\n      this.hide();\n    };\n    \n    this._documentKeyHandler = (e) => {\n      if (e.key === KEYS.ESCAPE) {\n        this.hide();\n        this._element.focus();\n      }\n    };\n    \n    // Delay adding listener to avoid immediate close\n    setTimeout(() => {\n      document.addEventListener('click', this._documentClickHandler, true);\n      document.addEventListener('keydown', this._documentKeyHandler);\n    }, 0);\n  }\n  \n  /**\n   * Remove document listeners\n   * @private\n   */\n  _removeDocumentListener() {\n    if (this._documentClickHandler) {\n      document.removeEventListener('click', this._documentClickHandler, true);\n      this._documentClickHandler = null;\n    }\n    if (this._documentKeyHandler) {\n      document.removeEventListener('keydown', this._documentKeyHandler);\n      this._documentKeyHandler = null;\n    }\n  }\n  \n  /**\n   * Handle keyboard navigation\n   * @param {KeyboardEvent} event \n   * @private\n   */\n  _handleKeydown(event) {\n    // Only handle specific keys\n    if (![KEYS.ARROW_UP, KEYS.ARROW_DOWN, KEYS.ESCAPE, KEYS.SPACE].includes(event.key)) {\n      return;\n    }\n    \n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.key === KEYS.ESCAPE) {\n      this.hide();\n      this._element.focus();\n      return;\n    }\n    \n    if (event.key === KEYS.SPACE) {\n      this.toggle();\n      return;\n    }\n    \n    // Arrow navigation\n    if (!this._isShown()) {\n      this.show();\n      return;\n    }\n    \n    const items = $$(SELECTORS.VISIBLE_ITEMS, this._menu);\n    if (items.length === 0) return;\n    \n    let index = items.indexOf(document.activeElement);\n    \n    if (event.key === KEYS.ARROW_UP && index > 0) {\n      index--;\n    }\n    \n    if (event.key === KEYS.ARROW_DOWN && index < items.length - 1) {\n      index++;\n    }\n    \n    if (index < 0) index = 0;\n    \n    items[index].focus();\n  }\n  \n  /**\n   * Check if dropdown is shown\n   * @returns {boolean}\n   * @private\n   */\n  _isShown() {\n    return hasClass(this._parent, CLASSES.OPEN);\n  }\n  \n  /**\n   * Get parent dropdown element\n   * @returns {Element}\n   * @private\n   */\n  _getParentElement() {\n    // Preside Bootstrap just uses direct parent (like Bootstrap 3)\n    // Don't look for specific classes - just use the direct parent\n    const selector = getAttr(this._element, 'data-target');\n    if (selector) {\n      return $(selector);\n    }\n    \n    return this._element.parentElement;\n  }\n  \n  /**\n   * Get menu element\n   * @returns {Element}\n   * @private\n   */\n  _getMenuElement() {\n    if (this._parent) {\n      return $(SELECTORS.DROPDOWN_MENU, this._parent);\n    }\n    return null;\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @param {Object} detail\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    // Use JQNext trigger for proper namespace handling\n    const event = $.Event(eventType, detail);\n    this.$element.trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Dropdown instance from element\n   * @param {Element} element \n   * @returns {Dropdown|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Dropdown instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Dropdown}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Dropdown.getInstance(element) || new Dropdown(element, options);\n  }\n  \n  /**\n   * Close all open dropdowns\n   */\n  static closeAll() {\n    const openDropdowns = $$(`.${CLASSES.OPEN}`);\n    for (const dropdown of openDropdowns) {\n      const toggle = $(SELECTORS.DATA_TOGGLE, dropdown);\n      if (toggle) {\n        const instance = Dropdown.getInstance(toggle);\n        if (instance) {\n          instance.hide();\n        } else {\n          removeClass(dropdown, CLASSES.OPEN);\n        }\n      } else {\n        removeClass(dropdown, CLASSES.OPEN);\n      }\n    }\n  }\n  \n  /**\n   * Handle click on dropdown toggle\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    const toggle = event.currentTarget || event.target.closest(SELECTORS.DATA_TOGGLE);\n    if (!toggle) return;\n    \n    const instance = Dropdown.getOrCreateInstance(toggle);\n    instance.toggle();\n  }\n  \n  /**\n   * Handle keydown on dropdown\n   * @param {KeyboardEvent} event \n   */\n  static handleKeydown(event) {\n    // Check if this is a dropdown-related key\n    if (![KEYS.ARROW_UP, KEYS.ARROW_DOWN, KEYS.ESCAPE].includes(event.key)) {\n      return;\n    }\n    \n    const toggle = event.target.closest(SELECTORS.DATA_TOGGLE);\n    if (!toggle) return;\n    \n    const instance = Dropdown.getOrCreateInstance(toggle);\n    instance._handleKeydown(event);\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Dropdown;\nexport { Dropdown, EVENTS as DropdownEvents, CLASSES as DropdownClasses, SELECTORS as DropdownSelectors };","/**\n * Sandal Tooltip Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses modern positioning (Floating UI compatible)\n */\n\nimport $ from 'jqnext';\nimport {\n  createFromHTML,\n  computePosition, applyPosition, autoUpdate, getContainer,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, getUID\n} from '../utils/index.js';\nimport {\n  $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, removeAttr, getData, css,\n  show as showEl, hide as hideEl, remove as removeEl,\n  dimensions, offset, on, off, trigger, sanitizeHTML,\n  fadeIn, fadeOut, reflow\n} from './helpers.js';\n\n// Constants\nconst NAME = 'tooltip';\nconst DATA_KEY = 'bs.tooltip';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  animation: true,\n  template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n  trigger: 'hover focus',\n  title: '',\n  delay: 0,\n  html: false,\n  selector: false,\n  placement: 'top',\n  offset: 0,\n  container: false,\n  fallbackPlacement: 'flip',\n  boundary: 'scrollParent',\n  sanitize: true,\n  viewport: { selector: 'body', padding: 0 }\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  INSERTED: `inserted${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show',\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n};\n\nconst TRIGGERS = {\n  HOVER: 'hover',\n  FOCUS: 'focus',\n  CLICK: 'click',\n  MANUAL: 'manual'\n};\n\nconst SELECTORS = {\n  TOOLTIP_INNER: '.tooltip-inner',\n  TOOLTIP_ARROW: '.tooltip-arrow'\n};\n\nconst TRANSITION_DURATION = 150;\n\n/**\n * Tooltip Class\n * Provides tooltip functionality\n */\nclass Tooltip {\n  /**\n   * Create a Tooltip instance\n   * @param {Element} element - The trigger element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this.$element = $(element);\n    this._element = this.$element[0];\n    \n    if (!this._element) return;\n    \n    // Parse options\n    this._options = this._getOptions(options);\n    \n    this._tip = null;\n    this._isEnabled = true;\n    this._timeout = null;\n    this._hoverState = '';\n    this._activeTrigger = {};\n    this._cleanupAutoUpdate = null;\n    \n    // Bind events\n    this._setListeners();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get tip element\n   * @returns {Element}\n   */\n  get tip() {\n    if (!this._tip) {\n      this._tip = createFromHTML(this._options.template);\n    }\n    return this._tip;\n  }\n  \n  /**\n   * Get element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Enable tooltip\n   */\n  enable() {\n    this._isEnabled = true;\n  }\n  \n  /**\n   * Disable tooltip\n   */\n  disable() {\n    this._isEnabled = false;\n  }\n  \n  /**\n   * Toggle enabled state\n   */\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled;\n  }\n  \n  /**\n   * Toggle tooltip\n   * @param {Event} [event] \n   */\n  toggle(event) {\n    if (!this._isEnabled) return;\n    \n    if (event) {\n      const context = this._getDelegateConfig();\n      \n      if (!this._activeTrigger.click) {\n        this._activeTrigger.click = true;\n      } else {\n        this._activeTrigger.click = false;\n      }\n      \n      if (this._isWithActiveTrigger()) {\n        this._enter();\n      } else {\n        this._leave();\n      }\n    } else {\n      if (hasClass(this.tip, CLASSES.IN)) {\n        this._leave();\n      } else {\n        this._enter();\n      }\n    }\n  }\n  \n  /**\n   * Show tooltip\n   */\n  async show() {\n    if (!this._isEnabled) {\n      return;\n    }\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW);\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n    \n    const tip = this.tip;\n    const title = this._getTitle();\n    \n    if (!title) {\n      return;\n    }\n    \n    this._setContent(tip, title);\n    \n    // Remove existing classes\n    removeClass(tip, CLASSES.IN);\n    removeClass(tip, CLASSES.TOP);\n    removeClass(tip, CLASSES.BOTTOM);\n    removeClass(tip, CLASSES.LEFT);\n    removeClass(tip, CLASSES.RIGHT);\n    \n    // Set ID for accessibility\n    const tipId = getUID(this.constructor.NAME || NAME);\n    setAttr(tip, 'id', tipId);\n    setAttr(this._element, 'aria-describedby', tipId);\n    \n    // Add fade class if animated\n    if (this._options.animation) {\n      addClass(tip, CLASSES.FADE);\n    }\n    \n    // CRITICAL: Hide tooltip during initial positioning to prevent visual shift\n    // Set initial styles to make tooltip invisible but measurable\n    tip.style.position = 'absolute';\n    tip.style.top = '0';\n    tip.style.left = '0';\n    tip.style.opacity = '0';\n    tip.style.visibility = 'hidden';\n    tip.style.display = 'block';\n    tip.style.pointerEvents = 'none';\n    \n    // Get container and append tip\n    const container = getContainer(this._options.container, this._element.ownerDocument.body);\n    container.appendChild(tip);\n    \n    // Dispatch inserted event\n    this._triggerEvent(EVENTS.INSERTED);\n    \n    // Position the tooltip WHILE INVISIBLE\n    await this._updatePosition();\n    \n    // Now make visible - remove hiding styles and show\n    tip.style.visibility = '';\n    tip.style.pointerEvents = '';\n    \n    // Show with animation\n    reflow(tip);\n    addClass(tip, CLASSES.IN);\n    \n    // Force opacity for visibility\n    tip.style.opacity = '1';\n    \n    if (this._options.animation) {\n      await this._waitForTransition(tip, TRANSITION_DURATION);\n    }\n    \n    // Set up auto-update for repositioning\n    this._cleanupAutoUpdate = autoUpdate(this._element, tip, () => {\n      this._updatePosition();\n    });\n    \n    this._hoverState = '';\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN);\n  }\n  \n  /**\n   * Hide tooltip\n   */\n  async hide() {\n    const tip = this.tip;\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE);\n    if (hideEvent.defaultPrevented) return;\n    \n    // Clean up auto-update\n    if (this._cleanupAutoUpdate) {\n      this._cleanupAutoUpdate();\n      this._cleanupAutoUpdate = null;\n    }\n    \n    // Hide with animation\n    removeClass(tip, CLASSES.IN);\n    \n    if (this._options.animation && hasClass(tip, CLASSES.FADE)) {\n      await this._waitForTransition(tip, TRANSITION_DURATION);\n    }\n    \n    this._hoverState = '';\n    this._activeTrigger = {};\n    \n    // Remove tip from DOM\n    if (tip.parentNode) {\n      tip.parentNode.removeChild(tip);\n    }\n    \n    // Remove aria\n    removeAttr(this._element, 'aria-describedby');\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN);\n  }\n  \n  /**\n   * Update tooltip position\n   */\n  async update() {\n    await this._updatePosition();\n  }\n  \n  /**\n   * Destroy tooltip instance\n   */\n  dispose() {\n    clearTimeout(this._timeout);\n    \n    // Clean up auto-update\n    if (this._cleanupAutoUpdate) {\n      this._cleanupAutoUpdate();\n    }\n    \n    // Remove event listeners\n    this._removeListeners();\n    \n    // Remove tip\n    if (this._tip) {\n      removeEl(this._tip);\n    }\n    \n    // Clean up instance\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._options = null;\n    this._tip = null;\n  }\n  \n  /**\n   * Destroy tooltip instance (Bootstrap 3 alias for dispose)\n   */\n  destroy() {\n    this.dispose();\n  }\n  \n  // Private methods\n  \n  /**\n   * Get merged options\n   * @param {Object} options \n   * @returns {Object}\n   * @private\n   */\n  _getOptions(options) {\n    const defaults = this.constructor.DEFAULTS || DEFAULTS;\n    const dataOptions = parseDataOptions(this._element, defaults);\n    \n    // Also get title from data attribute or title attribute\n    if (!options.title && !dataOptions.title) {\n      dataOptions.title = getAttr(this._element, 'title') || \n                          getAttr(this._element, 'data-original-title') || '';\n      \n      // Store original title and remove\n      if (getAttr(this._element, 'title')) {\n        setAttr(this._element, 'data-original-title', dataOptions.title);\n        this._element.removeAttribute('title');\n      }\n    }\n    \n    return {\n      ...defaults,\n      ...dataOptions,\n      ...options\n    };\n  }\n  \n  /**\n   * Get title content\n   * @returns {string}\n   * @private\n   */\n  _getTitle() {\n    let title = this._options.title;\n    \n    if (typeof title === 'function') {\n      title = title.call(this._element);\n    }\n    \n    return title ? String(title) : '';\n  }\n  \n  /**\n   * Set content in tooltip\n   * @param {Element} tip \n   * @param {string} title \n   * @private\n   */\n  _setContent(tip, title) {\n    const inner = $(SELECTORS.TOOLTIP_INNER, tip);\n    if (inner) {\n      if (this._options.html) {\n        if (this._options.sanitize) {\n          inner.innerHTML = sanitizeHTML(title);\n        } else {\n          inner.innerHTML = title;\n        }\n      } else {\n        inner.textContent = title;\n      }\n    }\n  }\n  \n  /**\n   * Update tooltip position\n   * @private\n   */\n  async _updatePosition() {\n    const tip = this.tip;\n    if (!tip || !tip.parentNode) return;\n    \n    const placement = this._getPlacement();\n    \n    // Use modern positioning\n    const position = await computePosition(this._element, tip, {\n      placement,\n      offset: 10, // Arrow + gap\n      flip: this._options.fallbackPlacement === 'flip',\n      shift: true\n    });\n    \n    // Apply position\n    applyPosition(tip, position);\n    \n    // Update placement class\n    const actualPlacement = position.placement.split('-')[0];\n    removeClass(tip, CLASSES.TOP);\n    removeClass(tip, CLASSES.RIGHT);\n    removeClass(tip, CLASSES.BOTTOM);\n    removeClass(tip, CLASSES.LEFT);\n    addClass(tip, actualPlacement);\n  }\n  \n  /**\n   * Get placement\n   * @returns {string}\n   * @private\n   */\n  _getPlacement() {\n    const placement = this._options.placement;\n    \n    if (typeof placement === 'function') {\n      return placement.call(this, this.tip, this._element);\n    }\n    \n    return placement;\n  }\n  \n  /**\n   * Set up event listeners\n   * @private\n   */\n  _setListeners() {\n    const triggers = this._options.trigger.split(' ');\n    \n    for (const trigger of triggers) {\n      if (trigger === TRIGGERS.CLICK) {\n        on(this._element, 'click', () => this.toggle());\n      } else if (trigger !== TRIGGERS.MANUAL) {\n        const eventIn = trigger === TRIGGERS.HOVER ? 'mouseenter' : 'focusin';\n        const eventOut = trigger === TRIGGERS.HOVER ? 'mouseleave' : 'focusout';\n        \n        on(this._element, eventIn, () => this._enter());\n        on(this._element, eventOut, () => this._leave());\n      }\n    }\n    \n    // Focus out on tip click\n    if (this._options.selector) {\n      // Delegated tooltips - handled differently\n    }\n  }\n  \n  /**\n   * Remove event listeners\n   * @private\n   */\n  _removeListeners() {\n    off(this._element, 'click');\n    off(this._element, 'mouseenter');\n    off(this._element, 'mouseleave');\n    off(this._element, 'focusin');\n    off(this._element, 'focusout');\n  }\n  \n  /**\n   * Handle enter (show)\n   * @private\n   */\n  _enter() {\n    if (this._hoverState === 'out') {\n      this._hoverState = '';\n    }\n    \n    clearTimeout(this._timeout);\n    this._hoverState = 'in';\n    \n    if (!this._options.delay || !this._options.delay.show) {\n      this.show();\n      return;\n    }\n    \n    const delay = typeof this._options.delay === 'number'\n      ? this._options.delay\n      : this._options.delay.show;\n    \n    this._timeout = setTimeout(() => {\n      if (this._hoverState === 'in') {\n        this.show();\n      }\n    }, delay);\n  }\n  \n  /**\n   * Handle leave (hide)\n   * @private\n   */\n  _leave() {\n    clearTimeout(this._timeout);\n    this._hoverState = 'out';\n    \n    if (!this._options.delay || !this._options.delay.hide) {\n      this.hide();\n      return;\n    }\n    \n    const delay = typeof this._options.delay === 'number' \n      ? this._options.delay \n      : this._options.delay.hide;\n    \n    this._timeout = setTimeout(() => {\n      if (this._hoverState === 'out') {\n        this.hide();\n      }\n    }, delay);\n  }\n  \n  /**\n   * Check if has active trigger\n   * @returns {boolean}\n   * @private\n   */\n  _isWithActiveTrigger() {\n    return Object.values(this._activeTrigger).includes(true);\n  }\n  \n  /**\n   * Get delegate config\n   * @returns {Object}\n   * @private\n   */\n  _getDelegateConfig() {\n    const config = {};\n    \n    if (this._options) {\n      for (const key in this._options) {\n        if (DEFAULTS[key] !== this._options[key]) {\n          config[key] = this._options[key];\n        }\n      }\n    }\n    \n    return config;\n  }\n  \n  /**\n   * Wait for transition\n   * @param {Element} element \n   * @param {number} duration \n   * @returns {Promise}\n   * @private\n   */\n  _waitForTransition(element, duration) {\n    return new Promise(resolve => {\n      const handler = () => {\n        element.removeEventListener('transitionend', handler);\n        resolve();\n      };\n      element.addEventListener('transitionend', handler);\n      setTimeout(resolve, duration + 50);\n    });\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    // Use JQNext trigger for proper namespace handling\n    // and compatibility with jQuery event handlers\n    const event = $.Event(eventType);\n    this.$element.trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Tooltip instance from element\n   * @param {Element} element \n   * @returns {Tooltip|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Tooltip instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Tooltip}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Tooltip.getInstance(element) || new Tooltip(element, options);\n  }\n  \n  /**\n   * Component name\n   */\n  static get NAME() {\n    return NAME;\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Tooltip;\nexport { Tooltip, EVENTS as TooltipEvents, CLASSES as TooltipClasses };","/**\n * Sandal Popover Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Extends Tooltip functionality\n */\n\nimport $ from 'jqnext';\nimport {\n  createFromHTML,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, getUID\n} from '../utils/index.js';\n\nimport {\n  $1 as $1Helper, hasClass, addClass, removeClass,\n  getAttr, setAttr, removeAttr, sanitizeHTML\n} from './helpers.js';\n\nimport Tooltip from './tooltip.js';\n\n// Constants\nconst NAME = 'popover';\nconst DATA_KEY = 'bs.popover';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  ...Tooltip.DEFAULTS,\n  placement: 'right',\n  trigger: 'click',\n  content: '',\n  template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  INSERTED: `inserted${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show',\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n};\n\nconst SELECTORS = {\n  TITLE: '.popover-title',\n  CONTENT: '.popover-content',\n  ARROW: '.arrow'\n};\n\n/**\n * Popover Class\n * Extends Tooltip with title and content support\n */\nclass Popover extends Tooltip {\n  /**\n   * Create a Popover instance\n   * @param {Element} element - The trigger element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    // Call parent constructor with modified data key\n    super(element, options);\n    \n    if (!this._element) return;\n    \n    // Store jQuery reference\n    this.$element = $(this._element);\n    \n    // Re-store with popover data key\n    removeInstance(this._element, Tooltip.DATA_KEY);\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get tip element\n   * @returns {Element}\n   */\n  get tip() {\n    if (!this._tip) {\n      this._tip = createFromHTML(this._options.template);\n    }\n    return this._tip;\n  }\n  \n  /**\n   * Destroy popover instance\n   */\n  dispose() {\n    // Remove event listeners\n    this._removeListeners();\n    \n    // Clean up auto-update\n    if (this._cleanupAutoUpdate) {\n      this._cleanupAutoUpdate();\n    }\n    \n    // Remove tip\n    if (this._tip && this._tip.parentNode) {\n      this._tip.parentNode.removeChild(this._tip);\n    }\n    \n    // Clean up instance\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._options = null;\n    this._tip = null;\n  }\n  \n  // Private methods (override parent)\n  \n  /**\n   * Get merged options\n   * @param {Object} options \n   * @returns {Object}\n   * @private\n   */\n  _getOptions(options) {\n    const defaults = this.constructor.DEFAULTS || DEFAULTS;\n    const dataOptions = parseDataOptions(this._element, defaults);\n    \n    // Get title from data attribute or title attribute\n    if (!options.title && !dataOptions.title) {\n      dataOptions.title = getAttr(this._element, 'data-original-title') ||\n                          getAttr(this._element, 'title') || '';\n      \n      // Store original title and remove\n      if (getAttr(this._element, 'title')) {\n        setAttr(this._element, 'data-original-title', dataOptions.title);\n        this._element.removeAttribute('title');\n      }\n    }\n    \n    // Get content from data attribute\n    if (!options.content && !dataOptions.content) {\n      dataOptions.content = getAttr(this._element, 'data-content') || '';\n    }\n    \n    return {\n      ...defaults,\n      ...dataOptions,\n      ...options\n    };\n  }\n  \n  /**\n   * Get title content\n   * @returns {string}\n   * @private\n   */\n  _getTitle() {\n    let title = this._options.title;\n    \n    if (typeof title === 'function') {\n      title = title.call(this._element);\n    }\n    \n    return title ? String(title) : '';\n  }\n  \n  /**\n   * Get content\n   * @returns {string}\n   * @private\n   */\n  _getContent() {\n    let content = this._options.content;\n    \n    if (typeof content === 'function') {\n      content = content.call(this._element);\n    }\n    \n    return content ? String(content) : '';\n  }\n  \n  /**\n   * Set content in popover\n   * @param {Element} tip \n   * @param {string} title \n   * @private\n   */\n  _setContent(tip, title) {\n    const titleEl = $1Helper(SELECTORS.TITLE, tip);\n    const contentEl = $1Helper(SELECTORS.CONTENT, tip);\n    \n    // Set title\n    if (titleEl) {\n      const titleText = this._getTitle();\n      if (titleText) {\n        if (this._options.html) {\n          if (this._options.sanitize) {\n            titleEl.innerHTML = sanitizeHTML(titleText);\n          } else {\n            titleEl.innerHTML = titleText;\n          }\n        } else {\n          titleEl.textContent = titleText;\n        }\n      } else {\n        // Hide title if empty\n        titleEl.style.display = 'none';\n      }\n    }\n    \n    // Set content\n    if (contentEl) {\n      const content = this._getContent();\n      if (this._options.html) {\n        if (this._options.sanitize) {\n          contentEl.innerHTML = sanitizeHTML(content);\n        } else {\n          contentEl.innerHTML = content;\n        }\n      } else {\n        contentEl.textContent = content;\n      }\n    }\n  }\n  \n  /**\n   * Check if has content\n   * @returns {boolean}\n   * @private\n   */\n  _hasContent() {\n    return this._getTitle() || this._getContent();\n  }\n  \n  /**\n   * Show popover (override to check content)\n   */\n  async show() {\n    if (!this._hasContent()) {\n      return;\n    }\n    \n    await super.show();\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    // Map tooltip events to popover events\n    const popoverEventType = eventType.replace('.bs.tooltip', EVENT_KEY);\n    \n    // Use JQNext trigger for proper namespace handling\n    const event = $.Event(popoverEventType);\n    this.$element.trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Popover instance from element\n   * @param {Element} element \n   * @returns {Popover|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Popover instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Popover}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Popover.getInstance(element) || new Popover(element, options);\n  }\n  \n  /**\n   * Component name\n   */\n  static get NAME() {\n    return NAME;\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Popover;\nexport { Popover, EVENTS as PopoverEvents, CLASSES as PopoverClasses };","/**\n * Sandal Tab Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport $ from 'jqnext';\nimport {\n  setInstance, getInstance, removeInstance\n} from '../utils/index.js';\n\nimport {\n  $1 as $1Helper, $$, closest, parent, children, siblings,\n  hasClass, addClass, removeClass,\n  getAttr, setAttr,\n  trigger, on, off,\n  fadeIn, fadeOut, reflow\n} from './helpers.js';\n\n// Constants\nconst NAME = 'tab';\nconst DATA_KEY = 'bs.tab';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  DROPDOWN_MENU: 'dropdown-menu',\n  ACTIVE: 'active',\n  DISABLED: 'disabled',\n  FADE: 'fade',\n  IN: 'in'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle=\"tab\"], [data-toggle=\"pill\"]',\n  DROPDOWN: '.dropdown',\n  NAV_LIST_GROUP: '.nav, .list-group',\n  ACTIVE: '.active',\n  ACTIVE_UL: '> li > .active',\n  ACTIVE_CHILD: '> .active',\n  DATA_TOGGLE_CHILD: '> li > [data-toggle=\"tab\"], > li > [data-toggle=\"pill\"], > [data-toggle=\"tab\"], > [data-toggle=\"pill\"]'\n};\n\n// Static transitioning state per nav container\nconst transitioningContainers = new WeakSet();\n\n/**\n * Tab Class\n * Provides tab and pill navigation functionality\n */\nclass Tab {\n  /**\n   * Create a Tab instance\n   * @param {Element} element - The tab trigger element\n   */\n  constructor(element) {\n    this.$element = $(element);\n    this._element = this.$element[0];\n    \n    if (!this._element) return;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get tab element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Show the tab\n   */\n  show() {\n    if (!this._element) return;\n    \n    // Check if already active or disabled\n    const listElement = closest(this._element, SELECTORS.NAV_LIST_GROUP);\n    const targetSelector = getAttr(this._element, 'data-target') || getAttr(this._element, 'href');\n    \n    // Prevent concurrent transitions on the same nav container\n    if (listElement && transitioningContainers.has(listElement)) {\n      return;\n    }\n    \n    // Check if link is inside an active li\n    const parentLi = this._element.parentElement;\n    if (parentLi && hasClass(parentLi, CLASSES.ACTIVE)) {\n      return;\n    }\n    \n    // Check if disabled\n    if (hasClass(this._element, CLASSES.DISABLED) ||\n        (parentLi && hasClass(parentLi, CLASSES.DISABLED))) {\n      return;\n    }\n    \n    // Find currently active element\n    let previous = null;\n    let previousTab = null;\n    \n    if (listElement) {\n      // Find active child - check both direct children and li > a patterns\n      const activeChildren = children(listElement).filter(child => hasClass(child, CLASSES.ACTIVE));\n      if (activeChildren.length > 0) {\n        previous = activeChildren[0];\n        previousTab = $1Helper(SELECTORS.DATA_TOGGLE, previous) || previous;\n      } else {\n        // Check for li > .active pattern\n        const activeLi = listElement.querySelector(':scope > li > .active');\n        if (activeLi) {\n          previousTab = activeLi;\n          previous = activeLi.parentElement;\n        }\n      }\n    }\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW, {\n      relatedTarget: previousTab\n    });\n    \n    if (showEvent.defaultPrevented) return;\n    \n    // Dispatch hide event on previous tab\n    if (previousTab && previousTab !== this._element) {\n      const hideEvent = this._triggerEventOn(previousTab, EVENTS.HIDE, {\n        relatedTarget: this._element\n      });\n      \n      if (hideEvent.defaultPrevented) return;\n    }\n    \n    // Lock the container\n    if (listElement) {\n      transitioningContainers.add(listElement);\n    }\n    \n    // Activate the tab synchronously to avoid race conditions\n    this._activate(this._element, listElement, false);\n    \n    // Activate the pane\n    const target = targetSelector ? $1Helper(targetSelector) : null;\n    if (target) {\n      const container = target.parentElement;\n      this._activate(target, container, true);\n    }\n    \n    // Unlock after a frame to allow CSS transitions\n    requestAnimationFrame(() => {\n      if (listElement) {\n        transitioningContainers.delete(listElement);\n      }\n      \n      // Dispatch shown event\n      this._triggerEvent(EVENTS.SHOWN, {\n        relatedTarget: previousTab\n      });\n      \n      // Dispatch hidden event on previous tab\n      if (previousTab && previousTab !== this._element) {\n        this._triggerEventOn(previousTab, EVENTS.HIDDEN, {\n          relatedTarget: this._element\n        });\n      }\n    });\n  }\n  \n  /**\n   * Destroy the tab instance\n   */\n  dispose() {\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Activate element within container\n   * @param {Element} element - Element to activate\n   * @param {Element} container - Container element\n   * @param {boolean} [isPane=false] - Whether activating a pane\n   * @private\n   */\n  _activate(element, container, isPane = false) {\n    if (!container) return;\n    \n    if (isPane) {\n      // For panes - find active sibling pane and deactivate\n      const activePanes = children(container).filter(child => hasClass(child, CLASSES.ACTIVE));\n      for (const activePane of activePanes) {\n        removeClass(activePane, CLASSES.ACTIVE);\n        removeClass(activePane, CLASSES.IN);\n      }\n      \n      // Activate new pane\n      addClass(element, CLASSES.ACTIVE);\n      \n      // Handle fade transition\n      if (hasClass(element, CLASSES.FADE)) {\n        reflow(element);\n        addClass(element, CLASSES.IN);\n      }\n    } else {\n      // For tabs - Bootstrap 3 only sets active on <li>, not on <a>\n      // First, remove active from ALL li elements in this nav\n      const allLiElements = children(container).filter(child => child.tagName === 'LI');\n      for (const li of allLiElements) {\n        if (hasClass(li, CLASSES.ACTIVE)) {\n          removeClass(li, CLASSES.ACTIVE);\n          \n          // Also remove from any anchors inside (cleanup from previous bugs)\n          const anchorsInLi = li.querySelectorAll('a.active');\n          anchorsInLi.forEach(a => removeClass(a, CLASSES.ACTIVE));\n          \n          // Update aria on the tab link\n          const tabLink = li.querySelector('[data-toggle=\"tab\"], [data-toggle=\"pill\"]');\n          if (tabLink && tabLink.hasAttribute('aria-selected')) {\n            setAttr(tabLink, 'aria-selected', 'false');\n          }\n        }\n      }\n      \n      // Also handle dropdown menus that might have active items\n      const activeDropdownItems = container.querySelectorAll('.dropdown-menu .active');\n      activeDropdownItems.forEach(item => removeClass(item, CLASSES.ACTIVE));\n      \n      // Now activate the new tab's parent li (Bootstrap 3 style)\n      const parentLi = element.parentElement;\n      if (parentLi && parentLi.tagName === 'LI') {\n        addClass(parentLi, CLASSES.ACTIVE);\n      }\n      \n      // Handle dropdown parent - mark the dropdown's li as active too\n      const dropdownMenu = closest(element, '.dropdown-menu');\n      if (dropdownMenu) {\n        const dropdownLi = closest(dropdownMenu, 'li.dropdown');\n        if (dropdownLi) {\n          addClass(dropdownLi, CLASSES.ACTIVE);\n        }\n      }\n      \n      // Update aria on the new tab\n      if (element.hasAttribute('aria-selected')) {\n        setAttr(element, 'aria-selected', 'true');\n      }\n    }\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @param {Object} detail\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    // Use JQNext trigger for proper namespace handling\n    const event = $.Event(eventType, detail);\n    this.$element.trigger(event);\n    return event;\n  }\n  \n  /**\n   * Trigger event on specific element\n   * @param {Element} element\n   * @param {string} eventType\n   * @param {Object} detail\n   * @returns {Event}\n   * @private\n   */\n  _triggerEventOn(element, eventType, detail = {}) {\n    // Use JQNext trigger for proper namespace handling\n    const event = $.Event(eventType, detail);\n    $(element).trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Tab instance from element\n   * @param {Element} element \n   * @returns {Tab|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Tab instance\n   * @param {Element} element \n   * @returns {Tab}\n   */\n  static getOrCreateInstance(element) {\n    return Tab.getInstance(element) || new Tab(element);\n  }\n  \n  /**\n   * Handle click on tab\n   * @param {Event} event\n   */\n  static handleClick(event) {\n    event.preventDefault();\n    \n    // event.currentTarget is preferred, but may not be available in all cases\n    // event.target might be a text node, so check for closest method\n    let tab = event.currentTarget;\n    if (!tab) {\n      const target = event.target;\n      tab = target && target.closest ? target.closest(SELECTORS.DATA_TOGGLE) : null;\n    }\n    if (!tab) return;\n    \n    const instance = Tab.getOrCreateInstance(tab);\n    instance.show();\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n}\n\nexport default Tab;\nexport { Tab, EVENTS as TabEvents, CLASSES as TabClasses, SELECTORS as TabSelectors };","/**\n * Sandal Collapse Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Web Animation API for smooth animations\n */\n\nimport $ from 'jqnext';\nimport {\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\nimport {\n  $1 as $1Helper, $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, data as getData, trigger, reflow\n} from './helpers.js';\n\n// Constants\nconst NAME = 'collapse';\nconst DATA_KEY = 'bs.collapse';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  toggle: true,\n  parent: null\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  COLLAPSE: 'collapse',\n  COLLAPSING: 'collapsing',\n  COLLAPSED: 'collapsed',\n  IN: 'in',\n  SHOW: 'show'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle=\"collapse\"]',\n  ACTIVES: '.in, .collapsing'\n};\n\n/**\n * Collapse Class\n * Provides collapsible content functionality\n */\nclass Collapse {\n  /**\n   * Create a Collapse instance\n   * @param {Element} element - The collapsible element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this.$element = $(element);\n    this._element = this.$element[0];\n    \n    if (!this._element) return;\n    \n    // Parse options from data attributes\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    this._isTransitioning = false;\n    this._triggerArray = [];\n    \n    // Find all triggers for this collapse\n    const toggleList = $$(SELECTORS.DATA_TOGGLE);\n    for (const toggle of toggleList) {\n      const selector = getAttr(toggle, 'data-target') || getAttr(toggle, 'href');\n      if (selector) {\n        const filterElement = $$(selector).filter(el => el === this._element);\n        if (filterElement.length > 0) {\n          this._triggerArray.push(toggle);\n        }\n      }\n    }\n    \n    // Get parent element for accordion behavior\n    this._parent = this._getParent();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Set initial ARIA state\n    this._addAriaAndCollapsedClass(this._element, this._triggerArray);\n    \n    // Auto-toggle on init if toggle option is true (Bootstrap 3 behavior)\n    if (this._options.toggle) {\n      this.toggle();\n    }\n  }\n  \n  /**\n   * Get collapse element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Toggle the collapse\n   */\n  toggle() {\n    if (hasClass(this._element, CLASSES.IN)) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  \n  /**\n   * Show the collapse\n   */\n  async show() {\n    if (this._isTransitioning || hasClass(this._element, CLASSES.IN)) {\n      return;\n    }\n    \n    let actives = null;\n    let activesData = null;\n    \n    // Accordion behavior - close other panels\n    if (this._parent) {\n      actives = $$(SELECTORS.ACTIVES, this._parent).filter(elem => {\n        if (this._options.parent) {\n          return closest(elem, this._options.parent) === this._parent;\n        }\n        return hasClass(elem, CLASSES.COLLAPSE);\n      });\n      \n      if (actives.length === 0) {\n        actives = null;\n      }\n    }\n    \n    // Check if target is already transitioning\n    if (actives) {\n      activesData = actives.map(elem => getInstance(elem, DATA_KEY));\n      const hasTransitioning = activesData.some(data => data && data._isTransitioning);\n      if (hasTransitioning) return;\n    }\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW);\n    if (showEvent.defaultPrevented) return;\n    \n    // Close other active collapses in accordion\n    if (actives) {\n      for (const active of actives) {\n        if (active !== this._element) {\n          const instance = getInstance(active, DATA_KEY);\n          if (instance) {\n            instance.hide();\n          } else {\n            // No instance, manually remove class\n            removeClass(active, CLASSES.IN);\n          }\n        }\n      }\n    }\n    \n    this._isTransitioning = true;\n    \n    // Set up for animation\n    removeClass(this._element, CLASSES.COLLAPSE);\n    addClass(this._element, CLASSES.COLLAPSING);\n    this._element.style.height = '0';\n    this._element.style.overflow = 'hidden';\n    \n    // Update triggers\n    this._setTriggerState(false);\n    \n    // Force reflow\n    reflow(this._element);\n    \n    // Calculate natural height\n    this._element.style.height = 'auto';\n    const naturalHeight = this._element.scrollHeight;\n    this._element.style.height = '0';\n    \n    // Animate\n    try {\n      await this._element.animate([\n        { height: '0px' },\n        { height: `${naturalHeight}px` }\n      ], {\n        duration: 350,\n        easing: 'ease'\n      }).finished;\n    } catch (e) {\n      // Animation cancelled or failed\n    }\n    \n    // Finish transition\n    this._element.style.height = '';\n    this._element.style.overflow = '';\n    removeClass(this._element, CLASSES.COLLAPSING);\n    addClass(this._element, CLASSES.COLLAPSE);\n    addClass(this._element, CLASSES.IN);\n    \n    this._isTransitioning = false;\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN);\n  }\n  \n  /**\n   * Hide the collapse\n   */\n  async hide() {\n    if (this._isTransitioning || !hasClass(this._element, CLASSES.IN)) {\n      return;\n    }\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE);\n    if (hideEvent.defaultPrevented) return;\n    \n    this._isTransitioning = true;\n    \n    // Get current height for animation\n    const currentHeight = this._element.scrollHeight;\n    this._element.style.height = `${currentHeight}px`;\n    \n    // Force reflow\n    reflow(this._element);\n    \n    // Set up for animation\n    removeClass(this._element, CLASSES.COLLAPSE);\n    removeClass(this._element, CLASSES.IN);\n    addClass(this._element, CLASSES.COLLAPSING);\n    this._element.style.overflow = 'hidden';\n    \n    // Update triggers\n    this._setTriggerState(true);\n    \n    // Animate\n    try {\n      await this._element.animate([\n        { height: `${currentHeight}px` },\n        { height: '0px' }\n      ], {\n        duration: 350,\n        easing: 'ease'\n      }).finished;\n    } catch (e) {\n      // Animation cancelled or failed\n    }\n    \n    // Finish transition\n    this._element.style.height = '';\n    this._element.style.overflow = '';\n    removeClass(this._element, CLASSES.COLLAPSING);\n    addClass(this._element, CLASSES.COLLAPSE);\n    \n    this._isTransitioning = false;\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN);\n  }\n  \n  /**\n   * Destroy the collapse instance\n   */\n  dispose() {\n    removeInstance(this._element, DATA_KEY);\n    this._options = null;\n    this._parent = null;\n    this._triggerArray = null;\n    this._isTransitioning = false;\n    this._element = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Get parent element for accordion behavior\n   * @returns {Element|null}\n   * @private\n   */\n  _getParent() {\n    const parent = this._options.parent;\n    \n    if (!parent) return null;\n    \n    if (typeof parent === 'string') {\n      // Check if it's an ID selector\n      if (parent.charAt(0) === '#') {\n        return $1Helper(parent);\n      }\n      // Try to find parent from element's context\n      return closest(this._element, parent);\n    }\n    \n    return parent instanceof Element ? parent : null;\n  }\n  \n  /**\n   * Add ARIA and collapsed class to triggers\n   * @param {Element} element \n   * @param {Element[]} triggers \n   * @private\n   */\n  _addAriaAndCollapsedClass(element, triggers) {\n    const isOpen = hasClass(element, CLASSES.IN);\n    \n    if (triggers.length) {\n      for (const trigger of triggers) {\n        if (isOpen) {\n          removeClass(trigger, CLASSES.COLLAPSED);\n        } else {\n          addClass(trigger, CLASSES.COLLAPSED);\n        }\n        setAttr(trigger, 'aria-expanded', isOpen.toString());\n      }\n    }\n  }\n  \n  /**\n   * Set trigger collapsed state\n   * @param {boolean} collapsed \n   * @private\n   */\n  _setTriggerState(collapsed) {\n    for (const trigger of this._triggerArray) {\n      if (collapsed) {\n        addClass(trigger, CLASSES.COLLAPSED);\n      } else {\n        removeClass(trigger, CLASSES.COLLAPSED);\n      }\n      setAttr(trigger, 'aria-expanded', (!collapsed).toString());\n    }\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    // Use JQNext trigger for proper namespace handling\n    const event = $.Event(eventType);\n    this.$element.trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Collapse instance from element\n   * @param {Element} element \n   * @returns {Collapse|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Collapse instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Collapse}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Collapse.getInstance(element) || new Collapse(element, options);\n  }\n  \n  /**\n   * Handle click on collapse trigger\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    const trigger = event.currentTarget || event.target.closest(SELECTORS.DATA_TOGGLE);\n    \n    if (!trigger) return;\n    \n    // Prevent default for links\n    if (trigger.tagName === 'A') {\n      event.preventDefault();\n    }\n    \n    // Get target(s)\n    const selector = getAttr(trigger, 'data-target') || getAttr(trigger, 'href');\n    \n    if (!selector) return;\n    \n    const targets = $$(selector);\n    \n    for (const target of targets) {\n      const options = {\n        toggle: false\n      };\n      \n      // Check for parent (accordion)\n      const parentSelector = getAttr(trigger, 'data-parent');\n      if (parentSelector) {\n        options.parent = parentSelector;\n      }\n      \n      const instance = Collapse.getOrCreateInstance(target, options);\n      instance.toggle();\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Collapse;\nexport { Collapse, EVENTS as CollapseEvents, CLASSES as CollapseClasses, SELECTORS as CollapseSelectors };","/**\n * Sandal Alert Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport {\n  setInstance, getInstance, removeInstance\n} from '../utils/index.js';\n\nimport $J from 'jqnext';\n\nimport {\n  $1 as $, closest, hasClass, removeClass,\n  remove as removeElement, trigger, on, off, fadeOut\n} from './helpers.js';\n\n// Constants\nconst NAME = 'alert';\nconst DATA_KEY = 'bs.alert';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst EVENTS = {\n  CLOSE: `close${EVENT_KEY}`,\n  CLOSED: `closed${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  ALERT: 'alert',\n  FADE: 'fade',\n  IN: 'in'\n};\n\nconst SELECTORS = {\n  DISMISS: '[data-dismiss=\"alert\"]'\n};\n\n/**\n * Alert Class\n * Provides dismissible alert functionality\n */\nclass Alert {\n  /**\n   * Create an Alert instance\n   * @param {Element} element - The alert element\n   */\n  constructor(element) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Bind dismiss button handler\n    this._bindDismiss();\n  }\n  \n  /**\n   * Get alert element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Close the alert\n   * @param {Element} [alertElement] - Optional specific alert element to close\n   */\n  close(alertElement) {\n    const rootElement = alertElement || this._element;\n    \n    if (!rootElement) return;\n    \n    // Dispatch close event (cancelable)\n    const closeEvent = this._triggerEvent(EVENTS.CLOSE, rootElement);\n    \n    if (closeEvent.defaultPrevented) return;\n    \n    this._removeElement(rootElement);\n  }\n  \n  /**\n   * Destroy the alert instance\n   */\n  dispose() {\n    this._unbindDismiss();\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind click handler to dismiss buttons\n   * @private\n   */\n  _bindDismiss() {\n    on(this._element, 'click', SELECTORS.DISMISS, (e) => {\n      e.preventDefault();\n      this.close();\n    });\n  }\n  \n  /**\n   * Unbind dismiss handlers\n   * @private\n   */\n  _unbindDismiss() {\n    off(this._element, 'click');\n  }\n  \n  /**\n   * Remove the alert element with animation\n   * @param {Element} element \n   * @private\n   */\n  async _removeElement(element) {\n    removeClass(element, CLASSES.IN);\n    \n    if (hasClass(element, CLASSES.FADE)) {\n      // Animate out using Web Animation API\n      await fadeOut(element, { duration: 150 });\n    }\n    \n    // Remove from DOM and clean up BEFORE triggering closed event\n    const instance = getInstance(element, DATA_KEY);\n    if (instance) {\n      instance.dispose();\n    }\n    removeElement(element);\n    \n    // Dispatch closed event AFTER removal\n    this._triggerEvent(EVENTS.CLOSED, element);\n  }\n  \n  /**\n   * Trigger jQuery event\n   * @param {string} eventType\n   * @param {Element} element\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType, element) {\n    const event = $J.Event(eventType, {\n      cancelable: eventType === EVENTS.CLOSE\n    });\n    $J(element).trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Alert instance from element\n   * @param {Element} element \n   * @returns {Alert|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Alert instance\n   * @param {Element} element \n   * @returns {Alert}\n   */\n  static getOrCreateInstance(element) {\n    return Alert.getInstance(element) || new Alert(element);\n  }\n  \n  /**\n   * Close alert from dismiss button click\n   * @param {Event} event \n   */\n  static handleDismiss(event) {\n    const button = event.currentTarget || event.target;\n    const alertElement = closest(button, `.${CLASSES.ALERT}`);\n    \n    if (!alertElement) return;\n    \n    event.preventDefault();\n    \n    const instance = Alert.getOrCreateInstance(alertElement);\n    instance.close();\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n}\n\nexport default Alert;\nexport { Alert, EVENTS as AlertEvents, CLASSES as AlertClasses, SELECTORS as AlertSelectors };","/**\n * Sandal Button Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport {\n  setInstance, getInstance, removeInstance\n} from '../utils/index.js';\n\nimport {\n  $1 as $, $$, closest, hasClass, addClass, removeClass, toggleClass,\n  getAttr, setAttr, removeAttr, trigger\n} from './helpers.js';\n\n// Constants\nconst NAME = 'button';\nconst DATA_KEY = 'bs.button';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst CLASSES = {\n  ACTIVE: 'active',\n  BUTTON: 'btn',\n  DISABLED: 'disabled'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle^=\"button\"]',\n  DATA_TOGGLE_BUTTONS: '[data-toggle=\"buttons\"]',\n  INPUT: 'input:not([type=\"hidden\"])',\n  ACTIVE: '.active',\n  BUTTON: '.btn'\n};\n\n/**\n * Button Class\n * Provides toggle state and button group functionality\n */\nclass Button {\n  /**\n   * Create a Button instance\n   * @param {Element} element - The button element\n   */\n  constructor(element) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get button element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Toggle button state\n   */\n  toggle() {\n    let triggerChangeEvent = true;\n    let addAriaPressed = true;\n    \n    // Check if part of button group\n    const rootElement = closest(this._element, SELECTORS.DATA_TOGGLE_BUTTONS);\n    \n    if (rootElement) {\n      const input = this._element.querySelector(SELECTORS.INPUT);\n      \n      if (input) {\n        if (input.type === 'radio') {\n          if (input.checked && hasClass(this._element, CLASSES.ACTIVE)) {\n            triggerChangeEvent = false;\n          } else {\n            // Deactivate other buttons in group\n            const activeElement = rootElement.querySelector(SELECTORS.ACTIVE);\n            if (activeElement) {\n              removeClass(activeElement, CLASSES.ACTIVE);\n              // Also update input state\n              const activeInput = activeElement.querySelector(SELECTORS.INPUT);\n              if (activeInput) {\n                activeInput.checked = false;\n              }\n            }\n          }\n        }\n        \n        if (triggerChangeEvent) {\n          if (input.type === 'checkbox' || input.type === 'radio') {\n            input.checked = !hasClass(this._element, CLASSES.ACTIVE);\n          }\n          // Trigger change event\n          input.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n        \n        input.focus();\n        addAriaPressed = false;\n      }\n    }\n    \n    if (addAriaPressed) {\n      const pressed = !hasClass(this._element, CLASSES.ACTIVE);\n      setAttr(this._element, 'aria-pressed', pressed.toString());\n    }\n    \n    if (triggerChangeEvent) {\n      toggleClass(this._element, CLASSES.ACTIVE);\n    }\n  }\n  \n  /**\n   * Set loading state\n   * @param {string} [state='loading'] - State to set (loading, reset)\n   */\n  setState(state = 'loading') {\n    const data = this._element.dataset;\n    const val = state === 'loading' ? data.loadingText : data.resetText;\n    \n    if (!val) return;\n    \n    // Store original text\n    if (!data.resetText) {\n      data.resetText = this._element.textContent;\n    }\n    \n    // Set loading state\n    this._element.textContent = val;\n    \n    // Manage disabled state\n    if (state === 'loading') {\n      setAttr(this._element, 'disabled', 'disabled');\n      addClass(this._element, CLASSES.DISABLED);\n    } else {\n      removeAttr(this._element, 'disabled');\n      removeClass(this._element, CLASSES.DISABLED);\n    }\n  }\n  \n  /**\n   * Destroy the button instance\n   */\n  dispose() {\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Button instance from element\n   * @param {Element} element \n   * @returns {Button|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Button instance\n   * @param {Element} element \n   * @returns {Button}\n   */\n  static getOrCreateInstance(element) {\n    return Button.getInstance(element) || new Button(element);\n  }\n  \n  /**\n   * Handle click on toggle button\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    let button = event.target;\n    \n    // Find actual button element\n    if (!hasClass(button, CLASSES.BUTTON)) {\n      button = closest(button, SELECTORS.BUTTON);\n    }\n    \n    if (!button) return;\n    \n    // Check if disabled\n    if (hasClass(button, CLASSES.DISABLED) || button.disabled) {\n      event.preventDefault();\n      return;\n    }\n    \n    const instance = Button.getOrCreateInstance(button);\n    instance.toggle();\n    \n    // Don't prevent default for checkbox/radio inputs\n    const input = button.querySelector(SELECTORS.INPUT);\n    if (!input) {\n      event.preventDefault();\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n}\n\nexport default Button;\nexport { Button, CLASSES as ButtonClasses, SELECTORS as ButtonSelectors };","/**\n * Sandal Carousel Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Web Animation API for smooth transitions\n */\n\nimport {\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\nimport $J from 'jqnext';\n\nimport {\n  $1 as $, $$, closest, hasClass, addClass, removeClass, toggleClass,\n  getAttr, setAttr, data as getData, children, find,\n  on, off, trigger, reflow\n} from './helpers.js';\n\n// Constants\nconst NAME = 'carousel';\nconst DATA_KEY = 'bs.carousel';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  interval: 5000,\n  pause: 'hover',\n  wrap: true,\n  keyboard: true\n};\n\nconst EVENTS = {\n  SLIDE: `slide${EVENT_KEY}`,\n  SLID: `slid${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  CAROUSEL: 'carousel',\n  ACTIVE: 'active',\n  SLIDE: 'slide',\n  RIGHT: 'right',\n  LEFT: 'left',\n  NEXT: 'next',\n  PREV: 'prev',\n  ITEM: 'item'\n};\n\nconst SELECTORS = {\n  ACTIVE: '.active',\n  ACTIVE_ITEM: '.item.active',\n  ITEM: '.item',\n  ITEM_IMG: '.item img',\n  NEXT_PREV: '.next, .prev',\n  INDICATORS: '.carousel-indicators',\n  DATA_SLIDE: '[data-slide], [data-slide-to]',\n  DATA_RIDE: '[data-ride=\"carousel\"]'\n};\n\nconst DIRECTION = {\n  NEXT: 'next',\n  PREV: 'prev',\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\nconst TRANSITION_DURATION = 600;\n\n/**\n * Carousel Class\n * Provides carousel/slideshow functionality\n */\nclass Carousel {\n  /**\n   * Create a Carousel instance\n   * @param {Element} element - The carousel element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    this._items = null;\n    this._interval = null;\n    this._activeElement = null;\n    this._isPaused = false;\n    this._isSliding = false;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Get indicators\n    this._indicatorsElement = $(SELECTORS.INDICATORS, this._element);\n    \n    // Bind events\n    this._bindEvents();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Auto start if data-ride\n    if (this._options.interval) {\n      this.cycle();\n    }\n  }\n  \n  /**\n   * Get carousel element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Move to next slide\n   */\n  next() {\n    if (!this._isSliding) {\n      this._slide(DIRECTION.NEXT);\n    }\n  }\n  \n  /**\n   * Move to previous slide\n   */\n  prev() {\n    if (!this._isSliding) {\n      this._slide(DIRECTION.PREV);\n    }\n  }\n  \n  /**\n   * Pause the carousel\n   * @param {Event} [event] \n   */\n  pause(event) {\n    if (!event) {\n      this._isPaused = true;\n    }\n    \n    // Check for next/prev elements\n    if ($(SELECTORS.NEXT_PREV, this._element)) {\n      this._isPaused = true;\n    }\n    \n    this._clearInterval();\n  }\n  \n  /**\n   * Start cycling the carousel\n   * @param {Event} [event] \n   */\n  cycle(event) {\n    if (!event) {\n      this._isPaused = false;\n    }\n    \n    this._clearInterval();\n    \n    if (this._options.interval && !this._isPaused) {\n      this._interval = setInterval(\n        () => this.next(),\n        this._options.interval\n      );\n    }\n  }\n  \n  /**\n   * Go to specific slide\n   * @param {number} index \n   */\n  to(index) {\n    const items = this._getItems();\n    const activeIndex = this._getItemIndex($(SELECTORS.ACTIVE_ITEM, this._element));\n    \n    if (index > items.length - 1 || index < 0) return;\n    \n    if (this._isSliding) {\n      // Queue up slide after current transition\n      on(this._element, EVENTS.SLID, () => this.to(index), { once: true });\n      return;\n    }\n    \n    if (activeIndex === index) {\n      this.pause();\n      this.cycle();\n      return;\n    }\n    \n    const direction = index > activeIndex ? DIRECTION.NEXT : DIRECTION.PREV;\n    this._slide(direction, items[index]);\n  }\n  \n  /**\n   * Destroy carousel instance\n   */\n  dispose() {\n    this._clearInterval();\n    off(this._element, 'keydown');\n    off(this._element, 'mouseenter');\n    off(this._element, 'mouseleave');\n    off(this._element, 'touchstart');\n    off(this._element, 'touchmove');\n    off(this._element, 'touchend');\n    \n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._items = null;\n    this._options = null;\n    this._indicatorsElement = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind carousel events\n   * @private\n   */\n  _bindEvents() {\n    // Keyboard navigation\n    if (this._options.keyboard) {\n      on(this._element, 'keydown', (e) => this._keydown(e));\n    }\n    \n    // Pause on hover\n    if (this._options.pause === 'hover') {\n      on(this._element, 'mouseenter', () => this.pause());\n      on(this._element, 'mouseleave', () => this.cycle());\n    }\n    \n    // Touch support\n    this._addTouchEventListeners();\n  }\n  \n  /**\n   * Add touch event listeners\n   * @private\n   */\n  _addTouchEventListeners() {\n    let touchStartX = 0;\n    let touchDeltaX = 0;\n    \n    on(this._element, 'touchstart', (e) => {\n      touchStartX = e.touches[0].clientX;\n    });\n    \n    on(this._element, 'touchmove', (e) => {\n      touchDeltaX = e.touches[0].clientX - touchStartX;\n    });\n    \n    on(this._element, 'touchend', () => {\n      const absDeltaX = Math.abs(touchDeltaX);\n      \n      if (absDeltaX > 40) { // Minimum swipe distance\n        if (touchDeltaX > 0) {\n          this.prev();\n        } else {\n          this.next();\n        }\n      }\n      \n      touchDeltaX = 0;\n    });\n  }\n  \n  /**\n   * Handle keyboard navigation\n   * @param {KeyboardEvent} event \n   * @private\n   */\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) return;\n    \n    switch (event.key) {\n      case 'ArrowLeft':\n        event.preventDefault();\n        this.prev();\n        break;\n      case 'ArrowRight':\n        event.preventDefault();\n        this.next();\n        break;\n    }\n  }\n  \n  /**\n   * Get carousel items\n   * @returns {Element[]}\n   * @private\n   */\n  _getItems() {\n    if (!this._items) {\n      this._items = $$(SELECTORS.ITEM, this._element);\n    }\n    return this._items;\n  }\n  \n  /**\n   * Get item index\n   * @param {Element} element \n   * @returns {number}\n   * @private\n   */\n  _getItemIndex(element) {\n    return this._getItems().indexOf(element);\n  }\n  \n  /**\n   * Get next item\n   * @param {string} direction \n   * @param {Element} activeElement \n   * @returns {Element}\n   * @private\n   */\n  _getItemByDirection(direction, activeElement) {\n    const isNextDirection = direction === DIRECTION.NEXT;\n    const isPrevDirection = direction === DIRECTION.PREV;\n    const activeIndex = this._getItemIndex(activeElement);\n    const items = this._getItems();\n    const lastItemIndex = items.length - 1;\n    const isGoingToWrap = (isPrevDirection && activeIndex === 0) ||\n                          (isNextDirection && activeIndex === lastItemIndex);\n    \n    if (isGoingToWrap && !this._options.wrap) {\n      return activeElement;\n    }\n    \n    const delta = direction === DIRECTION.PREV ? -1 : 1;\n    const itemIndex = (activeIndex + delta) % items.length;\n    \n    return items[itemIndex === -1 ? items.length - 1 : itemIndex];\n  }\n  \n  /**\n   * Perform slide animation\n   * @param {string} direction \n   * @param {Element} [element] \n   * @private\n   */\n  async _slide(direction, element) {\n    const activeElement = $(SELECTORS.ACTIVE_ITEM, this._element);\n    const activeElementIndex = this._getItemIndex(activeElement);\n    const nextElement = element || (activeElement && this._getItemByDirection(direction, activeElement));\n    const nextElementIndex = this._getItemIndex(nextElement);\n    const isCycling = Boolean(this._interval);\n    \n    // Check if same element\n    if (nextElement === activeElement) return;\n    \n    // Determine directional class names\n    const isNext = direction === DIRECTION.NEXT;\n    const directionalClassName = isNext ? CLASSES.LEFT : CLASSES.RIGHT;\n    const orderClassName = isNext ? CLASSES.NEXT : CLASSES.PREV;\n    \n    // Dispatch slide event (cancelable)\n    const slideEvent = this._triggerEvent(EVENTS.SLIDE, {\n      relatedTarget: nextElement,\n      direction: directionalClassName,\n      from: activeElementIndex,\n      to: nextElementIndex\n    });\n    \n    if (slideEvent.defaultPrevented) return;\n    \n    if (!activeElement || !nextElement) return;\n    \n    this._isSliding = true;\n    \n    if (isCycling) {\n      this.pause();\n    }\n    \n    // Update indicators\n    this._setActiveIndicator(nextElement);\n    \n    if (hasClass(this._element, CLASSES.SLIDE)) {\n      // Animated slide\n      \n      // Add order class to next element\n      addClass(nextElement, orderClassName);\n      reflow(nextElement);\n      \n      // Add directional classes\n      addClass(activeElement, directionalClassName);\n      addClass(nextElement, directionalClassName);\n      \n      // Use Web Animation API for smooth transition\n      try {\n        await Promise.all([\n          activeElement.animate([\n            { transform: 'translateX(0)' },\n            { transform: isNext ? 'translateX(-100%)' : 'translateX(100%)' }\n          ], {\n            duration: TRANSITION_DURATION,\n            easing: 'ease-in-out'\n          }).finished,\n          nextElement.animate([\n            { transform: isNext ? 'translateX(100%)' : 'translateX(-100%)' },\n            { transform: 'translateX(0)' }\n          ], {\n            duration: TRANSITION_DURATION,\n            easing: 'ease-in-out'\n          }).finished\n        ]);\n      } catch (e) {\n        // Animation cancelled\n      }\n      \n      // Clean up classes\n      removeClass(nextElement, orderClassName);\n      removeClass(nextElement, directionalClassName);\n      addClass(nextElement, CLASSES.ACTIVE);\n      \n      removeClass(activeElement, CLASSES.ACTIVE);\n      removeClass(activeElement, orderClassName);\n      removeClass(activeElement, directionalClassName);\n    } else {\n      // No animation\n      removeClass(activeElement, CLASSES.ACTIVE);\n      addClass(nextElement, CLASSES.ACTIVE);\n    }\n    \n    this._isSliding = false;\n    \n    // Dispatch slid event\n    this._triggerEvent(EVENTS.SLID, {\n      relatedTarget: nextElement,\n      direction: directionalClassName,\n      from: activeElementIndex,\n      to: nextElementIndex\n    });\n    \n    if (isCycling) {\n      this.cycle();\n    }\n  }\n  \n  /**\n   * Set active indicator\n   * @param {Element} element \n   * @private\n   */\n  _setActiveIndicator(element) {\n    if (this._indicatorsElement) {\n      const indicators = $$(SELECTORS.ACTIVE, this._indicatorsElement);\n      for (const indicator of indicators) {\n        removeClass(indicator, CLASSES.ACTIVE);\n      }\n      \n      const nextIndicator = this._indicatorsElement.children[this._getItemIndex(element)];\n      if (nextIndicator) {\n        addClass(nextIndicator, CLASSES.ACTIVE);\n      }\n    }\n  }\n  \n  /**\n   * Clear interval\n   * @private\n   */\n  _clearInterval() {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = null;\n    }\n  }\n  \n  /**\n   * Trigger jQuery event\n   * @param {string} eventType\n   * @param {Object} extraData\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType, extraData = {}) {\n    const event = $J.Event(eventType, {\n      cancelable: eventType === EVENTS.SLIDE,\n      ...extraData\n    });\n    $J(this._element).trigger(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Carousel instance from element\n   * @param {Element} element \n   * @returns {Carousel|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Carousel instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Carousel}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Carousel.getInstance(element) || new Carousel(element, options);\n  }\n  \n  /**\n   * Handle click on carousel controls\n   * @param {Event} event \n   */\n  static handleClick(event) {\n    const target = event.currentTarget || event.target.closest(SELECTORS.DATA_SLIDE);\n    if (!target) return;\n    \n    const slideIndex = getAttr(target, 'data-slide-to');\n    const targetSelector = getAttr(target, 'data-target') || getAttr(target, 'href');\n    \n    if (!targetSelector) return;\n    \n    const carousel = $(targetSelector);\n    if (!carousel) return;\n    \n    event.preventDefault();\n    \n    const instance = Carousel.getOrCreateInstance(carousel);\n    \n    if (slideIndex !== null) {\n      instance.to(parseInt(slideIndex, 10));\n    } else {\n      const slideDir = getAttr(target, 'data-slide');\n      if (slideDir === 'prev') {\n        instance.prev();\n      } else if (slideDir === 'next') {\n        instance.next();\n      }\n    }\n    \n    instance.cycle();\n  }\n  \n  /**\n   * Auto-initialize carousels with data-ride\n   */\n  static autoInit() {\n    const carousels = $$(SELECTORS.DATA_RIDE);\n    for (const carousel of carousels) {\n      Carousel.getOrCreateInstance(carousel);\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Carousel;\nexport { Carousel, EVENTS as CarouselEvents, CLASSES as CarouselClasses, SELECTORS as CarouselSelectors };","/**\n * Sandal Scrollspy Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Intersection Observer for efficient scroll detection\n */\n\nimport {\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\nimport {\n  $1 as $, $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, parent, on, off, trigger\n} from './helpers.js';\n\n// Constants\nconst NAME = 'scrollspy';\nconst DATA_KEY = 'bs.scrollspy';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  offset: 10,\n  method: 'auto',\n  target: ''\n};\n\nconst EVENTS = {\n  ACTIVATE: `activate${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  ACTIVE: 'active',\n  DROPDOWN: 'dropdown',\n  DROPDOWN_MENU: 'dropdown-menu',\n  DROPDOWN_ITEM: 'dropdown-item',\n  NAV_LINK: 'nav-link',\n  NAV: 'nav',\n  LIST_GROUP: 'list-group'\n};\n\nconst SELECTORS = {\n  DATA_SPY: '[data-spy=\"scroll\"]',\n  ACTIVE: '.active',\n  NAV_LIST: '.nav, .list-group',\n  NAV_LINKS: '.nav-link',\n  NAV_ITEMS: '.nav-item',\n  LIST_ITEMS: '.list-group-item',\n  DROPDOWN: '.dropdown',\n  DROPDOWN_TOGGLE: '.dropdown-toggle'\n};\n\n/**\n * Scrollspy Class\n * Provides scrollspy functionality using Intersection Observer\n */\nclass Scrollspy {\n  /**\n   * Create a Scrollspy instance\n   * @param {Element} element - The scrollable element to spy on\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Get scroll element (body or specific element)\n    this._scrollElement = this._element.tagName === 'BODY' ? window : this._element;\n    \n    // Get target navigation\n    this._selector = this._options.target || '';\n    this._offsets = [];\n    this._targets = [];\n    this._activeTarget = null;\n    this._observer = null;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Initialize\n    this.refresh();\n    this._process();\n  }\n  \n  /**\n   * Get scrollspy element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Refresh scrollspy targets\n   */\n  refresh() {\n    // Clean up existing observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    \n    const targetSelector = this._selector;\n    if (!targetSelector) return;\n    \n    const nav = $(targetSelector);\n    if (!nav) return;\n    \n    // Get all links in target navigation\n    const navLinks = $$('a[href]', nav).filter(link => {\n      const href = getAttr(link, 'href');\n      return href && href.charAt(0) === '#' && href.length > 1;\n    });\n    \n    this._targets = [];\n    this._offsets = [];\n    \n    // Get scroll height\n    const scrollHeight = this._getScrollHeight();\n    \n    // Build targets list\n    for (const link of navLinks) {\n      const href = getAttr(link, 'href');\n      const target = $(href);\n      \n      if (target) {\n        const targetBCR = target.getBoundingClientRect();\n        if (targetBCR.width || targetBCR.height) {\n          this._targets.push(href);\n          this._offsets.push(this._getOffsetTop(target));\n        }\n      }\n    }\n    \n    // Sort by offset\n    const items = this._targets.map((href, i) => ({ href, offset: this._offsets[i] }));\n    items.sort((a, b) => a.offset - b.offset);\n    this._targets = items.map(item => item.href);\n    this._offsets = items.map(item => item.offset);\n    \n    // Set up Intersection Observer for modern detection\n    this._setupIntersectionObserver();\n    \n    // Also keep scroll listener as fallback\n    this._setupScrollListener();\n  }\n  \n  /**\n   * Destroy scrollspy instance\n   */\n  dispose() {\n    // Clean up observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    \n    // Remove scroll listener\n    off(this._scrollElement, 'scroll', this._scrollHandler);\n    \n    // Clear active state\n    this._clear();\n    \n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._scrollElement = null;\n    this._options = null;\n    this._targets = null;\n    this._offsets = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Set up Intersection Observer\n   * @private\n   */\n  _setupIntersectionObserver() {\n    // Get all target elements\n    const targetElements = this._targets\n      .map(href => $(href))\n      .filter(Boolean);\n    \n    if (targetElements.length === 0) return;\n    \n    const rootMargin = `-${this._options.offset}px 0px -${window.innerHeight - this._options.offset - 1}px 0px`;\n    \n    this._observer = new IntersectionObserver((entries) => {\n      // Find the first intersecting entry\n      const intersectingEntries = entries.filter(entry => entry.isIntersecting);\n      \n      if (intersectingEntries.length > 0) {\n        // Get the topmost intersecting element\n        const topEntry = intersectingEntries.reduce((prev, current) => {\n          return (current.boundingClientRect.top < prev.boundingClientRect.top) ? current : prev;\n        });\n        \n        const targetId = `#${topEntry.target.id}`;\n        this._activate(targetId);\n      }\n    }, {\n      root: this._element === document.body ? null : this._element,\n      rootMargin,\n      threshold: 0\n    });\n    \n    // Observe all targets\n    for (const target of targetElements) {\n      this._observer.observe(target);\n    }\n  }\n  \n  /**\n   * Set up scroll listener as fallback\n   * @private\n   */\n  _setupScrollListener() {\n    this._scrollHandler = () => {\n      requestAnimationFrame(() => this._process());\n    };\n    \n    on(this._scrollElement, 'scroll', this._scrollHandler);\n  }\n  \n  /**\n   * Process scroll position\n   * @private\n   */\n  _process() {\n    const scrollTop = this._getScrollTop() + this._options.offset;\n    const scrollHeight = this._getScrollHeight();\n    const maxScroll = this._options.offset + scrollHeight - this._getOffsetHeight();\n    \n    if (this._offsets.length === 0) return;\n    \n    // Check if at bottom\n    if (scrollTop >= maxScroll) {\n      const target = this._targets[this._targets.length - 1];\n      if (this._activeTarget !== target) {\n        this._activate(target);\n      }\n      return;\n    }\n    \n    // Check if before first target\n    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {\n      this._activeTarget = null;\n      this._clear();\n      return;\n    }\n    \n    // Find active target\n    for (let i = this._offsets.length; i--;) {\n      const isActiveTarget = this._activeTarget !== this._targets[i] &&\n          scrollTop >= this._offsets[i] &&\n          (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1]);\n      \n      if (isActiveTarget) {\n        this._activate(this._targets[i]);\n      }\n    }\n  }\n  \n  /**\n   * Activate target\n   * @param {string} target - Target selector\n   * @private\n   */\n  _activate(target) {\n    this._activeTarget = target;\n    \n    this._clear();\n    \n    // Find matching nav links\n    const queries = this._selector.split(',')\n      .map(sel => `${sel} a[href=\"${target}\"], ${sel} [data-target=\"${target}\"]`);\n    \n    const links = $$(queries.join(','));\n    \n    for (const link of links) {\n      if (hasClass(link, CLASSES.DROPDOWN_ITEM)) {\n        // Dropdown item\n        const dropdown = closest(link, SELECTORS.DROPDOWN);\n        if (dropdown) {\n          const toggle = $(SELECTORS.DROPDOWN_TOGGLE, dropdown);\n          if (toggle) {\n            addClass(toggle, CLASSES.ACTIVE);\n          }\n        }\n        addClass(link, CLASSES.ACTIVE);\n      } else {\n        // Regular nav link\n        addClass(link, CLASSES.ACTIVE);\n        \n        // Activate parent items\n        let parentItem = link.parentElement;\n        while (parentItem) {\n          if (hasClass(parentItem, CLASSES.NAV) || hasClass(parentItem, CLASSES.LIST_GROUP)) {\n            // Check for parent nav-item\n            const prevSibling = parentItem.previousElementSibling;\n            if (prevSibling && hasClass(prevSibling, CLASSES.ACTIVE)) {\n              addClass(prevSibling, CLASSES.ACTIVE);\n            }\n          }\n          \n          // Handle li elements\n          if (parentItem.tagName === 'LI') {\n            addClass(parentItem, CLASSES.ACTIVE);\n          }\n          \n          // Handle dropdown parents\n          if (hasClass(parentItem, CLASSES.DROPDOWN)) {\n            const toggle = $(SELECTORS.DROPDOWN_TOGGLE, parentItem);\n            if (toggle) {\n              addClass(toggle, CLASSES.ACTIVE);\n            }\n          }\n          \n          parentItem = parentItem.parentElement;\n        }\n      }\n    }\n    \n    // Dispatch activate event\n    this._triggerEvent(EVENTS.ACTIVATE, { relatedTarget: target });\n  }\n  \n  /**\n   * Clear active state\n   * @private\n   */\n  _clear() {\n    const nav = $(this._selector);\n    if (!nav) return;\n    \n    const activeLinks = $$(SELECTORS.ACTIVE, nav);\n    for (const link of activeLinks) {\n      removeClass(link, CLASSES.ACTIVE);\n    }\n  }\n  \n  /**\n   * Get scroll top\n   * @returns {number}\n   * @private\n   */\n  _getScrollTop() {\n    return this._scrollElement === window\n      ? this._scrollElement.scrollY\n      : this._scrollElement.scrollTop;\n  }\n  \n  /**\n   * Get scroll height\n   * @returns {number}\n   * @private\n   */\n  _getScrollHeight() {\n    return this._scrollElement === window\n      ? Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n      : this._scrollElement.scrollHeight;\n  }\n  \n  /**\n   * Get offset height\n   * @returns {number}\n   * @private\n   */\n  _getOffsetHeight() {\n    return this._scrollElement === window\n      ? window.innerHeight\n      : this._scrollElement.getBoundingClientRect().height;\n  }\n  \n  /**\n   * Get offset top of element\n   * @param {Element} element \n   * @returns {number}\n   * @private\n   */\n  _getOffsetTop(element) {\n    if (this._scrollElement === window) {\n      return element.getBoundingClientRect().top + window.scrollY;\n    }\n    return element.offsetTop;\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @param {Object} detail \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: false,\n      detail\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Scrollspy instance from element\n   * @param {Element} element \n   * @returns {Scrollspy|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Scrollspy instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Scrollspy}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Scrollspy.getInstance(element) || new Scrollspy(element, options);\n  }\n  \n  /**\n   * Auto-initialize scrollspy elements\n   */\n  static autoInit() {\n    const spyElements = $$(SELECTORS.DATA_SPY);\n    for (const element of spyElements) {\n      Scrollspy.getOrCreateInstance(element);\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Scrollspy;\nexport { Scrollspy, EVENTS as ScrollspyEvents, CLASSES as ScrollspyClasses, SELECTORS as ScrollspySelectors };","/**\n * Sandal Affix Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Intersection Observer for efficient scroll detection\n * Note: Bootstrap 4+ deprecated affix in favor of CSS position:sticky\n */\n\nimport {\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\nimport {\n  $1 as $, $$, hasClass, addClass, removeClass,\n  getAttr, css, on, off, trigger\n} from './helpers.js';\n\n// Constants\nconst NAME = 'affix';\nconst DATA_KEY = 'bs.affix';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  offset: 0,\n  target: window\n};\n\nconst EVENTS = {\n  AFFIX: `affix${EVENT_KEY}`,\n  AFFIXED: `affixed${EVENT_KEY}`,\n  AFFIX_TOP: `affix-top${EVENT_KEY}`,\n  AFFIXED_TOP: `affixed-top${EVENT_KEY}`,\n  AFFIX_BOTTOM: `affix-bottom${EVENT_KEY}`,\n  AFFIXED_BOTTOM: `affixed-bottom${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  AFFIX: 'affix',\n  AFFIX_TOP: 'affix-top',\n  AFFIX_BOTTOM: 'affix-bottom'\n};\n\nconst SELECTORS = {\n  DATA_SPY: '[data-spy=\"affix\"]'\n};\n\n/**\n * Affix Class\n * Provides affix (sticky) positioning functionality\n */\nclass Affix {\n  /**\n   * Create an Affix instance\n   * @param {Element} element - The element to affix\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...this._parseOffsetOption(options),\n      ...parseDataOptions(this._element, DEFAULTS)\n    };\n    \n    // Get target scroll element\n    this._target = this._getTarget();\n    this._affixed = null;\n    this._unpin = null;\n    this._pinnedOffset = null;\n    this._observer = null;\n    this._scrollHandler = null;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Initialize\n    this._checkPosition();\n    this._setupListeners();\n  }\n  \n  /**\n   * Get affix element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Get affix state\n   * @returns {string|null}\n   */\n  get state() {\n    return this._affixed;\n  }\n  \n  /**\n   * Check and update position\n   */\n  checkPosition() {\n    this._checkPosition();\n  }\n  \n  /**\n   * Check and update position with resize\n   */\n  checkPositionWithEventLoop() {\n    requestAnimationFrame(() => this._checkPosition());\n  }\n  \n  /**\n   * Destroy affix instance\n   */\n  dispose() {\n    // Clean up observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    \n    // Remove scroll listener\n    if (this._scrollHandler) {\n      off(this._target, 'scroll', this._scrollHandler);\n    }\n    \n    // Remove resize listener\n    off(window, 'resize', this._resizeHandler);\n    \n    // Remove classes\n    removeClass(this._element, CLASSES.AFFIX);\n    removeClass(this._element, CLASSES.AFFIX_TOP);\n    removeClass(this._element, CLASSES.AFFIX_BOTTOM);\n    \n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._options = null;\n    this._target = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Parse offset option\n   * @param {Object} options \n   * @returns {Object}\n   * @private\n   */\n  _parseOffsetOption(options) {\n    if (options.offset !== undefined) {\n      const offset = options.offset;\n      \n      if (typeof offset === 'number') {\n        return {\n          offset: {\n            top: offset,\n            bottom: offset\n          }\n        };\n      }\n      \n      if (typeof offset === 'object') {\n        return { offset };\n      }\n    }\n    \n    return {};\n  }\n  \n  /**\n   * Get target scroll element\n   * @returns {Window|Element}\n   * @private\n   */\n  _getTarget() {\n    const target = this._options.target;\n    \n    if (target === window || !target) return window;\n    \n    if (typeof target === 'string') {\n      return $(target) || window;\n    }\n    \n    return target;\n  }\n  \n  /**\n   * Set up scroll and resize listeners\n   * @private\n   */\n  _setupListeners() {\n    // Scroll listener\n    this._scrollHandler = () => {\n      requestAnimationFrame(() => this._checkPosition());\n    };\n    on(this._target, 'scroll', this._scrollHandler);\n    \n    // Resize listener\n    this._resizeHandler = () => {\n      requestAnimationFrame(() => this._checkPosition());\n    };\n    on(window, 'resize', this._resizeHandler);\n    \n    // Try to use Intersection Observer for top/bottom detection\n    this._setupIntersectionObserver();\n  }\n  \n  /**\n   * Set up Intersection Observer for boundary detection\n   * @private\n   */\n  _setupIntersectionObserver() {\n    // Create sentinels for top and bottom boundaries\n    const offset = this._getOffset();\n    \n    if (!offset.top && !offset.bottom) return;\n    \n    // This is a supplementary observer for more efficient detection\n    // The main position checking is still done via scroll events for accuracy\n  }\n  \n  /**\n   * Get offset values\n   * @returns {{top: number, bottom: number}}\n   * @private\n   */\n  _getOffset() {\n    const offset = this._options.offset;\n    \n    if (typeof offset === 'function') {\n      return offset.call(this, this._element);\n    }\n    \n    if (typeof offset === 'object') {\n      return {\n        top: typeof offset.top === 'function' ? offset.top.call(this, this._element) : (offset.top || 0),\n        bottom: typeof offset.bottom === 'function' ? offset.bottom.call(this, this._element) : (offset.bottom || 0)\n      };\n    }\n    \n    return {\n      top: Number(offset) || 0,\n      bottom: Number(offset) || 0\n    };\n  }\n  \n  /**\n   * Get scroll position\n   * @returns {number}\n   * @private\n   */\n  _getScrollTop() {\n    return this._target === window\n      ? window.scrollY || document.documentElement.scrollTop\n      : this._target.scrollTop;\n  }\n  \n  /**\n   * Get scroll height\n   * @returns {number}\n   * @private\n   */\n  _getScrollHeight() {\n    return this._target === window\n      ? Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n      : this._target.scrollHeight;\n  }\n  \n  /**\n   * Check and update position\n   * @private\n   */\n  _checkPosition() {\n    if (!this._element || getComputedStyle(this._element).display === 'none') {\n      return;\n    }\n    \n    const scrollTop = this._getScrollTop();\n    const scrollHeight = this._getScrollHeight();\n    const offset = this._getOffset();\n    const position = this._element.getBoundingClientRect();\n    const targetHeight = this._target === window\n      ? window.innerHeight\n      : this._target.getBoundingClientRect().height;\n    \n    let affix = null;\n    \n    // Check for unpin\n    if (this._unpin !== null && scrollTop + this._unpin <= position.top) {\n      affix = false;\n    }\n    // Check for bottom offset\n    else if (offset.bottom !== undefined && offset.bottom !== null) {\n      const offsetBottom = typeof offset.bottom === 'function'\n        ? offset.bottom.call(this, this._element)\n        : offset.bottom;\n      \n      if (scrollTop + targetHeight >= scrollHeight - offsetBottom) {\n        affix = 'bottom';\n      }\n    }\n    // Check for top offset\n    else if (offset.top !== undefined && offset.top !== null) {\n      const offsetTop = typeof offset.top === 'function'\n        ? offset.top.call(this, this._element)\n        : offset.top;\n      \n      if (scrollTop <= offsetTop) {\n        affix = 'top';\n      }\n    }\n    \n    // Determine if we should be affixed\n    if (affix === null) {\n      const offsetTop = typeof offset.top === 'function'\n        ? offset.top.call(this, this._element)\n        : (offset.top || 0);\n      \n      affix = scrollTop >= offsetTop;\n    }\n    \n    // No change needed\n    if (this._affixed === affix) return;\n    \n    // Handle unpin\n    if (this._unpin !== null) {\n      this._element.style.top = '';\n    }\n    \n    const affixType = affix === 'bottom' ? 'bottom' : (affix === 'top' ? 'top' : '');\n    const eventPrefix = affix ? `affix${affixType ? `-${affixType}` : ''}` : 'affix';\n    \n    // Dispatch affix event (cancelable)\n    const affixEvent = this._triggerEvent(`${eventPrefix}${EVENT_KEY}`);\n    if (affixEvent.defaultPrevented) return;\n    \n    this._affixed = affix;\n    this._unpin = affix === 'bottom' ? this._getPinnedOffset() : null;\n    \n    // Update classes\n    removeClass(this._element, CLASSES.AFFIX);\n    removeClass(this._element, CLASSES.AFFIX_TOP);\n    removeClass(this._element, CLASSES.AFFIX_BOTTOM);\n    \n    if (affix === 'bottom') {\n      addClass(this._element, CLASSES.AFFIX_BOTTOM);\n    } else if (affix === 'top') {\n      addClass(this._element, CLASSES.AFFIX_TOP);\n    } else if (affix) {\n      addClass(this._element, CLASSES.AFFIX);\n    }\n    \n    // Handle bottom positioning\n    if (affix === 'bottom') {\n      this._element.style.position = 'absolute';\n      this._element.style.top = `${scrollHeight - this._element.offsetHeight - offset.bottom}px`;\n    } else {\n      this._element.style.position = '';\n      this._element.style.top = '';\n    }\n    \n    // Dispatch affixed event\n    const affixedEventPrefix = affix ? `affixed${affixType ? `-${affixType}` : ''}` : 'affixed';\n    this._triggerEvent(`${affixedEventPrefix}${EVENT_KEY}`);\n  }\n  \n  /**\n   * Get pinned offset\n   * @returns {number}\n   * @private\n   */\n  _getPinnedOffset() {\n    if (this._pinnedOffset) return this._pinnedOffset;\n    \n    this._element.classList.remove(CLASSES.AFFIX_TOP, CLASSES.AFFIX_BOTTOM);\n    this._element.classList.add(CLASSES.AFFIX);\n    \n    const scrollTop = this._getScrollTop();\n    const position = this._element.getBoundingClientRect();\n    \n    this._pinnedOffset = scrollTop - position.top;\n    return this._pinnedOffset;\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType.includes('affix') && !eventType.includes('affixed')\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Affix instance from element\n   * @param {Element} element \n   * @returns {Affix|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Affix instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Affix}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Affix.getInstance(element) || new Affix(element, options);\n  }\n  \n  /**\n   * Auto-initialize affix elements\n   */\n  static autoInit() {\n    const affixElements = $$(SELECTORS.DATA_SPY);\n    for (const element of affixElements) {\n      Affix.getOrCreateInstance(element);\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Affix;\nexport { Affix, EVENTS as AffixEvents, CLASSES as AffixClasses, SELECTORS as AffixSelectors };","import $ from 'jqnext';\nimport Modal from './components/modal.js';\nimport Dropdown from './components/dropdown.js';\nimport Tooltip from './components/tooltip.js';\nimport Popover from './components/popover.js';\nimport Tab from './components/tab.js';\nimport Collapse from './components/collapse.js';\nimport Alert from './components/alert.js';\nimport Button from './components/button.js';\nimport Carousel from './components/carousel.js';\nimport Scrollspy from './components/scrollspy.js';\nimport Affix from './components/affix.js';\n\n/**\n * SandalJS - Modern Bootstrap 3 API-compatible library\n * @class\n */\nclass Sandal {\n  static VERSION = '1.3.0';\n  \n  constructor() {\n    this.version = '1.3.0';\n    this._components = new Map();\n  }\n\n  /**\n   * Initialize a modal component\n   * @param {HTMLElement|string} element - Modal element or selector\n   * @param {Object} options - Modal options\n   * @returns {Modal} Modal instance\n   */\n  modal(element, options = {}) {\n    return new Modal(element, options);\n  }\n\n  /**\n   * Initialize a dropdown component\n   * @param {HTMLElement|string} element - Dropdown element or selector\n   * @param {Object} options - Dropdown options\n   * @returns {Dropdown} Dropdown instance\n   */\n  dropdown(element, options = {}) {\n    return new Dropdown(element, options);\n  }\n\n  /**\n   * Initialize a tooltip component\n   * @param {HTMLElement|string} element - Tooltip element or selector\n   * @param {Object} options - Tooltip options\n   * @returns {Tooltip} Tooltip instance\n   */\n  tooltip(element, options = {}) {\n    return new Tooltip(element, options);\n  }\n\n  /**\n   * Initialize a popover component\n   * @param {HTMLElement|string} element - Popover element or selector\n   * @param {Object} options - Popover options\n   * @returns {Popover} Popover instance\n   */\n  popover(element, options = {}) {\n    return new Popover(element, options);\n  }\n\n  /**\n   * Initialize a tab component\n   * @param {HTMLElement|string} element - Tab element or selector\n   * @param {Object} options - Tab options\n   * @returns {Tab} Tab instance\n   */\n  tab(element, options = {}) {\n    return new Tab(element, options);\n  }\n\n  /**\n   * Initialize a collapse component\n   * @param {HTMLElement|string} element - Collapse element or selector\n   * @param {Object} options - Collapse options\n   * @returns {Collapse} Collapse instance\n   */\n  collapse(element, options = {}) {\n    return new Collapse(element, options);\n  }\n\n  /**\n   * Initialize an alert component\n   * @param {HTMLElement|string} element - Alert element or selector\n   * @param {Object} options - Alert options\n   * @returns {Alert} Alert instance\n   */\n  alert(element, options = {}) {\n    return new Alert(element, options);\n  }\n\n  /**\n   * Initialize a button component\n   * @param {HTMLElement|string} element - Button element or selector\n   * @param {Object} options - Button options\n   * @returns {Button} Button instance\n   */\n  button(element, options = {}) {\n    return new Button(element, options);\n  }\n\n  /**\n   * Initialize a carousel component\n   * @param {HTMLElement|string} element - Carousel element or selector\n   * @param {Object} options - Carousel options\n   * @returns {Carousel} Carousel instance\n   */\n  carousel(element, options = {}) {\n    return new Carousel(element, options);\n  }\n\n  /**\n   * Initialize a scrollspy component\n   * @param {HTMLElement|string} element - Scrollspy element or selector\n   * @param {Object} options - Scrollspy options\n   * @returns {Scrollspy} Scrollspy instance\n   */\n  scrollspy(element, options = {}) {\n    return new Scrollspy(element, options);\n  }\n\n  /**\n   * Initialize an affix component\n   * @param {HTMLElement|string} element - Affix element or selector\n   * @param {Object} options - Affix options\n   * @returns {Affix} Affix instance\n   */\n  affix(element, options = {}) {\n    return new Affix(element, options);\n  }\n\n  /**\n   * Initialize component by name (for programmatic use)\n   * @param {string} componentName - Name of the component\n   * @param {HTMLElement|string} element - Element or selector\n   * @param {Object} options - Component options\n   * @returns {Object|null} Component instance or null if not found\n   */\n  static initComponent(componentName, element, options = {}) {\n    const ComponentClass = {\n      modal: Modal,\n      dropdown: Dropdown,\n      tooltip: Tooltip,\n      popover: Popover,\n      tab: Tab,\n      collapse: Collapse,\n      alert: Alert,\n      button: Button,\n      carousel: Carousel,\n      scrollspy: Scrollspy,\n      affix: Affix\n    }[componentName];\n\n    if (ComponentClass) {\n      return new ComponentClass(element, options);\n    }\n    return null;\n  }\n\n  /**\n   * Get all active components\n   * @returns {Map} Map of active components\n   */\n  getComponents() {\n    return this._components;\n  }\n\n  /**\n   * Destroy all components\n   */\n  destroy() {\n    for (const [key, component] of this._components) {\n      if (typeof component.destroy === 'function') {\n        component.destroy();\n      }\n    }\n    this._components.clear();\n  }\n}\n\n// jQuery/presideJQuery compatibility layer using JQNext\n// JQNext provides full jQuery 2.x compatibility and sets window.presideJQuery\n(function() {\n  // JQNext is already imported and sets window.jQuery, window.$, and window.presideJQuery\n  // We use the imported $ which is JQNext\n\n  // Add transition support detection (Bootstrap 3 requirement)\n  function transitionEnd() {\n    const el = document.createElement('bootstrap');\n    const transEndEventNames = {\n      'WebkitTransition': 'webkitTransitionEnd',\n      'MozTransition': 'transitionend',\n      'OTransition': 'oTransitionEnd otransitionend',\n      'transition': 'transitionend'\n    };\n\n    for (const name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] };\n      }\n    }\n    return false;\n  }\n\n  // Add $.support.transition\n  $(function() {\n    $.support.transition = transitionEnd();\n  });\n\n  // Add $.fn.emulateTransitionEnd\n  $.fn.emulateTransitionEnd = function(duration) {\n    let called = false;\n    const $el = this;\n    $(this).one($.support.transition.end, function() { called = true; });\n    const callback = function() { if (!called) $($el).trigger($.support.transition.end); };\n    setTimeout(callback, duration);\n    return this;\n  };\n\n  // Store old plugin references for noConflict\n  const old = {\n    modal: $.fn.modal,\n    dropdown: $.fn.dropdown,\n    tooltip: $.fn.tooltip,\n    popover: $.fn.popover,\n    tab: $.fn.tab,\n    collapse: $.fn.collapse,\n    alert: $.fn.alert,\n    button: $.fn.button,\n    carousel: $.fn.carousel,\n    scrollspy: $.fn.scrollspy,\n    affix: $.fn.affix\n  };\n\n  // Modal plugin\n  $.fn.modal = function(option, _relatedTarget) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Modal.getInstance(this);\n      const options = $.extend({}, Modal.DEFAULTS || {}, $this.data(), typeof option === 'object' && option);\n\n      if (!data && option !== 'dispose') {\n        data = new Modal(this, options);\n      }\n      if (typeof option === 'string' && data) {\n        data[option](_relatedTarget);\n      } else if (data && options.show) {\n        data.show(_relatedTarget);\n      }\n    });\n  };\n  $.fn.modal.Constructor = Modal;\n  $.fn.modal.noConflict = function() { $.fn.modal = old.modal; return this; };\n\n  // Dropdown plugin\n  $.fn.dropdown = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Dropdown.getInstance(this);\n\n      if (!data && option !== 'dispose') {\n        data = new Dropdown(this);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.dropdown.Constructor = Dropdown;\n  $.fn.dropdown.noConflict = function() { $.fn.dropdown = old.dropdown; return this; };\n\n  // Tooltip plugin\n  $.fn.tooltip = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Tooltip.getInstance(this);\n      const options = typeof option === 'object' && option;\n\n      if (!data && option !== 'dispose') {\n        data = new Tooltip(this, options);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.tooltip.Constructor = Tooltip;\n  $.fn.tooltip.noConflict = function() { $.fn.tooltip = old.tooltip; return this; };\n\n  // Popover plugin\n  $.fn.popover = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Popover.getInstance(this);\n      const options = typeof option === 'object' && option;\n\n      if (!data && option !== 'dispose') {\n        data = new Popover(this, options);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.popover.Constructor = Popover;\n  $.fn.popover.noConflict = function() { $.fn.popover = old.popover; return this; };\n\n  // Tab plugin\n  $.fn.tab = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Tab.getInstance(this);\n\n      if (!data && option !== 'dispose') {\n        data = new Tab(this);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.tab.Constructor = Tab;\n  $.fn.tab.noConflict = function() { $.fn.tab = old.tab; return this; };\n\n  // Collapse plugin\n  $.fn.collapse = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Collapse.getInstance(this);\n      const options = $.extend({}, Collapse.DEFAULTS || {}, $this.data(), typeof option === 'object' && option);\n\n      if (!data && option !== 'dispose') {\n        data = new Collapse(this, options);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.collapse.Constructor = Collapse;\n  $.fn.collapse.noConflict = function() { $.fn.collapse = old.collapse; return this; };\n\n  // Alert plugin\n  $.fn.alert = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Alert.getInstance(this);\n\n      if (!data && option !== 'dispose') {\n        data = new Alert(this);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.alert.Constructor = Alert;\n  $.fn.alert.noConflict = function() { $.fn.alert = old.alert; return this; };\n\n  // Button plugin\n  $.fn.button = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Button.getInstance(this);\n      const options = typeof option === 'object' && option;\n\n      if (!data && option !== 'dispose') {\n        data = new Button(this, options);\n      }\n      if (option === 'toggle' && data) {\n        data.toggle();\n      } else if (option && data) {\n        data.setState(option);\n      }\n    });\n  };\n  $.fn.button.Constructor = Button;\n  $.fn.button.noConflict = function() { $.fn.button = old.button; return this; };\n\n  // Carousel plugin\n  $.fn.carousel = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Carousel.getInstance(this);\n      const options = $.extend({}, Carousel.DEFAULTS || {}, $this.data(), typeof option === 'object' && option);\n      const action = typeof option === 'string' ? option : options.slide;\n\n      if (!data && option !== 'dispose') {\n        data = new Carousel(this, options);\n      }\n      if (typeof option === 'number' && data) {\n        data.to(option);\n      } else if (action && data) {\n        data[action]();\n      } else if (data && options.interval) {\n        data.pause().cycle();\n      }\n    });\n  };\n  $.fn.carousel.Constructor = Carousel;\n  $.fn.carousel.noConflict = function() { $.fn.carousel = old.carousel; return this; };\n\n  // Scrollspy plugin\n  $.fn.scrollspy = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Scrollspy.getInstance(this);\n      const options = typeof option === 'object' && option;\n\n      if (!data && option !== 'dispose') {\n        data = new Scrollspy(this, options);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.scrollspy.Constructor = Scrollspy;\n  $.fn.scrollspy.noConflict = function() { $.fn.scrollspy = old.scrollspy; return this; };\n\n  // Affix plugin\n  $.fn.affix = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = Affix.getInstance(this);\n      const options = typeof option === 'object' && option;\n\n      if (!data && option !== 'dispose') {\n        data = new Affix(this, options);\n      }\n      if (typeof option === 'string' && data) {\n        data[option]();\n      }\n    });\n  };\n  $.fn.affix.Constructor = Affix;\n  $.fn.affix.noConflict = function() { $.fn.affix = old.affix; return this; };\n\n  // ===========================================\n  // DATA-API (automatic initialization via data attributes)\n  // ===========================================\n\n  // Tab data-api - supports both Preside (.presidecms) and generic usage\n  $(document).on('click.bs.tab.data-api', '[data-toggle$=\"tab\"], [data-toggle$=\"pill\"]', function(e) {\n    e.preventDefault();\n    $(this).tab('show');\n  });\n\n  // Modal data-api - supports both Preside (.presidecms) and generic usage\n  $(document).on('click.bs.modal.data-api', '[data-toggle$=\"modal\"]', function(e) {\n    const $this = $(this);\n    const href = $this.attr('href');\n    const $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, '')));\n    const option = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data());\n\n    if ($this.is('a')) e.preventDefault();\n\n    $target.modal(option, this);\n  });\n\n  // Dropdown data-api - supports both Preside (.presidecms) and generic usage\n  $(document).on('click.bs.dropdown.data-api', '[data-toggle$=dropdown]', function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    $(this).dropdown('toggle');\n  });\n\n  // Collapse data-api - supports both Preside (.presidecms) and generic usage\n  $(document).on('click.bs.collapse.data-api', '[data-toggle$=collapse]', function(e) {\n    const $this = $(this);\n    let href;\n    const target = $this.attr('data-target')\n      || e.preventDefault()\n      || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '');\n    const $target = $(target);\n    const data = $target.data('bs.collapse');\n    const option = data ? 'toggle' : $this.data();\n\n    $target.collapse(option);\n  });\n\n  // Alert data-api - supports both Preside (.presidecms) and generic usage\n  $(document).on('click.bs.alert.data-api', '[data-dismiss=\"alert\"]', function(e) {\n    $(this).closest('.alert').alert('close');\n    e.preventDefault();\n  });\n\n  // Button data-api - supports both Preside (.presidecms) and generic usage\n  $(document).on('click.bs.button.data-api', '[data-toggle^=button]', function(e) {\n    let $btn = $(e.target);\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn');\n    $btn.button('toggle');\n    e.preventDefault();\n  });\n\n  // Global export\n  if (typeof window !== 'undefined') {\n    window.Sandal = Sandal;\n  }\n})();\n\nexport default Sandal;"],"names":["createFromHTML","html","template","document","createElement","innerHTML","trim","content","firstChild","reflow","element","offsetHeight","getFloatingUI","window","FloatingUIDOM","PLACEMENT_MAP","top","bottom","left","right","auto","async","computePosition","reference","floating","options","placement","offset","offsetValue","flip","shift","arrow","container","fui","middleware","push","padding","result","x","y","middlewareData","refRect","getBoundingClientRect","floatRect","scrollX","documentElement","scrollLeft","scrollY","scrollTop","finalPlacement","width","height","viewport","innerWidth","innerHeight","Math","max","min","computePositionFallback","autoUpdate","update","events","parents","current","parentElement","style","getComputedStyle","overflow","overflowX","overflowY","test","getScrollParents","handleUpdate","requestAnimationFrame","forEach","event","addEventListener","parent","removeEventListener","setInstance","key","instance","$","data","getInstance","removeInstance","removeData","parseDataOptions","defaults","prefix","dataPrefix","Object","keys","dataKey","replace","toLowerCase","attrName","value","getAttribute","isNaN","Number","JSON","parse","idCounter","isDisabled","nodeType","Node","ELEMENT_NODE","classList","contains","hasAttribute","trapFocus","focusable","selector","join","Array","from","querySelectorAll","filter","el","offsetWidth","getFocusable","length","firstFocusable","lastFocusable","handleKeydown","e","shiftKey","activeElement","preventDefault","focus","DATA_KEY","EVENT_KEY","DEFAULTS","backdrop","keyboard","show","EVENTS","SHOW","SHOWN","HIDE","HIDDEN","LOADED","CLASSES","SELECTORS","Modal","constructor","this","$element","_element","$dialog","find","_dialog","_backdrop","_isShown","_isTransitioning","_scrollbarWidth","_focusTrap","_options","_bindEvents","toggle","relatedTarget","hide","_triggerEvent","defaultPrevented","_checkScrollbar","_setScrollbar","addClass","_escape","_resize","on","one","target","_ignoreBackdropClick","_showBackdrop","_showModal","off","_escapeHandler","_resizeHandler","removeClass","hasClass","_waitForTransition","_hideModal","_adjustDialog","dispose","remove","$backdrop","appendTo","css","removeAttr","attr","role","_resetScrollbar","isModalOverflowing","scrollHeight","clientHeight","_isBodyOverflowing","paddingLeft","paddingRight","rect","body","_getScrollbarWidth","scrollDiv","className","cssText","appendChild","scrollbarWidth","clientWidth","_originalPadding","computedPadding","parseFloat","each","actualPadding","calculatedPadding","dataset","undefined","duration","Promise","resolve","handler","setTimeout","eventType","detail","Event","trigger","getOrCreateInstance","handleToggle","currentTarget","closest","$trigger","href","$modalElement","VERSION","$$","context","$1","querySelector","children","getAttr","setAttr","selectorOrHandler","handlerOrOptions","$el","sanitizeHTML","div","textContent","boundary","display","KEYS","TAB","ESCAPE","SPACE","ARROW_UP","ARROW_DOWN","Dropdown","_parent","_getParentElement","_menu","_getMenuElement","isOpen","closeAll","_addDocumentListener","_removeDocumentListener","_handleKeydown","_documentClickHandler","isMenuItem","isInForm","_documentKeyHandler","includes","stopPropagation","items","index","indexOf","openDropdowns","dropdown","NAME","animation","title","delay","fallbackPlacement","sanitize","INSERTED","TRIGGERS","Tooltip","_getOptions","_tip","_isEnabled","_timeout","_hoverState","_activeTrigger","_cleanupAutoUpdate","_setListeners","tip","enable","disable","toggleEnabled","_getDelegateConfig","click","_isWithActiveTrigger","_enter","_leave","_getTitle","_setContent","tipId","getElementById","getUID","position","opacity","visibility","pointerEvents","defaultContainer","Element","getContainer","ownerDocument","_updatePosition","parentNode","removeChild","clearTimeout","_removeListeners","removeEl","destroy","dataOptions","removeAttribute","call","String","inner","_getPlacement","assign","margin","applyPosition","actualPlacement","split","triggers","eventIn","eventOut","values","config","Popover","super","_getContent","titleEl","$1Helper","contentEl","titleText","_hasContent","popoverEventType","transitioningContainers","WeakSet","Tab","listElement","targetSelector","has","parentLi","previous","previousTab","activeChildren","child","activeLi","_triggerEventOn","add","_activate","delete","isPane","activePanes","activePane","allLiElements","tagName","li","a","tabLink","item","dropdownMenu","dropdownLi","handleClick","tab","Collapse","_triggerArray","toggleList","_getParent","_addAriaAndCollapsedClass","actives","activesData","elem","map","some","active","_setTriggerState","naturalHeight","animate","easing","finished","currentHeight","charAt","toString","collapsed","targets","parentSelector","CLOSE","CLOSED","Alert","_bindDismiss","close","alertElement","rootElement","_removeElement","_unbindDismiss","fadeOut","removeElement","$J","cancelable","handleDismiss","button","Button","triggerChangeEvent","addAriaPressed","input","type","checked","activeInput","dispatchEvent","bubbles","pressed","toggleClass","setState","state","val","loadingText","resetText","disabled","interval","pause","wrap","SLIDE","SLID","DIRECTION","Carousel","_items","_interval","_activeElement","_isPaused","_isSliding","_indicatorsElement","cycle","next","_slide","prev","_clearInterval","setInterval","to","_getItems","activeIndex","_getItemIndex","once","direction","_keydown","_addTouchEventListeners","touchStartX","touchDeltaX","touches","clientX","abs","_getItemByDirection","isNextDirection","isPrevDirection","lastItemIndex","itemIndex","activeElementIndex","nextElement","nextElementIndex","isCycling","Boolean","isNext","directionalClassName","orderClassName","_setActiveIndicator","all","transform","indicators","indicator","nextIndicator","clearInterval","extraData","slideIndex","carousel","parseInt","slideDir","autoInit","carousels","method","ACTIVATE","Scrollspy","_scrollElement","_selector","_offsets","_targets","_activeTarget","_observer","refresh","_process","disconnect","nav","navLinks","link","_getScrollHeight","targetBCR","_getOffsetTop","i","sort","b","_setupIntersectionObserver","_setupScrollListener","_scrollHandler","_clear","targetElements","rootMargin","IntersectionObserver","entries","intersectingEntries","entry","isIntersecting","targetId","reduce","boundingClientRect","id","root","threshold","observe","_getScrollTop","maxScroll","_getOffsetHeight","queries","sel","links","parentItem","prevSibling","previousElementSibling","activeLinks","offsetTop","CustomEvent","spyElements","Affix","_parseOffsetOption","_target","_getTarget","_affixed","_unpin","_pinnedOffset","_checkPosition","_setupListeners","checkPosition","checkPositionWithEventLoop","_getOffset","targetHeight","affix","affixType","eventPrefix","_getPinnedOffset","affixedEventPrefix","affixElements","Sandal","static","version","_components","Map","modal","tooltip","popover","collapse","alert","scrollspy","initComponent","componentName","ComponentClass","getComponents","component","clear","support","transition","transEndEventNames","WebkitTransition","MozTransition","OTransition","name","end","transitionEnd","fn","emulateTransitionEnd","called","old","option","_relatedTarget","$this","extend","Constructor","noConflict","action","slide","$target","remote","is","$btn"],"mappings":"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"}
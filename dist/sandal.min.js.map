{"version":3,"file":"sandal.min.js","sources":["../src/utils/dom.js","../src/utils/events.js","../src/utils/animation.js","../src/utils/position.js","../src/utils/index.js","../src/components/modal.js","../src/components/dropdown.js","../src/components/tooltip.js","../src/components/popover.js","../src/components/tab.js","../src/components/collapse.js","../src/components/alert.js","../src/components/button.js","../src/components/carousel.js","../src/components/scrollspy.js","../src/components/affix.js","../src/sandal.js"],"sourcesContent":["/**\n * Sandal - Modern DOM Utilities\n * Vanilla JavaScript helpers for DOM manipulation\n */\n\n/**\n * Query single element\n * @param {string|Element} selector - CSS selector or element\n * @param {Element|Document} context - Context to search within\n * @returns {Element|null}\n */\nexport function $(selector, context = document) {\n  if (selector instanceof Element) return selector;\n  if (typeof selector === 'string') {\n    return context.querySelector(selector);\n  }\n  return null;\n}\n\n/**\n * Query multiple elements\n * @param {string} selector - CSS selector\n * @param {Element|Document} context - Context to search within\n * @returns {Element[]}\n */\nexport function $$(selector, context = document) {\n  return Array.from(context.querySelectorAll(selector));\n}\n\n/**\n * Get element by data attribute\n * @param {string} name - Data attribute name (without 'data-' prefix)\n * @param {string} [value] - Optional value to match\n * @param {Element|Document} context - Context to search within\n * @returns {Element|null}\n */\nexport function getByData(name, value, context = document) {\n  const selector = value !== undefined \n    ? `[data-${name}=\"${value}\"]` \n    : `[data-${name}]`;\n  return context.querySelector(selector);\n}\n\n/**\n * Get all elements by data attribute\n * @param {string} name - Data attribute name (without 'data-' prefix)\n * @param {string} [value] - Optional value to match\n * @param {Element|Document} context - Context to search within\n * @returns {Element[]}\n */\nexport function getAllByData(name, value, context = document) {\n  const selector = value !== undefined \n    ? `[data-${name}=\"${value}\"]` \n    : `[data-${name}]`;\n  return Array.from(context.querySelectorAll(selector));\n}\n\n/**\n * Check if element matches selector\n * @param {Element} element\n * @param {string} selector\n * @returns {boolean}\n */\nexport function matches(element, selector) {\n  if (!element || !element.matches) return false;\n  return element.matches(selector);\n}\n\n/**\n * Find closest ancestor matching selector\n * @param {Element} element\n * @param {string} selector\n * @returns {Element|null}\n */\nexport function closest(element, selector) {\n  if (!element || !element.closest) return null;\n  return element.closest(selector);\n}\n\n/**\n * Get parent element\n * @param {Element} element\n * @returns {Element|null}\n */\nexport function parent(element) {\n  if (!element) return null;\n  return element.parentElement;\n}\n\n/**\n * Get siblings of element\n * @param {Element} element\n * @returns {Element[]}\n */\nexport function siblings(element) {\n  if (!element || !element.parentElement) return [];\n  return Array.from(element.parentElement.children).filter(child => child !== element);\n}\n\n/**\n * Get previous sibling element\n * @param {Element} element\n * @param {string} [selector] - Optional selector to match\n * @returns {Element|null}\n */\nexport function prev(element, selector) {\n  if (!element) return null;\n  let sibling = element.previousElementSibling;\n  if (!selector) return sibling;\n  while (sibling) {\n    if (sibling.matches && sibling.matches(selector)) return sibling;\n    sibling = sibling.previousElementSibling;\n  }\n  return null;\n}\n\n/**\n * Get next sibling element\n * @param {Element} element\n * @param {string} [selector] - Optional selector to match\n * @returns {Element|null}\n */\nexport function next(element, selector) {\n  if (!element) return null;\n  let sibling = element.nextElementSibling;\n  if (!selector) return sibling;\n  while (sibling) {\n    if (sibling.matches && sibling.matches(selector)) return sibling;\n    sibling = sibling.nextElementSibling;\n  }\n  return null;\n}\n\n/**\n * Get children of element\n * @param {Element} element\n * @param {string} [selector] - Optional selector to filter\n * @returns {Element[]}\n */\nexport function children(element, selector) {\n  if (!element || !element.children) return [];\n  const kids = Array.from(element.children);\n  if (!selector) return kids;\n  return kids.filter(child => child.matches && child.matches(selector));\n}\n\n/**\n * Find elements within context\n * @param {Element} element\n * @param {string} selector\n * @returns {Element[]}\n */\nexport function find(element, selector) {\n  if (!element || !element.querySelectorAll) return [];\n  return Array.from(element.querySelectorAll(selector));\n}\n\n/**\n * Add class(es) to element\n * @param {Element} element\n * @param {...string} classes\n */\nexport function addClass(element, ...classes) {\n  if (!element || !element.classList) return;\n  element.classList.add(...classes.flatMap(c => c.split(' ').filter(Boolean)));\n}\n\n/**\n * Remove class(es) from element\n * @param {Element} element\n * @param {...string} classes\n */\nexport function removeClass(element, ...classes) {\n  if (!element || !element.classList) return;\n  element.classList.remove(...classes.flatMap(c => c.split(' ').filter(Boolean)));\n}\n\n/**\n * Toggle class on element\n * @param {Element} element\n * @param {string} className\n * @param {boolean} [force] - Force add or remove\n * @returns {boolean}\n */\nexport function toggleClass(element, className, force) {\n  if (!element || !element.classList) return false;\n  return element.classList.toggle(className, force);\n}\n\n/**\n * Check if element has class\n * @param {Element} element\n * @param {string} className\n * @returns {boolean}\n */\nexport function hasClass(element, className) {\n  if (!element || !element.classList) return false;\n  return element.classList.contains(className);\n}\n\n/**\n * Set attribute(s) on element\n * @param {Element} element \n * @param {string|Object} name - Attribute name or object of attributes\n * @param {string} [value] - Attribute value\n */\nexport function setAttr(element, name, value) {\n  if (typeof name === 'object') {\n    Object.entries(name).forEach(([key, val]) => {\n      element.setAttribute(key, val);\n    });\n  } else {\n    element.setAttribute(name, value);\n  }\n}\n\n/**\n * Get attribute from element\n * @param {Element} element \n * @param {string} name \n * @returns {string|null}\n */\nexport function getAttr(element, name) {\n  return element.getAttribute(name);\n}\n\n/**\n * Remove attribute from element\n * @param {Element} element \n * @param {string} name \n */\nexport function removeAttr(element, name) {\n  element.removeAttribute(name);\n}\n\n/**\n * Get/set data attribute\n * @param {Element} element \n * @param {string} key \n * @param {*} [value] \n * @returns {*}\n */\nexport function data(element, key, value) {\n  if (value === undefined) {\n    const val = element.dataset[toCamelCase(key)];\n    // Try to parse JSON\n    if (val === 'true') return true;\n    if (val === 'false') return false;\n    if (val && !isNaN(Number(val))) return Number(val);\n    try {\n      return JSON.parse(val);\n    } catch {\n      return val;\n    }\n  }\n  element.dataset[toCamelCase(key)] = typeof value === 'object' ? JSON.stringify(value) : value;\n}\n\n/**\n * Convert kebab-case to camelCase\n * @param {string} str \n * @returns {string}\n */\nfunction toCamelCase(str) {\n  return str.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n/**\n * Set CSS property/properties\n * @param {Element} element \n * @param {string|Object} prop - Property name or object of properties\n * @param {string} [value] - Property value\n */\nexport function css(element, prop, value) {\n  if (typeof prop === 'object') {\n    Object.entries(prop).forEach(([key, val]) => {\n      element.style[key] = val;\n    });\n  } else if (value === undefined) {\n    return getComputedStyle(element).getPropertyValue(prop);\n  } else {\n    element.style[prop] = value;\n  }\n}\n\n/**\n * Get element dimensions\n * @param {Element} element \n * @returns {{width: number, height: number}}\n */\nexport function dimensions(element) {\n  return {\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n}\n\n/**\n * Get element position relative to document\n * @param {Element} element \n * @returns {{top: number, left: number}}\n */\nexport function offset(element) {\n  const rect = element.getBoundingClientRect();\n  return {\n    top: rect.top + window.scrollY,\n    left: rect.left + window.scrollX\n  };\n}\n\n/**\n * Get element position relative to offset parent\n * @param {Element} element \n * @returns {{top: number, left: number}}\n */\nexport function position(element) {\n  return {\n    top: element.offsetTop,\n    left: element.offsetLeft\n  };\n}\n\n/**\n * Check if element is visible\n * @param {Element} element \n * @returns {boolean}\n */\nexport function isVisible(element) {\n  return !!(element.offsetWidth || element.offsetHeight || element.getClientRects().length);\n}\n\n/**\n * Check if element is hidden\n * @param {Element} element \n * @returns {boolean}\n */\nexport function isHidden(element) {\n  return !isVisible(element);\n}\n\n/**\n * Show element\n * @param {Element} element \n */\nexport function show(element) {\n  element.style.display = '';\n  if (getComputedStyle(element).display === 'none') {\n    element.style.display = 'block';\n  }\n}\n\n/**\n * Hide element\n * @param {Element} element \n */\nexport function hide(element) {\n  element.style.display = 'none';\n}\n\n/**\n * Remove element from DOM\n * @param {Element} element \n */\nexport function remove(element) {\n  element.remove();\n}\n\n/**\n * Insert element before reference element\n * @param {Element} newElement \n * @param {Element} refElement \n */\nexport function insertBefore(newElement, refElement) {\n  refElement.parentNode.insertBefore(newElement, refElement);\n}\n\n/**\n * Insert element after reference element\n * @param {Element} newElement \n * @param {Element} refElement \n */\nexport function insertAfter(newElement, refElement) {\n  refElement.parentNode.insertBefore(newElement, refElement.nextSibling);\n}\n\n/**\n * Append element to parent\n * @param {Element} parent \n * @param {Element} child \n */\nexport function append(parent, child) {\n  parent.appendChild(child);\n}\n\n/**\n * Prepend element to parent\n * @param {Element} parent \n * @param {Element} child \n */\nexport function prepend(parent, child) {\n  parent.insertBefore(child, parent.firstChild);\n}\n\n/**\n * Create element from HTML string\n * @param {string} html \n * @returns {Element}\n */\nexport function createFromHTML(html) {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return template.content.firstChild;\n}\n\n/**\n * Get scroll position\n * @returns {{x: number, y: number}}\n */\nexport function getScroll() {\n  return {\n    x: window.scrollX || document.documentElement.scrollLeft,\n    y: window.scrollY || document.documentElement.scrollTop\n  };\n}\n\n/**\n * Get viewport dimensions\n * @returns {{width: number, height: number}}\n */\nexport function getViewport() {\n  return {\n    width: window.innerWidth || document.documentElement.clientWidth,\n    height: window.innerHeight || document.documentElement.clientHeight\n  };\n}\n\n/**\n * Check if element is in viewport\n * @param {Element} element \n * @param {number} [threshold=0] - Percentage threshold (0-1)\n * @returns {boolean}\n */\nexport function isInViewport(element, threshold = 0) {\n  const rect = element.getBoundingClientRect();\n  const viewport = getViewport();\n  \n  const visibleHeight = Math.min(rect.bottom, viewport.height) - Math.max(rect.top, 0);\n  const visibleWidth = Math.min(rect.right, viewport.width) - Math.max(rect.left, 0);\n  \n  const visibleArea = visibleHeight * visibleWidth;\n  const totalArea = rect.height * rect.width;\n  \n  return visibleArea / totalArea >= threshold;\n}\n\n/**\n * Focus element with optional prevention of scroll\n * @param {Element} element \n * @param {boolean} [preventScroll=false]\n */\nexport function focus(element, preventScroll = false) {\n  element.focus({ preventScroll });\n}\n\n/**\n * Get focusable elements within container\n * @param {Element} container \n * @returns {Element[]}\n */\nexport function getFocusable(container) {\n  const selector = [\n    'a[href]',\n    'button:not([disabled])',\n    'input:not([disabled])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])'\n  ].join(',');\n  \n  return Array.from(container.querySelectorAll(selector)).filter(isVisible);\n}\n\nexport default {\n  $,\n  $$,\n  getByData,\n  getAllByData,\n  matches,\n  closest,\n  parent,\n  siblings,\n  prev,\n  next,\n  children,\n  find,\n  addClass,\n  removeClass,\n  toggleClass,\n  hasClass,\n  setAttr,\n  getAttr,\n  removeAttr,\n  data,\n  css,\n  dimensions,\n  offset,\n  position,\n  isVisible,\n  isHidden,\n  show,\n  hide,\n  remove,\n  insertBefore,\n  insertAfter,\n  append,\n  prepend,\n  createFromHTML,\n  getScroll,\n  getViewport,\n  isInViewport,\n  focus,\n  getFocusable\n};","/**\n * Sandal - Modern Event Utilities\n * Vanilla JavaScript helpers for event handling\n */\n\n// WeakMap to store event handlers for cleanup\nconst handlerStorage = new WeakMap();\n\n/**\n * Add event listener\n * @param {Element|Window|Document} element \n * @param {string} eventType - Event type(s), space-separated for multiple\n * @param {Function|string} handler - Handler function or selector for delegation\n * @param {Function} [delegatedHandler] - Handler when using delegation\n * @param {Object} [options] - addEventListener options\n */\nexport function on(element, eventType, handler, delegatedHandler, options = {}) {\n  const events = eventType.split(' ').filter(Boolean);\n  \n  events.forEach(event => {\n    let actualHandler;\n    let selector = null;\n    \n    // Check if using event delegation\n    if (typeof handler === 'string') {\n      selector = handler;\n      actualHandler = (e) => {\n        const target = e.target.closest(selector);\n        if (target && element.contains(target)) {\n          delegatedHandler.call(target, e, target);\n        }\n      };\n    } else {\n      actualHandler = handler;\n    }\n    \n    element.addEventListener(event, actualHandler, options);\n    \n    // Store for potential removal\n    if (!handlerStorage.has(element)) {\n      handlerStorage.set(element, new Map());\n    }\n    const elementHandlers = handlerStorage.get(element);\n    const key = `${event}${selector || ''}`;\n    if (!elementHandlers.has(key)) {\n      elementHandlers.set(key, []);\n    }\n    elementHandlers.get(key).push({\n      original: handler,\n      actual: actualHandler,\n      selector,\n      options\n    });\n  });\n}\n\n/**\n * Remove event listener\n * @param {Element|Window|Document} element \n * @param {string} eventType - Event type(s), space-separated\n * @param {Function|string} [handler] - Original handler or selector\n */\nexport function off(element, eventType, handler) {\n  const events = eventType.split(' ').filter(Boolean);\n  const elementHandlers = handlerStorage.get(element);\n  \n  if (!elementHandlers) return;\n  \n  events.forEach(event => {\n    if (!handler) {\n      // Remove all handlers for this event\n      elementHandlers.forEach((handlers, key) => {\n        if (key.startsWith(event)) {\n          handlers.forEach(h => {\n            element.removeEventListener(event, h.actual, h.options);\n          });\n          elementHandlers.delete(key);\n        }\n      });\n    } else {\n      const selector = typeof handler === 'string' ? handler : '';\n      const key = `${event}${selector}`;\n      const handlers = elementHandlers.get(key);\n      \n      if (handlers) {\n        const idx = handlers.findIndex(h => \n          typeof handler === 'string' \n            ? h.selector === handler \n            : h.original === handler\n        );\n        if (idx !== -1) {\n          element.removeEventListener(event, handlers[idx].actual, handlers[idx].options);\n          handlers.splice(idx, 1);\n        }\n      }\n    }\n  });\n}\n\n/**\n * Add one-time event listener\n * @param {Element} element \n * @param {string} eventType \n * @param {Function} handler \n */\nexport function once(element, eventType, handler) {\n  on(element, eventType, handler, null, { once: true });\n}\n\n/**\n * Trigger custom event\n * @param {Element} element \n * @param {string} eventType \n * @param {Object} [detail] - Event detail data\n * @param {Object} [options] - Event options\n * @returns {boolean} - Whether event was not cancelled\n */\nexport function trigger(element, eventType, detail = {}, options = {}) {\n  const event = new CustomEvent(eventType, {\n    bubbles: options.bubbles !== false,\n    cancelable: options.cancelable !== false,\n    detail\n  });\n  return element.dispatchEvent(event);\n}\n\n/**\n * Delegate event handler to parent\n * @param {Element} parent \n * @param {string} eventType \n * @param {string} selector \n * @param {Function} handler \n * @param {Object} [options]\n */\nexport function delegate(parent, eventType, selector, handler, options = {}) {\n  on(parent, eventType, selector, handler, options);\n}\n\n/**\n * Wait for transition end\n * @param {Element} element \n * @param {number} [fallbackDuration=350] - Fallback duration in ms\n * @returns {Promise<void>}\n */\nexport function onTransitionEnd(element, fallbackDuration = 350) {\n  return new Promise(resolve => {\n    // Check if element has transitions\n    const styles = getComputedStyle(element);\n    const duration = parseFloat(styles.transitionDuration) * 1000;\n    \n    if (duration === 0) {\n      resolve();\n      return;\n    }\n    \n    let resolved = false;\n    \n    const handler = () => {\n      if (!resolved) {\n        resolved = true;\n        element.removeEventListener('transitionend', handler);\n        resolve();\n      }\n    };\n    \n    element.addEventListener('transitionend', handler);\n    \n    // Fallback timeout\n    setTimeout(handler, duration || fallbackDuration);\n  });\n}\n\n/**\n * Wait for animation end\n * @param {Element} element \n * @param {number} [fallbackDuration=350] - Fallback duration in ms\n * @returns {Promise<void>}\n */\nexport function onAnimationEnd(element, fallbackDuration = 350) {\n  return new Promise(resolve => {\n    const styles = getComputedStyle(element);\n    const duration = parseFloat(styles.animationDuration) * 1000;\n    \n    if (duration === 0) {\n      resolve();\n      return;\n    }\n    \n    let resolved = false;\n    \n    const handler = () => {\n      if (!resolved) {\n        resolved = true;\n        element.removeEventListener('animationend', handler);\n        resolve();\n      }\n    };\n    \n    element.addEventListener('animationend', handler);\n    setTimeout(handler, duration || fallbackDuration);\n  });\n}\n\n/**\n * Debounce function\n * @param {Function} func \n * @param {number} wait \n * @returns {Function}\n */\nexport function debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func.apply(this, args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n/**\n * Throttle function\n * @param {Function} func \n * @param {number} limit \n * @returns {Function}\n */\nexport function throttle(func, limit) {\n  let inThrottle;\n  return function executedFunction(...args) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  };\n}\n\n/**\n * Get event path (for older browsers)\n * @param {Event} event \n * @returns {Element[]}\n */\nexport function getEventPath(event) {\n  if (event.composedPath) {\n    return event.composedPath();\n  }\n  \n  const path = [];\n  let target = event.target;\n  while (target) {\n    path.push(target);\n    target = target.parentNode;\n  }\n  return path;\n}\n\n/**\n * Prevent default and stop propagation\n * @param {Event} event \n */\nexport function stop(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n/**\n * Check if key event matches key\n * @param {KeyboardEvent} event \n * @param {string} key - Key name (e.g., 'Escape', 'Enter', 'ArrowDown')\n * @returns {boolean}\n */\nexport function isKey(event, key) {\n  return event.key === key;\n}\n\n/**\n * Common key codes for keyboard navigation\n */\nexport const Keys = {\n  TAB: 'Tab',\n  ENTER: 'Enter',\n  ESCAPE: 'Escape',\n  SPACE: ' ',\n  END: 'End',\n  HOME: 'Home',\n  ARROW_LEFT: 'ArrowLeft',\n  ARROW_UP: 'ArrowUp',\n  ARROW_RIGHT: 'ArrowRight',\n  ARROW_DOWN: 'ArrowDown'\n};\n\n/**\n * Wait for DOM ready\n * @returns {Promise<void>}\n */\nexport function ready() {\n  return new Promise(resolve => {\n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n      resolve();\n    } else {\n      document.addEventListener('DOMContentLoaded', resolve, { once: true });\n    }\n  });\n}\n\nexport default {\n  on,\n  off,\n  once,\n  trigger,\n  delegate,\n  onTransitionEnd,\n  onAnimationEnd,\n  debounce,\n  throttle,\n  getEventPath,\n  stop,\n  isKey,\n  Keys,\n  ready\n};","/**\n * Sandal - Modern Animation Utilities\n * Web Animation API based helpers\n */\n\n/**\n * Default animation options\n */\nconst DEFAULT_OPTIONS = {\n  duration: 300,\n  easing: 'ease',\n  fill: 'forwards'\n};\n\n/**\n * Common easing functions\n */\nexport const Easing = {\n  linear: 'linear',\n  ease: 'ease',\n  easeIn: 'ease-in',\n  easeOut: 'ease-out',\n  easeInOut: 'ease-in-out',\n  // Cubic bezier equivalents\n  easeInCubic: 'cubic-bezier(0.32, 0, 0.67, 0)',\n  easeOutCubic: 'cubic-bezier(0.33, 1, 0.68, 1)',\n  easeInOutCubic: 'cubic-bezier(0.65, 0, 0.35, 1)',\n  // Bootstrap 3 default\n  bootstrap: 'cubic-bezier(0.25, 0.1, 0.25, 1)'\n};\n\n/**\n * Animate element using Web Animation API\n * @param {Element} element \n * @param {Keyframe[]} keyframes \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function animate(element, keyframes, options = {}) {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n  const animation = element.animate(keyframes, opts);\n  \n  return new Promise((resolve, reject) => {\n    animation.onfinish = () => resolve(animation);\n    animation.oncancel = () => reject(new Error('Animation cancelled'));\n  });\n}\n\n/**\n * Fade in element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function fadeIn(element, options = {}) {\n  element.style.display = '';\n  if (getComputedStyle(element).display === 'none') {\n    element.style.display = 'block';\n  }\n  \n  return animate(element, [\n    { opacity: 0 },\n    { opacity: 1 }\n  ], { duration: 150, ...options });\n}\n\n/**\n * Fade out element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function fadeOut(element, options = {}) {\n  await animate(element, [\n    { opacity: 1 },\n    { opacity: 0 }\n  ], { duration: 150, ...options });\n  \n  element.style.display = 'none';\n  element.style.opacity = '';\n}\n\n/**\n * Slide down (expand) element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function slideDown(element, options = {}) {\n  // Get natural height\n  element.style.display = '';\n  element.style.overflow = 'hidden';\n  element.style.height = 'auto';\n  const naturalHeight = element.offsetHeight;\n  element.style.height = '0px';\n  \n  // Force reflow\n  element.offsetHeight;\n  \n  const animation = await animate(element, [\n    { height: '0px', paddingTop: '0px', paddingBottom: '0px', marginTop: '0px', marginBottom: '0px' },\n    { height: `${naturalHeight}px`, paddingTop: '', paddingBottom: '', marginTop: '', marginBottom: '' }\n  ], { duration: 350, easing: Easing.easeOutCubic, ...options });\n  \n  // Clean up\n  element.style.height = '';\n  element.style.overflow = '';\n  \n  return animation;\n}\n\n/**\n * Slide up (collapse) element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function slideUp(element, options = {}) {\n  element.style.overflow = 'hidden';\n  const currentHeight = element.offsetHeight;\n  \n  const animation = await animate(element, [\n    { height: `${currentHeight}px`, paddingTop: '', paddingBottom: '', marginTop: '', marginBottom: '' },\n    { height: '0px', paddingTop: '0px', paddingBottom: '0px', marginTop: '0px', marginBottom: '0px' }\n  ], { duration: 350, easing: Easing.easeOutCubic, ...options });\n  \n  element.style.display = 'none';\n  element.style.height = '';\n  element.style.overflow = '';\n  \n  return animation;\n}\n\n/**\n * Slide toggle\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function slideToggle(element, options = {}) {\n  const isHidden = getComputedStyle(element).display === 'none';\n  return isHidden ? slideDown(element, options) : slideUp(element, options);\n}\n\n/**\n * Scale in element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function scaleIn(element, options = {}) {\n  element.style.display = '';\n  return animate(element, [\n    { transform: 'scale(0.8)', opacity: 0 },\n    { transform: 'scale(1)', opacity: 1 }\n  ], { duration: 200, easing: Easing.easeOutCubic, ...options });\n}\n\n/**\n * Scale out element\n * @param {Element} element \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function scaleOut(element, options = {}) {\n  await animate(element, [\n    { transform: 'scale(1)', opacity: 1 },\n    { transform: 'scale(0.8)', opacity: 0 }\n  ], { duration: 200, easing: Easing.easeInCubic, ...options });\n  \n  element.style.display = 'none';\n}\n\n/**\n * Slide in from direction\n * @param {Element} element \n * @param {'top'|'bottom'|'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function slideIn(element, direction = 'top', options = {}) {\n  element.style.display = '';\n  \n  const transforms = {\n    top: 'translateY(-100%)',\n    bottom: 'translateY(100%)',\n    left: 'translateX(-100%)',\n    right: 'translateX(100%)'\n  };\n  \n  return animate(element, [\n    { transform: transforms[direction], opacity: 0 },\n    { transform: 'translate(0, 0)', opacity: 1 }\n  ], { duration: 300, easing: Easing.easeOutCubic, ...options });\n}\n\n/**\n * Slide out to direction\n * @param {Element} element \n * @param {'top'|'bottom'|'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport async function slideOut(element, direction = 'top', options = {}) {\n  const transforms = {\n    top: 'translateY(-100%)',\n    bottom: 'translateY(100%)',\n    left: 'translateX(-100%)',\n    right: 'translateX(100%)'\n  };\n  \n  await animate(element, [\n    { transform: 'translate(0, 0)', opacity: 1 },\n    { transform: transforms[direction], opacity: 0 }\n  ], { duration: 300, easing: Easing.easeInCubic, ...options });\n  \n  element.style.display = 'none';\n}\n\n/**\n * Reflow element (force layout recalculation)\n * @param {Element} element \n */\nexport function reflow(element) {\n  return element.offsetHeight;\n}\n\n/**\n * Wait for next animation frame\n * @returns {Promise<number>}\n */\nexport function nextFrame() {\n  return new Promise(resolve => requestAnimationFrame(resolve));\n}\n\n/**\n * Wait for two animation frames (useful for transitions)\n * @returns {Promise<void>}\n */\nexport async function doubleRaf() {\n  await nextFrame();\n  await nextFrame();\n}\n\n/**\n * Check if prefers-reduced-motion is set\n * @returns {boolean}\n */\nexport function prefersReducedMotion() {\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n\n/**\n * Get animation duration respecting prefers-reduced-motion\n * @param {number} duration \n * @returns {number}\n */\nexport function getDuration(duration) {\n  return prefersReducedMotion() ? 0 : duration;\n}\n\n/**\n * Cancel all animations on element\n * @param {Element} element \n */\nexport function cancelAnimations(element) {\n  element.getAnimations().forEach(animation => animation.cancel());\n}\n\n/**\n * Pause all animations on element\n * @param {Element} element \n */\nexport function pauseAnimations(element) {\n  element.getAnimations().forEach(animation => animation.pause());\n}\n\n/**\n * Resume all animations on element\n * @param {Element} element \n */\nexport function playAnimations(element) {\n  element.getAnimations().forEach(animation => animation.play());\n}\n\n/**\n * Carousel-specific: slide animation\n * @param {Element} element \n * @param {'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function carouselSlide(element, direction, options = {}) {\n  const distance = direction === 'left' ? '-100%' : '100%';\n  return animate(element, [\n    { transform: 'translateX(0)' },\n    { transform: `translateX(${distance})` }\n  ], { duration: 600, easing: Easing.easeInOut, ...options });\n}\n\n/**\n * Carousel-specific: slide in next item\n * @param {Element} element \n * @param {'left'|'right'} direction \n * @param {Object} options \n * @returns {Promise<Animation>}\n */\nexport function carouselSlideIn(element, direction, options = {}) {\n  const startDistance = direction === 'left' ? '100%' : '-100%';\n  element.style.display = '';\n  return animate(element, [\n    { transform: `translateX(${startDistance})` },\n    { transform: 'translateX(0)' }\n  ], { duration: 600, easing: Easing.easeInOut, ...options });\n}\n\nexport default {\n  animate,\n  fadeIn,\n  fadeOut,\n  slideDown,\n  slideUp,\n  slideToggle,\n  scaleIn,\n  scaleOut,\n  slideIn,\n  slideOut,\n  reflow,\n  nextFrame,\n  doubleRaf,\n  prefersReducedMotion,\n  getDuration,\n  cancelAnimations,\n  pauseAnimations,\n  playAnimations,\n  carouselSlide,\n  carouselSlideIn,\n  Easing\n};","/**\n * Sandal - Modern Positioning Utilities\n * Uses Floating UI for tooltip/popover positioning\n * Falls back to basic positioning if Floating UI is not available\n */\n\n// Floating UI will be bundled or loaded externally\nlet floatingUI = null;\n\n/**\n * Initialize with Floating UI reference\n * @param {Object} floatingUIInstance \n */\nexport function setFloatingUI(instance) {\n  floatingUI = instance;\n}\n\n/**\n * Check if Floating UI is available\n * @returns {boolean}\n */\nexport function hasFloatingUI() {\n  return floatingUI !== null || (typeof window !== 'undefined' && window.FloatingUIDOM);\n}\n\n/**\n * Get Floating UI instance\n * @returns {Object|null}\n */\nfunction getFloatingUI() {\n  return floatingUI || (typeof window !== 'undefined' && window.FloatingUIDOM);\n}\n\n/**\n * Bootstrap placement to Floating UI placement mapping\n */\nconst PLACEMENT_MAP = {\n  top: 'top',\n  bottom: 'bottom',\n  left: 'left',\n  right: 'right',\n  auto: 'top' // Default for auto\n};\n\n/**\n * Calculate position using Floating UI\n * @param {Element} reference - Reference element (trigger)\n * @param {Element} floating - Floating element (tooltip/popover)\n * @param {Object} options \n * @returns {Promise<{x: number, y: number, placement: string}>}\n */\nexport async function computePosition(reference, floating, options = {}) {\n  const {\n    placement = 'top',\n    offset: offsetValue = 0,\n    flip = true,\n    shift = true,\n    arrow = null,\n    container = null\n  } = options;\n\n  const fui = getFloatingUI();\n  \n  if (fui && fui.computePosition) {\n    // Use Floating UI\n    const middleware = [];\n    \n    if (offsetValue) {\n      middleware.push(fui.offset(offsetValue));\n    }\n    \n    if (flip) {\n      middleware.push(fui.flip());\n    }\n    \n    if (shift) {\n      middleware.push(fui.shift({ padding: 5 }));\n    }\n    \n    if (arrow) {\n      middleware.push(fui.arrow({ element: arrow }));\n    }\n    \n    const result = await fui.computePosition(reference, floating, {\n      placement: PLACEMENT_MAP[placement] || placement,\n      middleware\n    });\n    \n    return {\n      x: result.x,\n      y: result.y,\n      placement: result.placement,\n      middlewareData: result.middlewareData\n    };\n  }\n  \n  // Fallback: basic positioning without Floating UI\n  return computePositionFallback(reference, floating, options);\n}\n\n/**\n * Fallback positioning without Floating UI\n * @param {Element} reference \n * @param {Element} floating \n * @param {Object} options \n * @returns {{x: number, y: number, placement: string}}\n */\nfunction computePositionFallback(reference, floating, options = {}) {\n  const { placement = 'top', offset: offsetValue = 10 } = options;\n  \n  const refRect = reference.getBoundingClientRect();\n  const floatRect = floating.getBoundingClientRect();\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  \n  let x, y;\n  let finalPlacement = placement;\n  \n  // Calculate base position\n  switch (placement) {\n    case 'top':\n      x = refRect.left + (refRect.width - floatRect.width) / 2;\n      y = refRect.top - floatRect.height - offsetValue;\n      break;\n    case 'bottom':\n      x = refRect.left + (refRect.width - floatRect.width) / 2;\n      y = refRect.bottom + offsetValue;\n      break;\n    case 'left':\n      x = refRect.left - floatRect.width - offsetValue;\n      y = refRect.top + (refRect.height - floatRect.height) / 2;\n      break;\n    case 'right':\n      x = refRect.right + offsetValue;\n      y = refRect.top + (refRect.height - floatRect.height) / 2;\n      break;\n    case 'auto':\n    default:\n      // Auto: try top first, then bottom\n      x = refRect.left + (refRect.width - floatRect.width) / 2;\n      y = refRect.top - floatRect.height - offsetValue;\n      \n      // Check if it would go above viewport\n      if (y < 0) {\n        y = refRect.bottom + offsetValue;\n        finalPlacement = 'bottom';\n      } else {\n        finalPlacement = 'top';\n      }\n      break;\n  }\n  \n  // Simple flip: check if it goes off-screen\n  const viewport = {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n  \n  // Flip vertical\n  if ((finalPlacement === 'top' && y < 0) || \n      (finalPlacement === 'bottom' && y + floatRect.height > viewport.height)) {\n    if (finalPlacement === 'top') {\n      y = refRect.bottom + offsetValue;\n      finalPlacement = 'bottom';\n    } else {\n      y = refRect.top - floatRect.height - offsetValue;\n      finalPlacement = 'top';\n    }\n  }\n  \n  // Flip horizontal\n  if ((finalPlacement === 'left' && x < 0) || \n      (finalPlacement === 'right' && x + floatRect.width > viewport.width)) {\n    if (finalPlacement === 'left') {\n      x = refRect.right + offsetValue;\n      finalPlacement = 'right';\n    } else {\n      x = refRect.left - floatRect.width - offsetValue;\n      finalPlacement = 'left';\n    }\n  }\n  \n  // Shift: keep within viewport bounds\n  x = Math.max(5, Math.min(x, viewport.width - floatRect.width - 5));\n  y = Math.max(5, Math.min(y, viewport.height - floatRect.height - 5));\n  \n  // Add scroll offset for absolute positioning\n  return {\n    x: x + scrollX,\n    y: y + scrollY,\n    placement: finalPlacement\n  };\n}\n\n/**\n * Apply position to floating element\n * @param {Element} floating \n * @param {{x: number, y: number}} position \n */\nexport function applyPosition(floating, { x, y }) {\n  Object.assign(floating.style, {\n    position: 'absolute',\n    left: `${x}px`,\n    top: `${y}px`,\n    margin: '0'\n  });\n}\n\n/**\n * Position arrow element\n * @param {Element} arrow \n * @param {Object} middlewareData \n * @param {string} placement \n */\nexport function positionArrow(arrow, middlewareData, placement) {\n  if (!arrow || !middlewareData?.arrow) return;\n  \n  const { x, y } = middlewareData.arrow;\n  \n  const staticSide = {\n    top: 'bottom',\n    right: 'left',\n    bottom: 'top',\n    left: 'right'\n  }[placement.split('-')[0]];\n  \n  Object.assign(arrow.style, {\n    left: x != null ? `${x}px` : '',\n    top: y != null ? `${y}px` : '',\n    right: '',\n    bottom: '',\n    [staticSide]: '-4px'\n  });\n}\n\n/**\n * Auto-update position on scroll/resize (using Floating UI autoUpdate)\n * @param {Element} reference \n * @param {Element} floating \n * @param {Function} update - Update callback\n * @returns {Function} - Cleanup function\n */\nexport function autoUpdate(reference, floating, update) {\n  const fui = getFloatingUI();\n  \n  if (fui && fui.autoUpdate) {\n    return fui.autoUpdate(reference, floating, update);\n  }\n  \n  // Fallback: basic scroll/resize listeners\n  const events = ['scroll', 'resize'];\n  const parents = getScrollParents(reference);\n  \n  const handleUpdate = () => requestAnimationFrame(update);\n  \n  events.forEach(event => {\n    window.addEventListener(event, handleUpdate, true);\n  });\n  \n  parents.forEach(parent => {\n    parent.addEventListener('scroll', handleUpdate, true);\n  });\n  \n  // Initial position\n  update();\n  \n  // Return cleanup function\n  return () => {\n    events.forEach(event => {\n      window.removeEventListener(event, handleUpdate, true);\n    });\n    parents.forEach(parent => {\n      parent.removeEventListener('scroll', handleUpdate, true);\n    });\n  };\n}\n\n/**\n * Get scroll parent elements\n * @param {Element} element \n * @returns {Element[]}\n */\nfunction getScrollParents(element) {\n  const parents = [];\n  let current = element.parentElement;\n  \n  while (current) {\n    const style = getComputedStyle(current);\n    const overflow = style.overflow + style.overflowX + style.overflowY;\n    \n    if (/auto|scroll|overlay/.test(overflow)) {\n      parents.push(current);\n    }\n    \n    current = current.parentElement;\n  }\n  \n  return parents;\n}\n\n/**\n * Get container element for positioning\n * @param {string|Element|boolean} container \n * @param {Element} defaultContainer \n * @returns {Element}\n */\nexport function getContainer(container, defaultContainer = document.body) {\n  if (container === false) return defaultContainer;\n  if (container === 'body') return document.body;\n  if (typeof container === 'string') return document.querySelector(container) || defaultContainer;\n  if (container instanceof Element) return container;\n  return defaultContainer;\n}\n\n/**\n * Get viewport boundaries\n * @returns {{top: number, right: number, bottom: number, left: number, width: number, height: number}}\n */\nexport function getViewportRect() {\n  return {\n    top: 0,\n    right: window.innerWidth,\n    bottom: window.innerHeight,\n    left: 0,\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n}\n\n/**\n * Check if element is within viewport\n * @param {Element} element \n * @returns {boolean}\n */\nexport function isInViewport(element) {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= window.innerHeight &&\n    rect.right <= window.innerWidth\n  );\n}\n\nexport default {\n  setFloatingUI,\n  hasFloatingUI,\n  computePosition,\n  applyPosition,\n  positionArrow,\n  autoUpdate,\n  getContainer,\n  getViewportRect,\n  isInViewport\n};","/**\n * Sandal - Utility Modules\n * Modern vanilla JavaScript utilities\n */\n\nexport * from './dom.js';\nexport * from './events.js';\nexport * from './animation.js';\nexport * from './position.js';\n\n// Default exports as namespaces\nexport { default as DOM } from './dom.js';\nexport { default as Events } from './events.js';\nexport { default as Animation } from './animation.js';\nexport { default as Position } from './position.js';\n\n/**\n * Instance storage using WeakMap (modern alternative to $.data)\n */\nconst instanceStorage = new WeakMap();\n\n/**\n * Store component instance on element\n * @param {Element} element \n * @param {string} key - Component key (e.g., 'bs.modal')\n * @param {Object} instance \n */\nexport function setInstance(element, key, instance) {\n  if (!instanceStorage.has(element)) {\n    instanceStorage.set(element, new Map());\n  }\n  instanceStorage.get(element).set(key, instance);\n}\n\n/**\n * Get component instance from element\n * @param {Element} element \n * @param {string} key \n * @returns {Object|null}\n */\nexport function getInstance(element, key) {\n  if (!instanceStorage.has(element)) return null;\n  return instanceStorage.get(element).get(key) || null;\n}\n\n/**\n * Remove component instance from element\n * @param {Element} element \n * @param {string} key \n */\nexport function removeInstance(element, key) {\n  if (!instanceStorage.has(element)) return;\n  instanceStorage.get(element).delete(key);\n}\n\n/**\n * Get or create component instance\n * @param {Element} element \n * @param {string} key \n * @param {Function} Constructor \n * @param {Object} options \n * @returns {Object}\n */\nexport function getOrCreateInstance(element, key, Constructor, options) {\n  let instance = getInstance(element, key);\n  if (!instance) {\n    instance = new Constructor(element, options);\n    setInstance(element, key, instance);\n  }\n  return instance;\n}\n\n/**\n * Parse options from data attributes\n * @param {Element} element \n * @param {Object} defaults - Default options\n * @param {string} prefix - Data attribute prefix (e.g., 'bs' for data-bs-*)\n * @returns {Object}\n */\nexport function parseDataOptions(element, defaults = {}, prefix = '') {\n  const options = { ...defaults };\n  const dataPrefix = prefix ? `${prefix}-` : '';\n  \n  Object.keys(defaults).forEach(key => {\n    // Convert camelCase to kebab-case for data attribute lookup\n    const dataKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n    const attrName = `data-${dataPrefix}${dataKey}`;\n    const value = element.getAttribute(attrName);\n    \n    if (value !== null) {\n      // Type coercion\n      if (value === 'true') {\n        options[key] = true;\n      } else if (value === 'false') {\n        options[key] = false;\n      } else if (!isNaN(Number(value)) && value !== '') {\n        options[key] = Number(value);\n      } else {\n        try {\n          options[key] = JSON.parse(value);\n        } catch {\n          options[key] = value;\n        }\n      }\n    }\n  });\n  \n  return options;\n}\n\n/**\n * Execute callback when element is added to DOM\n * @param {Element} element \n * @param {Function} callback \n */\nexport function onElementInserted(element, callback) {\n  if (document.body.contains(element)) {\n    callback();\n    return;\n  }\n  \n  const observer = new MutationObserver((mutations, obs) => {\n    if (document.body.contains(element)) {\n      obs.disconnect();\n      callback();\n    }\n  });\n  \n  observer.observe(document.body, {\n    childList: true,\n    subtree: true\n  });\n}\n\n/**\n * Execute callback when element is removed from DOM\n * @param {Element} element \n * @param {Function} callback \n * @returns {Function} - Disconnect function\n */\nexport function onElementRemoved(element, callback) {\n  const observer = new MutationObserver((mutations) => {\n    for (const mutation of mutations) {\n      for (const removedNode of mutation.removedNodes) {\n        if (removedNode === element || removedNode.contains(element)) {\n          observer.disconnect();\n          callback();\n          return;\n        }\n      }\n    }\n  });\n  \n  observer.observe(document.body, {\n    childList: true,\n    subtree: true\n  });\n  \n  return () => observer.disconnect();\n}\n\n/**\n * Sanitize HTML string (basic XSS prevention)\n * @param {string} html \n * @returns {string}\n */\nexport function sanitizeHTML(html) {\n  const div = document.createElement('div');\n  div.textContent = html;\n  return div.innerHTML;\n}\n\n/**\n * Get unique ID\n * @param {string} [prefix='sandal'] \n * @returns {string}\n */\nlet idCounter = 0;\nexport function getUID(prefix = 'sandal') {\n  do {\n    idCounter++;\n  } while (document.getElementById(`${prefix}${idCounter}`));\n  \n  return `${prefix}${idCounter}`;\n}\n\n/**\n * Check if element is disabled\n * @param {Element} element \n * @returns {boolean}\n */\nexport function isDisabled(element) {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) return true;\n  \n  if (element.classList.contains('disabled')) return true;\n  if (element.hasAttribute('disabled')) return true;\n  if (element.getAttribute('aria-disabled') === 'true') return true;\n  \n  return false;\n}\n\n/**\n * Execute callback or return selector element\n * @param {string|Element|Function} value \n * @param {Element} [context] \n * @returns {Element|null}\n */\nexport function getElement(value, context = document) {\n  if (value instanceof Element) return value;\n  if (typeof value === 'string') {\n    return context.querySelector(value);\n  }\n  return null;\n}\n\n/**\n * Trap focus within element\n * @param {Element} element \n * @returns {Function} - Cleanup function\n */\nexport function trapFocus(element) {\n  const focusable = getFocusable(element);\n  if (focusable.length === 0) return () => {};\n  \n  const firstFocusable = focusable[0];\n  const lastFocusable = focusable[focusable.length - 1];\n  \n  const handleKeydown = (e) => {\n    if (e.key !== 'Tab') return;\n    \n    if (e.shiftKey) {\n      if (document.activeElement === firstFocusable) {\n        e.preventDefault();\n        lastFocusable.focus();\n      }\n    } else {\n      if (document.activeElement === lastFocusable) {\n        e.preventDefault();\n        firstFocusable.focus();\n      }\n    }\n  };\n  \n  element.addEventListener('keydown', handleKeydown);\n  return () => element.removeEventListener('keydown', handleKeydown);\n}\n\n/**\n * Get focusable elements within container\n * @param {Element} container \n * @returns {Element[]}\n */\nfunction getFocusable(container) {\n  const selector = [\n    'a[href]',\n    'button:not([disabled])',\n    'input:not([disabled]):not([type=\"hidden\"])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])'\n  ].join(',');\n  \n  return Array.from(container.querySelectorAll(selector)).filter(el => {\n    return el.offsetWidth > 0 || el.offsetHeight > 0;\n  });\n}\n\n/**\n * Merge configuration objects deeply\n * @param {Object} target \n * @param {...Object} sources \n * @returns {Object}\n */\nexport function mergeConfig(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n  \n  if (isPlainObject(target) && isPlainObject(source)) {\n    for (const key in source) {\n      if (isPlainObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeConfig(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n  \n  return mergeConfig(target, ...sources);\n}\n\n/**\n * Check if value is plain object\n * @param {*} value \n * @returns {boolean}\n */\nfunction isPlainObject(value) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}","/**\n * Sandal Modal Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Web Animation API for smooth animations\n */\n\nimport {\n  $, $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, removeAttr, css,\n  on, off, trigger,\n  fadeIn, fadeOut, reflow,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, getUID, trapFocus\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'modal';\nconst DATA_KEY = 'bs.modal';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  backdrop: true,\n  keyboard: true,\n  show: true,\n  focus: true\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  LOADED: `loaded${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n  BACKDROP: 'modal-backdrop',\n  OPEN: 'modal-open',\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show'\n};\n\nconst SELECTORS = {\n  DIALOG: '.modal-dialog',\n  MODAL_BODY: '.modal-body',\n  DATA_TOGGLE: '[data-toggle=\"modal\"]',\n  DATA_DISMISS: '.presidecms [data-dismiss=\"modal\"]',\n  FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom'\n};\n\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_DURATION = 150;\n\n/**\n * Modal Class\n * Provides modal dialog functionality\n */\nclass Modal {\n  /**\n   * Create a Modal instance\n   * @param {Element} element - The modal element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    this._dialog = $(SELECTORS.DIALOG, this._element);\n    this._backdrop = null;\n    this._isShown = false;\n    this._isTransitioning = false;\n    this._scrollbarWidth = 0;\n    this._focusTrap = null;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Bind events\n    this._bindEvents();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get modal element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Get options\n   * @returns {Object}\n   */\n  get options() {\n    return this._options;\n  }\n  \n  /**\n   * Toggle modal\n   * @param {Element} [relatedTarget] - Related target element\n   */\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget);\n  }\n  \n  /**\n   * Show modal\n   * @param {Element} [relatedTarget] - Related target element\n   */\n  async show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) return;\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW, { relatedTarget });\n    if (showEvent.defaultPrevented) return;\n    \n    this._isShown = true;\n    this._isTransitioning = true;\n    \n    // Check scrollbar and add padding\n    this._checkScrollbar();\n    this._setScrollbar();\n    \n    // Add modal-open class to body\n    addClass(document.body, CLASSES.OPEN);\n    \n    // Set up modal\n    this._escape();\n    this._resize();\n    \n    // Dismiss button handler\n    on(this._element, 'click', SELECTORS.DATA_DISMISS, () => this.hide());\n    \n    // Backdrop click handler\n    on(this._dialog, 'mousedown', () => {\n      on(this._element, 'mouseup', (e) => {\n        off(this._element, 'mouseup');\n        if (e.target === this._element) {\n          this._ignoreBackdropClick = true;\n        }\n      }, { once: true });\n    });\n    \n    // Show backdrop then modal\n    await this._showBackdrop();\n    await this._showModal();\n    \n    this._isTransitioning = false;\n    \n    // Focus management\n    if (this._options.focus) {\n      this._element.focus();\n      this._focusTrap = trapFocus(this._element);\n    }\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN, { relatedTarget });\n  }\n  \n  /**\n   * Hide modal\n   */\n  async hide() {\n    if (!this._isShown || this._isTransitioning) return;\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE);\n    if (hideEvent.defaultPrevented) return;\n    \n    this._isShown = false;\n    this._isTransitioning = true;\n    \n    // Clean up focus trap\n    if (this._focusTrap) {\n      this._focusTrap();\n      this._focusTrap = null;\n    }\n    \n    // Remove escape handler\n    off(document, 'keydown', this._escapeHandler);\n    \n    // Remove resize handler\n    off(window, 'resize', this._resizeHandler);\n    \n    // Hide modal then backdrop\n    removeClass(this._element, CLASSES.IN);\n    \n    if (hasClass(this._element, CLASSES.FADE)) {\n      await this._waitForTransition(this._element, TRANSITION_DURATION);\n    }\n    \n    await this._hideModal();\n    \n    this._isTransitioning = false;\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN);\n  }\n  \n  /**\n   * Handle update (adjust for scrollbar)\n   */\n  handleUpdate() {\n    this._adjustDialog();\n  }\n  \n  /**\n   * Destroy the modal instance\n   */\n  dispose() {\n    // Remove event listeners\n    off(this._element, 'click');\n    off(this._dialog, 'mousedown');\n    off(document, 'keydown', this._escapeHandler);\n    off(window, 'resize', this._resizeHandler);\n    \n    // Remove focus trap\n    if (this._focusTrap) {\n      this._focusTrap();\n    }\n    \n    // Remove backdrop\n    if (this._backdrop) {\n      this._backdrop.remove();\n    }\n    \n    // Clean up instance\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._dialog = null;\n    this._backdrop = null;\n    this._options = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind modal events\n   * @private\n   */\n  _bindEvents() {\n    on(this._element, 'click', (e) => {\n      if (e.target !== this._element) return;\n      if (this._ignoreBackdropClick) {\n        this._ignoreBackdropClick = false;\n        return;\n      }\n      if (this._options.backdrop === true) {\n        this.hide();\n      }\n    });\n  }\n  \n  /**\n   * Show backdrop\n   * @returns {Promise}\n   * @private\n   */\n  async _showBackdrop() {\n    if (this._options.backdrop) {\n      this._backdrop = document.createElement('div');\n      this._backdrop.className = CLASSES.BACKDROP;\n      \n      if (hasClass(this._element, CLASSES.FADE)) {\n        addClass(this._backdrop, CLASSES.FADE);\n      }\n      \n      document.body.appendChild(this._backdrop);\n      \n      // Click handler for backdrop\n      on(this._backdrop, 'click', () => {\n        if (this._options.backdrop !== 'static') {\n          this.hide();\n        }\n      });\n      \n      // Animate in\n      reflow(this._backdrop);\n      addClass(this._backdrop, CLASSES.IN);\n      \n      if (hasClass(this._backdrop, CLASSES.FADE)) {\n        await this._waitForTransition(this._backdrop, BACKDROP_DURATION);\n      }\n    }\n  }\n  \n  /**\n   * Show modal element\n   * @returns {Promise}\n   * @private\n   */\n  async _showModal() {\n    this._element.style.display = 'block';\n    this._element.removeAttribute('aria-hidden');\n    setAttr(this._element, 'aria-modal', 'true');\n    setAttr(this._element, 'role', 'dialog');\n    this._element.scrollTop = 0;\n    \n    if (this._dialog) {\n      this._dialog.scrollTop = 0;\n    }\n    \n    this._adjustDialog();\n    \n    reflow(this._element);\n    addClass(this._element, CLASSES.IN);\n    \n    if (hasClass(this._element, CLASSES.FADE)) {\n      await this._waitForTransition(this._dialog || this._element, TRANSITION_DURATION);\n    }\n  }\n  \n  /**\n   * Hide modal element\n   * @returns {Promise}\n   * @private\n   */\n  async _hideModal() {\n    this._element.style.display = 'none';\n    setAttr(this._element, 'aria-hidden', 'true');\n    removeAttr(this._element, 'aria-modal');\n    removeAttr(this._element, 'role');\n    \n    // Reset scrollbar\n    this._resetScrollbar();\n    removeClass(document.body, CLASSES.OPEN);\n    \n    // Remove backdrop\n    if (this._backdrop) {\n      removeClass(this._backdrop, CLASSES.IN);\n      \n      if (hasClass(this._backdrop, CLASSES.FADE)) {\n        await this._waitForTransition(this._backdrop, BACKDROP_DURATION);\n      }\n      \n      this._backdrop.remove();\n      this._backdrop = null;\n    }\n  }\n  \n  /**\n   * Set up escape key handler\n   * @private\n   */\n  _escape() {\n    if (this._options.keyboard) {\n      this._escapeHandler = (e) => {\n        if (e.key === 'Escape' && this._isShown) {\n          e.preventDefault();\n          this.hide();\n        }\n      };\n      on(document, 'keydown', this._escapeHandler);\n    }\n  }\n  \n  /**\n   * Set up resize handler\n   * @private\n   */\n  _resize() {\n    this._resizeHandler = () => {\n      if (this._isShown) {\n        this._adjustDialog();\n      }\n    };\n    on(window, 'resize', this._resizeHandler);\n  }\n  \n  /**\n   * Adjust dialog for scrollbar\n   * @private\n   */\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n    \n    if (!this._isBodyOverflowing && isModalOverflowing) {\n      this._element.style.paddingLeft = `${this._scrollbarWidth}px`;\n    }\n    \n    if (this._isBodyOverflowing && !isModalOverflowing) {\n      this._element.style.paddingRight = `${this._scrollbarWidth}px`;\n    }\n  }\n  \n  /**\n   * Check scrollbar width\n   * @private\n   */\n  _checkScrollbar() {\n    const rect = document.body.getBoundingClientRect();\n    this._isBodyOverflowing = rect.left + rect.right < window.innerWidth;\n    this._scrollbarWidth = this._getScrollbarWidth();\n  }\n  \n  /**\n   * Get scrollbar width\n   * @returns {number}\n   * @private\n   */\n  _getScrollbarWidth() {\n    const scrollDiv = document.createElement('div');\n    scrollDiv.className = CLASSES.SCROLLBAR_MEASURER;\n    scrollDiv.style.cssText = 'position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll;';\n    document.body.appendChild(scrollDiv);\n    const scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;\n    scrollDiv.remove();\n    return scrollbarWidth;\n  }\n  \n  /**\n   * Set scrollbar padding on body\n   * @private\n   */\n  _setScrollbar() {\n    if (this._isBodyOverflowing) {\n      // Save original padding\n      this._originalPadding = document.body.style.paddingRight;\n      const computedPadding = parseFloat(getComputedStyle(document.body).paddingRight);\n      document.body.style.paddingRight = `${computedPadding + this._scrollbarWidth}px`;\n      \n      // Fixed elements\n      const fixedContent = $$(SELECTORS.FIXED_CONTENT);\n      for (const element of fixedContent) {\n        const actualPadding = element.style.paddingRight;\n        const calculatedPadding = parseFloat(getComputedStyle(element).paddingRight);\n        element.dataset.paddingRight = actualPadding;\n        element.style.paddingRight = `${calculatedPadding + this._scrollbarWidth}px`;\n      }\n    }\n  }\n  \n  /**\n   * Reset scrollbar padding\n   * @private\n   */\n  _resetScrollbar() {\n    document.body.style.paddingRight = this._originalPadding || '';\n    \n    const fixedContent = $$(SELECTORS.FIXED_CONTENT);\n    for (const element of fixedContent) {\n      const padding = element.dataset.paddingRight;\n      if (padding !== undefined) {\n        element.style.paddingRight = padding;\n        delete element.dataset.paddingRight;\n      }\n    }\n  }\n  \n  /**\n   * Wait for transition to complete\n   * @param {Element} element \n   * @param {number} duration \n   * @returns {Promise}\n   * @private\n   */\n  _waitForTransition(element, duration) {\n    return new Promise(resolve => {\n      const handler = () => {\n        element.removeEventListener('transitionend', handler);\n        resolve();\n      };\n      element.addEventListener('transitionend', handler);\n      setTimeout(resolve, duration + 50); // Fallback\n    });\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType\n   * @param {Object} detail\n   * @returns {Event}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    // Use jQuery/JQNext trigger if available - this ensures proper namespace handling\n    // and compatibility with jQuery event handlers (like those in preside.iframe.modal.js)\n    const $ = window.jQuery || window.presideJQuery;\n    \n    if ($ && $.fn && $.fn.trigger) {\n      // Use jQuery's trigger which properly handles namespaced events\n      const event = $.Event(eventType, detail);\n      $(this._element).trigger(event);\n      return event;\n    }\n    \n    // Fallback to native CustomEvent if jQuery is not available\n    // Parse event type and namespace (e.g., \"hide.bs.modal\" -> type: \"hide\", namespace: \"bs.modal\")\n    const parts = eventType.split('.');\n    const baseType = parts[0];\n    \n    const event = new CustomEvent(baseType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SHOW || eventType === EVENTS.HIDE,\n      detail\n    });\n    \n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Modal instance from element\n   * @param {Element} element \n   * @returns {Modal|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Modal instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Modal}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Modal.getInstance(element) || new Modal(element, options);\n  }\n  \n  /**\n   * Handle click on modal toggle\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    const trigger = event.currentTarget || event.target.closest(SELECTORS.DATA_TOGGLE);\n    if (!trigger) return;\n    \n    // Get target\n    let target = getAttr(trigger, 'data-target');\n    if (!target) {\n      const href = getAttr(trigger, 'href');\n      if (href) {\n        target = href.replace(/.*(?=#[^\\s]+$)/, ''); // Strip for IE7\n      }\n    }\n    \n    const modalElement = $(target);\n    if (!modalElement) return;\n    \n    event.preventDefault();\n    \n    // Get options from trigger\n    const options = {};\n    if (trigger.hasAttribute('data-backdrop')) {\n      const backdrop = getAttr(trigger, 'data-backdrop');\n      options.backdrop = backdrop === 'static' ? 'static' : backdrop !== 'false';\n    }\n    if (trigger.hasAttribute('data-keyboard')) {\n      options.keyboard = getAttr(trigger, 'data-keyboard') !== 'false';\n    }\n    \n    const instance = Modal.getOrCreateInstance(modalElement, options);\n    instance.toggle(trigger);\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Modal;\nexport { Modal, EVENTS as ModalEvents, CLASSES as ModalClasses, SELECTORS as ModalSelectors };","/**\n * Sandal Dropdown Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport {\n  $, $$, closest, parent, hasClass, addClass, removeClass, toggleClass,\n  getAttr, setAttr,\n  on, off, trigger,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, isDisabled\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'dropdown';\nconst DATA_KEY = 'bs.dropdown';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  offset: 0,\n  flip: true,\n  boundary: 'scrollParent',\n  reference: 'toggle',\n  display: 'dynamic'\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  DISABLED: 'disabled',\n  SHOW: 'show',\n  OPEN: 'open',\n  DROPUP: 'dropup',\n  DROPDOWN_MENU: 'dropdown-menu',\n  DROPDOWN_MENU_RIGHT: 'dropdown-menu-right'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle=\"dropdown\"]',\n  DROPDOWN: '.dropdown, .dropup, .btn-group',\n  DROPDOWN_MENU: '.dropdown-menu',\n  VISIBLE_ITEMS: '.dropdown-menu li:not(.divider):not(.disabled) a',\n  FORM_CHILD: '.dropdown form'\n};\n\nconst KEYS = {\n  TAB: 'Tab',\n  ESCAPE: 'Escape',\n  SPACE: ' ',\n  ARROW_UP: 'ArrowUp',\n  ARROW_DOWN: 'ArrowDown'\n};\n\n/**\n * Dropdown Class\n * Provides dropdown menu functionality\n */\nclass Dropdown {\n  /**\n   * Create a Dropdown instance\n   * @param {Element} element - The dropdown toggle element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Get parent dropdown element\n    this._parent = this._getParentElement();\n    \n    // Get menu element\n    this._menu = this._getMenuElement();\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Bind events\n    this._bindEvents();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get toggle element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Toggle dropdown\n   */\n  toggle() {\n    if (isDisabled(this._element)) return;\n    \n    const isOpen = this._isShown();\n    \n    // Close other dropdowns\n    Dropdown.closeAll();\n    \n    if (isOpen) return;\n    \n    this.show();\n  }\n  \n  /**\n   * Show dropdown\n   */\n  show() {\n    if (isDisabled(this._element) || this._isShown()) return;\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW, { relatedTarget: this._element });\n    if (showEvent.defaultPrevented) return;\n    \n    // Add open class to parent\n    addClass(this._parent, CLASSES.OPEN);\n    \n    // Update ARIA\n    setAttr(this._element, 'aria-expanded', 'true');\n    \n    // Add document click listener to close\n    this._addDocumentListener();\n    \n    // Focus first item or toggle\n    this._element.focus();\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN, { relatedTarget: this._element });\n  }\n  \n  /**\n   * Hide dropdown\n   */\n  hide() {\n    if (!this._isShown()) return;\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE, { relatedTarget: this._element });\n    if (hideEvent.defaultPrevented) return;\n    \n    // Remove open class\n    removeClass(this._parent, CLASSES.OPEN);\n    \n    // Update ARIA\n    setAttr(this._element, 'aria-expanded', 'false');\n    \n    // Remove document listener\n    this._removeDocumentListener();\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN, { relatedTarget: this._element });\n  }\n  \n  /**\n   * Update dropdown position (noop for Bootstrap 3 compat)\n   */\n  update() {\n    // In Bootstrap 3, position is handled by CSS\n    // This method exists for API compatibility\n  }\n  \n  /**\n   * Destroy the dropdown instance\n   */\n  dispose() {\n    this._removeDocumentListener();\n    off(this._element, 'click');\n    off(this._element, 'keydown');\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._menu = null;\n    this._parent = null;\n    this._options = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind toggle events (keyboard only - clicks handled by data-api)\n   * @private\n   */\n  _bindEvents() {\n    // Note: Click events are handled by the data-api in sandal.js\n    // We only bind keyboard events here to avoid double-handling\n    on(this._element, 'keydown', (e) => {\n      this._handleKeydown(e);\n    });\n  }\n  \n  /**\n   * Add document click listener\n   * @private\n   */\n  _addDocumentListener() {\n    this._documentClickHandler = (e) => {\n      // Don't close if clicking inside dropdown\n      if (this._parent.contains(e.target)) {\n        // But do close if clicking a menu item (unless it's in a form)\n        const isMenuItem = closest(e.target, SELECTORS.VISIBLE_ITEMS);\n        const isInForm = closest(e.target, SELECTORS.FORM_CHILD);\n        if (!isMenuItem || isInForm) return;\n      }\n      this.hide();\n    };\n    \n    this._documentKeyHandler = (e) => {\n      if (e.key === KEYS.ESCAPE) {\n        this.hide();\n        this._element.focus();\n      }\n    };\n    \n    // Delay adding listener to avoid immediate close\n    setTimeout(() => {\n      document.addEventListener('click', this._documentClickHandler, true);\n      document.addEventListener('keydown', this._documentKeyHandler);\n    }, 0);\n  }\n  \n  /**\n   * Remove document listeners\n   * @private\n   */\n  _removeDocumentListener() {\n    if (this._documentClickHandler) {\n      document.removeEventListener('click', this._documentClickHandler, true);\n      this._documentClickHandler = null;\n    }\n    if (this._documentKeyHandler) {\n      document.removeEventListener('keydown', this._documentKeyHandler);\n      this._documentKeyHandler = null;\n    }\n  }\n  \n  /**\n   * Handle keyboard navigation\n   * @param {KeyboardEvent} event \n   * @private\n   */\n  _handleKeydown(event) {\n    // Only handle specific keys\n    if (![KEYS.ARROW_UP, KEYS.ARROW_DOWN, KEYS.ESCAPE, KEYS.SPACE].includes(event.key)) {\n      return;\n    }\n    \n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.key === KEYS.ESCAPE) {\n      this.hide();\n      this._element.focus();\n      return;\n    }\n    \n    if (event.key === KEYS.SPACE) {\n      this.toggle();\n      return;\n    }\n    \n    // Arrow navigation\n    if (!this._isShown()) {\n      this.show();\n      return;\n    }\n    \n    const items = $$(SELECTORS.VISIBLE_ITEMS, this._menu);\n    if (items.length === 0) return;\n    \n    let index = items.indexOf(document.activeElement);\n    \n    if (event.key === KEYS.ARROW_UP && index > 0) {\n      index--;\n    }\n    \n    if (event.key === KEYS.ARROW_DOWN && index < items.length - 1) {\n      index++;\n    }\n    \n    if (index < 0) index = 0;\n    \n    items[index].focus();\n  }\n  \n  /**\n   * Check if dropdown is shown\n   * @returns {boolean}\n   * @private\n   */\n  _isShown() {\n    return hasClass(this._parent, CLASSES.OPEN);\n  }\n  \n  /**\n   * Get parent dropdown element\n   * @returns {Element}\n   * @private\n   */\n  _getParentElement() {\n    // Preside Bootstrap just uses direct parent (like Bootstrap 3)\n    // Don't look for specific classes - just use the direct parent\n    const selector = getAttr(this._element, 'data-target');\n    if (selector) {\n      return $(selector);\n    }\n    \n    return this._element.parentElement;\n  }\n  \n  /**\n   * Get menu element\n   * @returns {Element}\n   * @private\n   */\n  _getMenuElement() {\n    if (this._parent) {\n      return $(SELECTORS.DROPDOWN_MENU, this._parent);\n    }\n    return null;\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @param {Object} detail \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SHOW || eventType === EVENTS.HIDE,\n      detail\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Dropdown instance from element\n   * @param {Element} element \n   * @returns {Dropdown|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Dropdown instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Dropdown}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Dropdown.getInstance(element) || new Dropdown(element, options);\n  }\n  \n  /**\n   * Close all open dropdowns\n   */\n  static closeAll() {\n    const openDropdowns = $$(`.${CLASSES.OPEN}`);\n    for (const dropdown of openDropdowns) {\n      const toggle = $(SELECTORS.DATA_TOGGLE, dropdown);\n      if (toggle) {\n        const instance = Dropdown.getInstance(toggle);\n        if (instance) {\n          instance.hide();\n        } else {\n          removeClass(dropdown, CLASSES.OPEN);\n        }\n      } else {\n        removeClass(dropdown, CLASSES.OPEN);\n      }\n    }\n  }\n  \n  /**\n   * Handle click on dropdown toggle\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    const toggle = event.currentTarget || event.target.closest(SELECTORS.DATA_TOGGLE);\n    if (!toggle) return;\n    \n    const instance = Dropdown.getOrCreateInstance(toggle);\n    instance.toggle();\n  }\n  \n  /**\n   * Handle keydown on dropdown\n   * @param {KeyboardEvent} event \n   */\n  static handleKeydown(event) {\n    // Check if this is a dropdown-related key\n    if (![KEYS.ARROW_UP, KEYS.ARROW_DOWN, KEYS.ESCAPE].includes(event.key)) {\n      return;\n    }\n    \n    const toggle = event.target.closest(SELECTORS.DATA_TOGGLE);\n    if (!toggle) return;\n    \n    const instance = Dropdown.getOrCreateInstance(toggle);\n    instance._handleKeydown(event);\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Dropdown;\nexport { Dropdown, EVENTS as DropdownEvents, CLASSES as DropdownClasses, SELECTORS as DropdownSelectors };","/**\n * Sandal Tooltip Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses modern positioning (Floating UI compatible)\n */\n\nimport {\n  $, $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, removeAttr, data as getData, css,\n  show as showEl, hide as hideEl, remove as removeEl,\n  createFromHTML, dimensions, offset,\n  on, off, trigger,\n  fadeIn, fadeOut, reflow,\n  computePosition, applyPosition, autoUpdate, getContainer,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, getUID, sanitizeHTML\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'tooltip';\nconst DATA_KEY = 'bs.tooltip';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  animation: true,\n  template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n  trigger: 'hover focus',\n  title: '',\n  delay: 0,\n  html: false,\n  selector: false,\n  placement: 'top',\n  offset: 0,\n  container: false,\n  fallbackPlacement: 'flip',\n  boundary: 'scrollParent',\n  sanitize: true,\n  viewport: { selector: 'body', padding: 0 }\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  INSERTED: `inserted${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show',\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n};\n\nconst TRIGGERS = {\n  HOVER: 'hover',\n  FOCUS: 'focus',\n  CLICK: 'click',\n  MANUAL: 'manual'\n};\n\nconst SELECTORS = {\n  TOOLTIP_INNER: '.tooltip-inner',\n  TOOLTIP_ARROW: '.tooltip-arrow'\n};\n\nconst TRANSITION_DURATION = 150;\n\n/**\n * Tooltip Class\n * Provides tooltip functionality\n */\nclass Tooltip {\n  /**\n   * Create a Tooltip instance\n   * @param {Element} element - The trigger element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Parse options\n    this._options = this._getOptions(options);\n    \n    this._tip = null;\n    this._isEnabled = true;\n    this._timeout = null;\n    this._hoverState = '';\n    this._activeTrigger = {};\n    this._cleanupAutoUpdate = null;\n    \n    // Bind events\n    this._setListeners();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get tip element\n   * @returns {Element}\n   */\n  get tip() {\n    if (!this._tip) {\n      this._tip = createFromHTML(this._options.template);\n    }\n    return this._tip;\n  }\n  \n  /**\n   * Get element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Enable tooltip\n   */\n  enable() {\n    this._isEnabled = true;\n  }\n  \n  /**\n   * Disable tooltip\n   */\n  disable() {\n    this._isEnabled = false;\n  }\n  \n  /**\n   * Toggle enabled state\n   */\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled;\n  }\n  \n  /**\n   * Toggle tooltip\n   * @param {Event} [event] \n   */\n  toggle(event) {\n    if (!this._isEnabled) return;\n    \n    if (event) {\n      const context = this._getDelegateConfig();\n      \n      if (!this._activeTrigger.click) {\n        this._activeTrigger.click = true;\n      } else {\n        this._activeTrigger.click = false;\n      }\n      \n      if (this._isWithActiveTrigger()) {\n        this._enter();\n      } else {\n        this._leave();\n      }\n    } else {\n      if (hasClass(this.tip, CLASSES.IN)) {\n        this._leave();\n      } else {\n        this._enter();\n      }\n    }\n  }\n  \n  /**\n   * Show tooltip\n   */\n  async show() {\n    if (!this._isEnabled) {\n      return;\n    }\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW);\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n    \n    const tip = this.tip;\n    const title = this._getTitle();\n    \n    if (!title) {\n      return;\n    }\n    \n    this._setContent(tip, title);\n    \n    // Remove existing classes\n    removeClass(tip, CLASSES.IN);\n    removeClass(tip, CLASSES.TOP);\n    removeClass(tip, CLASSES.BOTTOM);\n    removeClass(tip, CLASSES.LEFT);\n    removeClass(tip, CLASSES.RIGHT);\n    \n    // Set ID for accessibility\n    const tipId = getUID(this.constructor.NAME || NAME);\n    setAttr(tip, 'id', tipId);\n    setAttr(this._element, 'aria-describedby', tipId);\n    \n    // Add fade class if animated\n    if (this._options.animation) {\n      addClass(tip, CLASSES.FADE);\n    }\n    \n    // CRITICAL: Hide tooltip during initial positioning to prevent visual shift\n    // Set initial styles to make tooltip invisible but measurable\n    tip.style.position = 'absolute';\n    tip.style.top = '0';\n    tip.style.left = '0';\n    tip.style.opacity = '0';\n    tip.style.visibility = 'hidden';\n    tip.style.display = 'block';\n    tip.style.pointerEvents = 'none';\n    \n    // Get container and append tip\n    const container = getContainer(this._options.container, this._element.ownerDocument.body);\n    container.appendChild(tip);\n    \n    // Dispatch inserted event\n    this._triggerEvent(EVENTS.INSERTED);\n    \n    // Position the tooltip WHILE INVISIBLE\n    await this._updatePosition();\n    \n    // Now make visible - remove hiding styles and show\n    tip.style.visibility = '';\n    tip.style.pointerEvents = '';\n    \n    // Show with animation\n    reflow(tip);\n    addClass(tip, CLASSES.IN);\n    \n    // Force opacity for visibility\n    tip.style.opacity = '1';\n    \n    if (this._options.animation) {\n      await this._waitForTransition(tip, TRANSITION_DURATION);\n    }\n    \n    // Set up auto-update for repositioning\n    this._cleanupAutoUpdate = autoUpdate(this._element, tip, () => {\n      this._updatePosition();\n    });\n    \n    this._hoverState = '';\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN);\n  }\n  \n  /**\n   * Hide tooltip\n   */\n  async hide() {\n    const tip = this.tip;\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE);\n    if (hideEvent.defaultPrevented) return;\n    \n    // Clean up auto-update\n    if (this._cleanupAutoUpdate) {\n      this._cleanupAutoUpdate();\n      this._cleanupAutoUpdate = null;\n    }\n    \n    // Hide with animation\n    removeClass(tip, CLASSES.IN);\n    \n    if (this._options.animation && hasClass(tip, CLASSES.FADE)) {\n      await this._waitForTransition(tip, TRANSITION_DURATION);\n    }\n    \n    this._hoverState = '';\n    this._activeTrigger = {};\n    \n    // Remove tip from DOM\n    if (tip.parentNode) {\n      tip.parentNode.removeChild(tip);\n    }\n    \n    // Remove aria\n    removeAttr(this._element, 'aria-describedby');\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN);\n  }\n  \n  /**\n   * Update tooltip position\n   */\n  async update() {\n    await this._updatePosition();\n  }\n  \n  /**\n   * Destroy tooltip instance\n   */\n  dispose() {\n    clearTimeout(this._timeout);\n    \n    // Clean up auto-update\n    if (this._cleanupAutoUpdate) {\n      this._cleanupAutoUpdate();\n    }\n    \n    // Remove event listeners\n    this._removeListeners();\n    \n    // Remove tip\n    if (this._tip) {\n      removeEl(this._tip);\n    }\n    \n    // Clean up instance\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._options = null;\n    this._tip = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Get merged options\n   * @param {Object} options \n   * @returns {Object}\n   * @private\n   */\n  _getOptions(options) {\n    const defaults = this.constructor.DEFAULTS || DEFAULTS;\n    const dataOptions = parseDataOptions(this._element, defaults);\n    \n    // Also get title from data attribute or title attribute\n    if (!options.title && !dataOptions.title) {\n      dataOptions.title = getAttr(this._element, 'title') || \n                          getAttr(this._element, 'data-original-title') || '';\n      \n      // Store original title and remove\n      if (getAttr(this._element, 'title')) {\n        setAttr(this._element, 'data-original-title', dataOptions.title);\n        this._element.removeAttribute('title');\n      }\n    }\n    \n    return {\n      ...defaults,\n      ...dataOptions,\n      ...options\n    };\n  }\n  \n  /**\n   * Get title content\n   * @returns {string}\n   * @private\n   */\n  _getTitle() {\n    let title = this._options.title;\n    \n    if (typeof title === 'function') {\n      title = title.call(this._element);\n    }\n    \n    return title ? String(title) : '';\n  }\n  \n  /**\n   * Set content in tooltip\n   * @param {Element} tip \n   * @param {string} title \n   * @private\n   */\n  _setContent(tip, title) {\n    const inner = $(SELECTORS.TOOLTIP_INNER, tip);\n    if (inner) {\n      if (this._options.html) {\n        if (this._options.sanitize) {\n          inner.innerHTML = sanitizeHTML(title);\n        } else {\n          inner.innerHTML = title;\n        }\n      } else {\n        inner.textContent = title;\n      }\n    }\n  }\n  \n  /**\n   * Update tooltip position\n   * @private\n   */\n  async _updatePosition() {\n    const tip = this.tip;\n    if (!tip || !tip.parentNode) return;\n    \n    const placement = this._getPlacement();\n    \n    // Use modern positioning\n    const position = await computePosition(this._element, tip, {\n      placement,\n      offset: 10, // Arrow + gap\n      flip: this._options.fallbackPlacement === 'flip',\n      shift: true\n    });\n    \n    // Apply position\n    applyPosition(tip, position);\n    \n    // Update placement class\n    const actualPlacement = position.placement.split('-')[0];\n    removeClass(tip, CLASSES.TOP);\n    removeClass(tip, CLASSES.RIGHT);\n    removeClass(tip, CLASSES.BOTTOM);\n    removeClass(tip, CLASSES.LEFT);\n    addClass(tip, actualPlacement);\n  }\n  \n  /**\n   * Get placement\n   * @returns {string}\n   * @private\n   */\n  _getPlacement() {\n    const placement = this._options.placement;\n    \n    if (typeof placement === 'function') {\n      return placement.call(this, this.tip, this._element);\n    }\n    \n    return placement;\n  }\n  \n  /**\n   * Set up event listeners\n   * @private\n   */\n  _setListeners() {\n    const triggers = this._options.trigger.split(' ');\n    \n    for (const trigger of triggers) {\n      if (trigger === TRIGGERS.CLICK) {\n        on(this._element, 'click', () => this.toggle());\n      } else if (trigger !== TRIGGERS.MANUAL) {\n        const eventIn = trigger === TRIGGERS.HOVER ? 'mouseenter' : 'focusin';\n        const eventOut = trigger === TRIGGERS.HOVER ? 'mouseleave' : 'focusout';\n        \n        on(this._element, eventIn, () => this._enter());\n        on(this._element, eventOut, () => this._leave());\n      }\n    }\n    \n    // Focus out on tip click\n    if (this._options.selector) {\n      // Delegated tooltips - handled differently\n    }\n  }\n  \n  /**\n   * Remove event listeners\n   * @private\n   */\n  _removeListeners() {\n    off(this._element, 'click');\n    off(this._element, 'mouseenter');\n    off(this._element, 'mouseleave');\n    off(this._element, 'focusin');\n    off(this._element, 'focusout');\n  }\n  \n  /**\n   * Handle enter (show)\n   * @private\n   */\n  _enter() {\n    if (this._hoverState === 'out') {\n      this._hoverState = '';\n    }\n    \n    clearTimeout(this._timeout);\n    this._hoverState = 'in';\n    \n    if (!this._options.delay || !this._options.delay.show) {\n      this.show();\n      return;\n    }\n    \n    const delay = typeof this._options.delay === 'number'\n      ? this._options.delay\n      : this._options.delay.show;\n    \n    this._timeout = setTimeout(() => {\n      if (this._hoverState === 'in') {\n        this.show();\n      }\n    }, delay);\n  }\n  \n  /**\n   * Handle leave (hide)\n   * @private\n   */\n  _leave() {\n    clearTimeout(this._timeout);\n    this._hoverState = 'out';\n    \n    if (!this._options.delay || !this._options.delay.hide) {\n      this.hide();\n      return;\n    }\n    \n    const delay = typeof this._options.delay === 'number' \n      ? this._options.delay \n      : this._options.delay.hide;\n    \n    this._timeout = setTimeout(() => {\n      if (this._hoverState === 'out') {\n        this.hide();\n      }\n    }, delay);\n  }\n  \n  /**\n   * Check if has active trigger\n   * @returns {boolean}\n   * @private\n   */\n  _isWithActiveTrigger() {\n    return Object.values(this._activeTrigger).includes(true);\n  }\n  \n  /**\n   * Get delegate config\n   * @returns {Object}\n   * @private\n   */\n  _getDelegateConfig() {\n    const config = {};\n    \n    if (this._options) {\n      for (const key in this._options) {\n        if (DEFAULTS[key] !== this._options[key]) {\n          config[key] = this._options[key];\n        }\n      }\n    }\n    \n    return config;\n  }\n  \n  /**\n   * Wait for transition\n   * @param {Element} element \n   * @param {number} duration \n   * @returns {Promise}\n   * @private\n   */\n  _waitForTransition(element, duration) {\n    return new Promise(resolve => {\n      const handler = () => {\n        element.removeEventListener('transitionend', handler);\n        resolve();\n      };\n      element.addEventListener('transitionend', handler);\n      setTimeout(resolve, duration + 50);\n    });\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SHOW || eventType === EVENTS.HIDE\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Tooltip instance from element\n   * @param {Element} element \n   * @returns {Tooltip|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Tooltip instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Tooltip}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Tooltip.getInstance(element) || new Tooltip(element, options);\n  }\n  \n  /**\n   * Component name\n   */\n  static get NAME() {\n    return NAME;\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Tooltip;\nexport { Tooltip, EVENTS as TooltipEvents, CLASSES as TooltipClasses };","/**\n * Sandal Popover Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Extends Tooltip functionality\n */\n\nimport {\n  $, hasClass, addClass, removeClass,\n  getAttr, setAttr, removeAttr,\n  createFromHTML,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions, getUID, sanitizeHTML\n} from '../utils/index.js';\n\nimport Tooltip from './tooltip.js';\n\n// Constants\nconst NAME = 'popover';\nconst DATA_KEY = 'bs.popover';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  ...Tooltip.DEFAULTS,\n  placement: 'right',\n  trigger: 'click',\n  content: '',\n  template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  INSERTED: `inserted${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show',\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n};\n\nconst SELECTORS = {\n  TITLE: '.popover-title',\n  CONTENT: '.popover-content',\n  ARROW: '.arrow'\n};\n\n/**\n * Popover Class\n * Extends Tooltip with title and content support\n */\nclass Popover extends Tooltip {\n  /**\n   * Create a Popover instance\n   * @param {Element} element - The trigger element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    // Call parent constructor with modified data key\n    super(element, options);\n    \n    if (!this._element) return;\n    \n    // Re-store with popover data key\n    removeInstance(this._element, Tooltip.DATA_KEY);\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get tip element\n   * @returns {Element}\n   */\n  get tip() {\n    if (!this._tip) {\n      this._tip = createFromHTML(this._options.template);\n    }\n    return this._tip;\n  }\n  \n  /**\n   * Destroy popover instance\n   */\n  dispose() {\n    // Remove event listeners\n    this._removeListeners();\n    \n    // Clean up auto-update\n    if (this._cleanupAutoUpdate) {\n      this._cleanupAutoUpdate();\n    }\n    \n    // Remove tip\n    if (this._tip && this._tip.parentNode) {\n      this._tip.parentNode.removeChild(this._tip);\n    }\n    \n    // Clean up instance\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._options = null;\n    this._tip = null;\n  }\n  \n  // Private methods (override parent)\n  \n  /**\n   * Get merged options\n   * @param {Object} options \n   * @returns {Object}\n   * @private\n   */\n  _getOptions(options) {\n    const defaults = this.constructor.DEFAULTS || DEFAULTS;\n    const dataOptions = parseDataOptions(this._element, defaults);\n    \n    // Get title from data attribute or title attribute\n    if (!options.title && !dataOptions.title) {\n      dataOptions.title = getAttr(this._element, 'data-original-title') ||\n                          getAttr(this._element, 'title') || '';\n      \n      // Store original title and remove\n      if (getAttr(this._element, 'title')) {\n        setAttr(this._element, 'data-original-title', dataOptions.title);\n        this._element.removeAttribute('title');\n      }\n    }\n    \n    // Get content from data attribute\n    if (!options.content && !dataOptions.content) {\n      dataOptions.content = getAttr(this._element, 'data-content') || '';\n    }\n    \n    return {\n      ...defaults,\n      ...dataOptions,\n      ...options\n    };\n  }\n  \n  /**\n   * Get title content\n   * @returns {string}\n   * @private\n   */\n  _getTitle() {\n    let title = this._options.title;\n    \n    if (typeof title === 'function') {\n      title = title.call(this._element);\n    }\n    \n    return title ? String(title) : '';\n  }\n  \n  /**\n   * Get content\n   * @returns {string}\n   * @private\n   */\n  _getContent() {\n    let content = this._options.content;\n    \n    if (typeof content === 'function') {\n      content = content.call(this._element);\n    }\n    \n    return content ? String(content) : '';\n  }\n  \n  /**\n   * Set content in popover\n   * @param {Element} tip \n   * @param {string} title \n   * @private\n   */\n  _setContent(tip, title) {\n    const titleEl = $(SELECTORS.TITLE, tip);\n    const contentEl = $(SELECTORS.CONTENT, tip);\n    \n    // Set title\n    if (titleEl) {\n      const titleText = this._getTitle();\n      if (titleText) {\n        if (this._options.html) {\n          if (this._options.sanitize) {\n            titleEl.innerHTML = sanitizeHTML(titleText);\n          } else {\n            titleEl.innerHTML = titleText;\n          }\n        } else {\n          titleEl.textContent = titleText;\n        }\n      } else {\n        // Hide title if empty\n        titleEl.style.display = 'none';\n      }\n    }\n    \n    // Set content\n    if (contentEl) {\n      const content = this._getContent();\n      if (this._options.html) {\n        if (this._options.sanitize) {\n          contentEl.innerHTML = sanitizeHTML(content);\n        } else {\n          contentEl.innerHTML = content;\n        }\n      } else {\n        contentEl.textContent = content;\n      }\n    }\n  }\n  \n  /**\n   * Check if has content\n   * @returns {boolean}\n   * @private\n   */\n  _hasContent() {\n    return this._getTitle() || this._getContent();\n  }\n  \n  /**\n   * Show popover (override to check content)\n   */\n  async show() {\n    if (!this._hasContent()) {\n      return;\n    }\n    \n    await super.show();\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    // Map tooltip events to popover events\n    const popoverEventType = eventType.replace('.bs.tooltip', EVENT_KEY);\n    \n    const event = new CustomEvent(popoverEventType, {\n      bubbles: true,\n      cancelable: popoverEventType === EVENTS.SHOW || popoverEventType === EVENTS.HIDE\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Popover instance from element\n   * @param {Element} element \n   * @returns {Popover|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Popover instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Popover}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Popover.getInstance(element) || new Popover(element, options);\n  }\n  \n  /**\n   * Component name\n   */\n  static get NAME() {\n    return NAME;\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Popover;\nexport { Popover, EVENTS as PopoverEvents, CLASSES as PopoverClasses };","/**\n * Sandal Tab Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport {\n  $, $$, closest, parent, children, siblings, hasClass, addClass, removeClass,\n  getAttr, setAttr,\n  trigger, on, off,\n  fadeIn, fadeOut, reflow,\n  setInstance, getInstance, removeInstance\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'tab';\nconst DATA_KEY = 'bs.tab';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  DROPDOWN_MENU: 'dropdown-menu',\n  ACTIVE: 'active',\n  DISABLED: 'disabled',\n  FADE: 'fade',\n  IN: 'in'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle=\"tab\"], [data-toggle=\"pill\"]',\n  DROPDOWN: '.dropdown',\n  NAV_LIST_GROUP: '.nav, .list-group',\n  ACTIVE: '.active',\n  ACTIVE_UL: '> li > .active',\n  ACTIVE_CHILD: '> .active',\n  DATA_TOGGLE_CHILD: '> li > [data-toggle=\"tab\"], > li > [data-toggle=\"pill\"], > [data-toggle=\"tab\"], > [data-toggle=\"pill\"]'\n};\n\n// Static transitioning state per nav container\nconst transitioningContainers = new WeakSet();\n\n/**\n * Tab Class\n * Provides tab and pill navigation functionality\n */\nclass Tab {\n  /**\n   * Create a Tab instance\n   * @param {Element} element - The tab trigger element\n   */\n  constructor(element) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get tab element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Show the tab\n   */\n  show() {\n    if (!this._element) return;\n    \n    // Check if already active or disabled\n    const listElement = closest(this._element, SELECTORS.NAV_LIST_GROUP);\n    const targetSelector = getAttr(this._element, 'data-target') || getAttr(this._element, 'href');\n    \n    // Prevent concurrent transitions on the same nav container\n    if (listElement && transitioningContainers.has(listElement)) {\n      return;\n    }\n    \n    // Check if link is inside an active li\n    const parentLi = this._element.parentElement;\n    if (parentLi && hasClass(parentLi, CLASSES.ACTIVE)) {\n      return;\n    }\n    \n    // Check if disabled\n    if (hasClass(this._element, CLASSES.DISABLED) ||\n        (parentLi && hasClass(parentLi, CLASSES.DISABLED))) {\n      return;\n    }\n    \n    // Find currently active element\n    let previous = null;\n    let previousTab = null;\n    \n    if (listElement) {\n      // Find active child - check both direct children and li > a patterns\n      const activeChildren = children(listElement).filter(child => hasClass(child, CLASSES.ACTIVE));\n      if (activeChildren.length > 0) {\n        previous = activeChildren[0];\n        previousTab = $(SELECTORS.DATA_TOGGLE, previous) || previous;\n      } else {\n        // Check for li > .active pattern\n        const activeLi = listElement.querySelector(':scope > li > .active');\n        if (activeLi) {\n          previousTab = activeLi;\n          previous = activeLi.parentElement;\n        }\n      }\n    }\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW, {\n      relatedTarget: previousTab\n    });\n    \n    if (showEvent.defaultPrevented) return;\n    \n    // Dispatch hide event on previous tab\n    if (previousTab && previousTab !== this._element) {\n      const hideEvent = this._triggerEventOn(previousTab, EVENTS.HIDE, {\n        relatedTarget: this._element\n      });\n      \n      if (hideEvent.defaultPrevented) return;\n    }\n    \n    // Lock the container\n    if (listElement) {\n      transitioningContainers.add(listElement);\n    }\n    \n    // Activate the tab synchronously to avoid race conditions\n    this._activate(this._element, listElement, false);\n    \n    // Activate the pane\n    const target = targetSelector ? $(targetSelector) : null;\n    if (target) {\n      const container = target.parentElement;\n      this._activate(target, container, true);\n    }\n    \n    // Unlock after a frame to allow CSS transitions\n    requestAnimationFrame(() => {\n      if (listElement) {\n        transitioningContainers.delete(listElement);\n      }\n      \n      // Dispatch shown event\n      this._triggerEvent(EVENTS.SHOWN, {\n        relatedTarget: previousTab\n      });\n      \n      // Dispatch hidden event on previous tab\n      if (previousTab && previousTab !== this._element) {\n        this._triggerEventOn(previousTab, EVENTS.HIDDEN, {\n          relatedTarget: this._element\n        });\n      }\n    });\n  }\n  \n  /**\n   * Destroy the tab instance\n   */\n  dispose() {\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Activate element within container\n   * @param {Element} element - Element to activate\n   * @param {Element} container - Container element\n   * @param {boolean} [isPane=false] - Whether activating a pane\n   * @private\n   */\n  _activate(element, container, isPane = false) {\n    if (!container) return;\n    \n    if (isPane) {\n      // For panes - find active sibling pane and deactivate\n      const activePanes = children(container).filter(child => hasClass(child, CLASSES.ACTIVE));\n      for (const activePane of activePanes) {\n        removeClass(activePane, CLASSES.ACTIVE);\n        removeClass(activePane, CLASSES.IN);\n      }\n      \n      // Activate new pane\n      addClass(element, CLASSES.ACTIVE);\n      \n      // Handle fade transition\n      if (hasClass(element, CLASSES.FADE)) {\n        reflow(element);\n        addClass(element, CLASSES.IN);\n      }\n    } else {\n      // For tabs - Bootstrap 3 only sets active on <li>, not on <a>\n      // First, remove active from ALL li elements in this nav\n      const allLiElements = children(container).filter(child => child.tagName === 'LI');\n      for (const li of allLiElements) {\n        if (hasClass(li, CLASSES.ACTIVE)) {\n          removeClass(li, CLASSES.ACTIVE);\n          \n          // Also remove from any anchors inside (cleanup from previous bugs)\n          const anchorsInLi = li.querySelectorAll('a.active');\n          anchorsInLi.forEach(a => removeClass(a, CLASSES.ACTIVE));\n          \n          // Update aria on the tab link\n          const tabLink = li.querySelector('[data-toggle=\"tab\"], [data-toggle=\"pill\"]');\n          if (tabLink && tabLink.hasAttribute('aria-selected')) {\n            setAttr(tabLink, 'aria-selected', 'false');\n          }\n        }\n      }\n      \n      // Also handle dropdown menus that might have active items\n      const activeDropdownItems = container.querySelectorAll('.dropdown-menu .active');\n      activeDropdownItems.forEach(item => removeClass(item, CLASSES.ACTIVE));\n      \n      // Now activate the new tab's parent li (Bootstrap 3 style)\n      const parentLi = element.parentElement;\n      if (parentLi && parentLi.tagName === 'LI') {\n        addClass(parentLi, CLASSES.ACTIVE);\n      }\n      \n      // Handle dropdown parent - mark the dropdown's li as active too\n      const dropdownMenu = closest(element, '.dropdown-menu');\n      if (dropdownMenu) {\n        const dropdownLi = closest(dropdownMenu, 'li.dropdown');\n        if (dropdownLi) {\n          addClass(dropdownLi, CLASSES.ACTIVE);\n        }\n      }\n      \n      // Update aria on the new tab\n      if (element.hasAttribute('aria-selected')) {\n        setAttr(element, 'aria-selected', 'true');\n      }\n    }\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @param {Object} detail \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SHOW || eventType === EVENTS.HIDE,\n      detail\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  /**\n   * Trigger event on specific element\n   * @param {Element} element \n   * @param {string} eventType \n   * @param {Object} detail \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEventOn(element, eventType, detail = {}) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SHOW || eventType === EVENTS.HIDE,\n      detail\n    });\n    element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Tab instance from element\n   * @param {Element} element \n   * @returns {Tab|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Tab instance\n   * @param {Element} element \n   * @returns {Tab}\n   */\n  static getOrCreateInstance(element) {\n    return Tab.getInstance(element) || new Tab(element);\n  }\n  \n  /**\n   * Handle click on tab\n   * @param {Event} event\n   */\n  static handleClick(event) {\n    event.preventDefault();\n    \n    // event.currentTarget is preferred, but may not be available in all cases\n    // event.target might be a text node, so check for closest method\n    let tab = event.currentTarget;\n    if (!tab) {\n      const target = event.target;\n      tab = target && target.closest ? target.closest(SELECTORS.DATA_TOGGLE) : null;\n    }\n    if (!tab) return;\n    \n    const instance = Tab.getOrCreateInstance(tab);\n    instance.show();\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n}\n\nexport default Tab;\nexport { Tab, EVENTS as TabEvents, CLASSES as TabClasses, SELECTORS as TabSelectors };","/**\n * Sandal Collapse Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Web Animation API for smooth animations\n */\n\nimport {\n  $, $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, data as getData,\n  trigger,\n  slideDown, slideUp, reflow,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'collapse';\nconst DATA_KEY = 'bs.collapse';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  toggle: true,\n  parent: null\n};\n\nconst EVENTS = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  COLLAPSE: 'collapse',\n  COLLAPSING: 'collapsing',\n  COLLAPSED: 'collapsed',\n  IN: 'in',\n  SHOW: 'show'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle=\"collapse\"]',\n  ACTIVES: '.in, .collapsing'\n};\n\n/**\n * Collapse Class\n * Provides collapsible content functionality\n */\nclass Collapse {\n  /**\n   * Create a Collapse instance\n   * @param {Element} element - The collapsible element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Parse options from data attributes\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    this._isTransitioning = false;\n    this._triggerArray = [];\n    \n    // Find all triggers for this collapse\n    const toggleList = $$(SELECTORS.DATA_TOGGLE);\n    for (const toggle of toggleList) {\n      const selector = getAttr(toggle, 'data-target') || getAttr(toggle, 'href');\n      if (selector) {\n        const filterElement = $$(selector).filter(el => el === this._element);\n        if (filterElement.length > 0) {\n          this._triggerArray.push(toggle);\n        }\n      }\n    }\n    \n    // Get parent element for accordion behavior\n    this._parent = this._getParent();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Set initial ARIA state\n    this._addAriaAndCollapsedClass(this._element, this._triggerArray);\n    \n    // Auto-toggle on init if toggle option is true (Bootstrap 3 behavior)\n    if (this._options.toggle) {\n      this.toggle();\n    }\n  }\n  \n  /**\n   * Get collapse element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Toggle the collapse\n   */\n  toggle() {\n    if (hasClass(this._element, CLASSES.IN)) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  \n  /**\n   * Show the collapse\n   */\n  async show() {\n    if (this._isTransitioning || hasClass(this._element, CLASSES.IN)) {\n      return;\n    }\n    \n    let actives = null;\n    let activesData = null;\n    \n    // Accordion behavior - close other panels\n    if (this._parent) {\n      actives = $$(SELECTORS.ACTIVES, this._parent).filter(elem => {\n        if (this._options.parent) {\n          return closest(elem, this._options.parent) === this._parent;\n        }\n        return hasClass(elem, CLASSES.COLLAPSE);\n      });\n      \n      if (actives.length === 0) {\n        actives = null;\n      }\n    }\n    \n    // Check if target is already transitioning\n    if (actives) {\n      activesData = actives.map(elem => getInstance(elem, DATA_KEY));\n      const hasTransitioning = activesData.some(data => data && data._isTransitioning);\n      if (hasTransitioning) return;\n    }\n    \n    // Dispatch show event (cancelable)\n    const showEvent = this._triggerEvent(EVENTS.SHOW);\n    if (showEvent.defaultPrevented) return;\n    \n    // Close other active collapses in accordion\n    if (actives) {\n      for (const active of actives) {\n        if (active !== this._element) {\n          const instance = getInstance(active, DATA_KEY);\n          if (instance) {\n            instance.hide();\n          } else {\n            // No instance, manually remove class\n            removeClass(active, CLASSES.IN);\n          }\n        }\n      }\n    }\n    \n    this._isTransitioning = true;\n    \n    // Set up for animation\n    removeClass(this._element, CLASSES.COLLAPSE);\n    addClass(this._element, CLASSES.COLLAPSING);\n    this._element.style.height = '0';\n    this._element.style.overflow = 'hidden';\n    \n    // Update triggers\n    this._setTriggerState(false);\n    \n    // Force reflow\n    reflow(this._element);\n    \n    // Calculate natural height\n    this._element.style.height = 'auto';\n    const naturalHeight = this._element.scrollHeight;\n    this._element.style.height = '0';\n    \n    // Animate\n    try {\n      await this._element.animate([\n        { height: '0px' },\n        { height: `${naturalHeight}px` }\n      ], {\n        duration: 350,\n        easing: 'ease'\n      }).finished;\n    } catch (e) {\n      // Animation cancelled or failed\n    }\n    \n    // Finish transition\n    this._element.style.height = '';\n    this._element.style.overflow = '';\n    removeClass(this._element, CLASSES.COLLAPSING);\n    addClass(this._element, CLASSES.COLLAPSE);\n    addClass(this._element, CLASSES.IN);\n    \n    this._isTransitioning = false;\n    \n    // Dispatch shown event\n    this._triggerEvent(EVENTS.SHOWN);\n  }\n  \n  /**\n   * Hide the collapse\n   */\n  async hide() {\n    if (this._isTransitioning || !hasClass(this._element, CLASSES.IN)) {\n      return;\n    }\n    \n    // Dispatch hide event (cancelable)\n    const hideEvent = this._triggerEvent(EVENTS.HIDE);\n    if (hideEvent.defaultPrevented) return;\n    \n    this._isTransitioning = true;\n    \n    // Get current height for animation\n    const currentHeight = this._element.scrollHeight;\n    this._element.style.height = `${currentHeight}px`;\n    \n    // Force reflow\n    reflow(this._element);\n    \n    // Set up for animation\n    removeClass(this._element, CLASSES.COLLAPSE);\n    removeClass(this._element, CLASSES.IN);\n    addClass(this._element, CLASSES.COLLAPSING);\n    this._element.style.overflow = 'hidden';\n    \n    // Update triggers\n    this._setTriggerState(true);\n    \n    // Animate\n    try {\n      await this._element.animate([\n        { height: `${currentHeight}px` },\n        { height: '0px' }\n      ], {\n        duration: 350,\n        easing: 'ease'\n      }).finished;\n    } catch (e) {\n      // Animation cancelled or failed\n    }\n    \n    // Finish transition\n    this._element.style.height = '';\n    this._element.style.overflow = '';\n    removeClass(this._element, CLASSES.COLLAPSING);\n    addClass(this._element, CLASSES.COLLAPSE);\n    \n    this._isTransitioning = false;\n    \n    // Dispatch hidden event\n    this._triggerEvent(EVENTS.HIDDEN);\n  }\n  \n  /**\n   * Destroy the collapse instance\n   */\n  dispose() {\n    removeInstance(this._element, DATA_KEY);\n    this._options = null;\n    this._parent = null;\n    this._triggerArray = null;\n    this._isTransitioning = false;\n    this._element = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Get parent element for accordion behavior\n   * @returns {Element|null}\n   * @private\n   */\n  _getParent() {\n    const parent = this._options.parent;\n    \n    if (!parent) return null;\n    \n    if (typeof parent === 'string') {\n      // Check if it's an ID selector\n      if (parent.charAt(0) === '#') {\n        return $(parent);\n      }\n      // Try to find parent from element's context\n      return closest(this._element, parent);\n    }\n    \n    return parent instanceof Element ? parent : null;\n  }\n  \n  /**\n   * Add ARIA and collapsed class to triggers\n   * @param {Element} element \n   * @param {Element[]} triggers \n   * @private\n   */\n  _addAriaAndCollapsedClass(element, triggers) {\n    const isOpen = hasClass(element, CLASSES.IN);\n    \n    if (triggers.length) {\n      for (const trigger of triggers) {\n        if (isOpen) {\n          removeClass(trigger, CLASSES.COLLAPSED);\n        } else {\n          addClass(trigger, CLASSES.COLLAPSED);\n        }\n        setAttr(trigger, 'aria-expanded', isOpen.toString());\n      }\n    }\n  }\n  \n  /**\n   * Set trigger collapsed state\n   * @param {boolean} collapsed \n   * @private\n   */\n  _setTriggerState(collapsed) {\n    for (const trigger of this._triggerArray) {\n      if (collapsed) {\n        addClass(trigger, CLASSES.COLLAPSED);\n      } else {\n        removeClass(trigger, CLASSES.COLLAPSED);\n      }\n      setAttr(trigger, 'aria-expanded', (!collapsed).toString());\n    }\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SHOW || eventType === EVENTS.HIDE\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Collapse instance from element\n   * @param {Element} element \n   * @returns {Collapse|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Collapse instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Collapse}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Collapse.getInstance(element) || new Collapse(element, options);\n  }\n  \n  /**\n   * Handle click on collapse trigger\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    const trigger = event.currentTarget || event.target.closest(SELECTORS.DATA_TOGGLE);\n    \n    if (!trigger) return;\n    \n    // Prevent default for links\n    if (trigger.tagName === 'A') {\n      event.preventDefault();\n    }\n    \n    // Get target(s)\n    const selector = getAttr(trigger, 'data-target') || getAttr(trigger, 'href');\n    \n    if (!selector) return;\n    \n    const targets = $$(selector);\n    \n    for (const target of targets) {\n      const options = {\n        toggle: false\n      };\n      \n      // Check for parent (accordion)\n      const parentSelector = getAttr(trigger, 'data-parent');\n      if (parentSelector) {\n        options.parent = parentSelector;\n      }\n      \n      const instance = Collapse.getOrCreateInstance(target, options);\n      instance.toggle();\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Collapse;\nexport { Collapse, EVENTS as CollapseEvents, CLASSES as CollapseClasses, SELECTORS as CollapseSelectors };","/**\n * Sandal Alert Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport { \n  $, closest, hasClass, removeClass, remove as removeElement,\n  trigger, on, off,\n  fadeOut,\n  setInstance, getInstance, removeInstance\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'alert';\nconst DATA_KEY = 'bs.alert';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst EVENTS = {\n  CLOSE: `close${EVENT_KEY}`,\n  CLOSED: `closed${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  ALERT: 'alert',\n  FADE: 'fade',\n  IN: 'in'\n};\n\nconst SELECTORS = {\n  DISMISS: '[data-dismiss=\"alert\"]'\n};\n\n/**\n * Alert Class\n * Provides dismissible alert functionality\n */\nclass Alert {\n  /**\n   * Create an Alert instance\n   * @param {Element} element - The alert element\n   */\n  constructor(element) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Bind dismiss button handler\n    this._bindDismiss();\n  }\n  \n  /**\n   * Get alert element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Close the alert\n   * @param {Element} [alertElement] - Optional specific alert element to close\n   */\n  close(alertElement) {\n    const rootElement = alertElement || this._element;\n    \n    if (!rootElement) return;\n    \n    // Dispatch close event (cancelable)\n    const closeEvent = this._triggerEvent(EVENTS.CLOSE, rootElement);\n    \n    if (closeEvent.defaultPrevented) return;\n    \n    this._removeElement(rootElement);\n  }\n  \n  /**\n   * Destroy the alert instance\n   */\n  dispose() {\n    this._unbindDismiss();\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind click handler to dismiss buttons\n   * @private\n   */\n  _bindDismiss() {\n    on(this._element, 'click', SELECTORS.DISMISS, (e) => {\n      e.preventDefault();\n      this.close();\n    });\n  }\n  \n  /**\n   * Unbind dismiss handlers\n   * @private\n   */\n  _unbindDismiss() {\n    off(this._element, 'click');\n  }\n  \n  /**\n   * Remove the alert element with animation\n   * @param {Element} element \n   * @private\n   */\n  async _removeElement(element) {\n    removeClass(element, CLASSES.IN);\n    \n    if (hasClass(element, CLASSES.FADE)) {\n      // Animate out using Web Animation API\n      await fadeOut(element, { duration: 150 });\n    }\n    \n    // Dispatch closed event\n    this._triggerEvent(EVENTS.CLOSED, element);\n    \n    // Remove from DOM and clean up\n    const instance = getInstance(element, DATA_KEY);\n    if (instance) {\n      instance.dispose();\n    }\n    removeElement(element);\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @param {Element} element \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType, element) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.CLOSE\n    });\n    element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Alert instance from element\n   * @param {Element} element \n   * @returns {Alert|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Alert instance\n   * @param {Element} element \n   * @returns {Alert}\n   */\n  static getOrCreateInstance(element) {\n    return Alert.getInstance(element) || new Alert(element);\n  }\n  \n  /**\n   * Close alert from dismiss button click\n   * @param {Event} event \n   */\n  static handleDismiss(event) {\n    const button = event.currentTarget || event.target;\n    const alertElement = closest(button, `.${CLASSES.ALERT}`);\n    \n    if (!alertElement) return;\n    \n    event.preventDefault();\n    \n    const instance = Alert.getOrCreateInstance(alertElement);\n    instance.close();\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n}\n\nexport default Alert;\nexport { Alert, EVENTS as AlertEvents, CLASSES as AlertClasses, SELECTORS as AlertSelectors };","/**\n * Sandal Button Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n */\n\nimport {\n  $, $$, closest, hasClass, addClass, removeClass, toggleClass,\n  getAttr, setAttr, removeAttr,\n  trigger,\n  setInstance, getInstance, removeInstance\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'button';\nconst DATA_KEY = 'bs.button';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst CLASSES = {\n  ACTIVE: 'active',\n  BUTTON: 'btn',\n  DISABLED: 'disabled'\n};\n\nconst SELECTORS = {\n  DATA_TOGGLE: '[data-toggle^=\"button\"]',\n  DATA_TOGGLE_BUTTONS: '[data-toggle=\"buttons\"]',\n  INPUT: 'input:not([type=\"hidden\"])',\n  ACTIVE: '.active',\n  BUTTON: '.btn'\n};\n\n/**\n * Button Class\n * Provides toggle state and button group functionality\n */\nclass Button {\n  /**\n   * Create a Button instance\n   * @param {Element} element - The button element\n   */\n  constructor(element) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n  }\n  \n  /**\n   * Get button element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Toggle button state\n   */\n  toggle() {\n    let triggerChangeEvent = true;\n    let addAriaPressed = true;\n    \n    // Check if part of button group\n    const rootElement = closest(this._element, SELECTORS.DATA_TOGGLE_BUTTONS);\n    \n    if (rootElement) {\n      const input = this._element.querySelector(SELECTORS.INPUT);\n      \n      if (input) {\n        if (input.type === 'radio') {\n          if (input.checked && hasClass(this._element, CLASSES.ACTIVE)) {\n            triggerChangeEvent = false;\n          } else {\n            // Deactivate other buttons in group\n            const activeElement = rootElement.querySelector(SELECTORS.ACTIVE);\n            if (activeElement) {\n              removeClass(activeElement, CLASSES.ACTIVE);\n              // Also update input state\n              const activeInput = activeElement.querySelector(SELECTORS.INPUT);\n              if (activeInput) {\n                activeInput.checked = false;\n              }\n            }\n          }\n        }\n        \n        if (triggerChangeEvent) {\n          if (input.type === 'checkbox' || input.type === 'radio') {\n            input.checked = !hasClass(this._element, CLASSES.ACTIVE);\n          }\n          // Trigger change event\n          input.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n        \n        input.focus();\n        addAriaPressed = false;\n      }\n    }\n    \n    if (addAriaPressed) {\n      const pressed = !hasClass(this._element, CLASSES.ACTIVE);\n      setAttr(this._element, 'aria-pressed', pressed.toString());\n    }\n    \n    if (triggerChangeEvent) {\n      toggleClass(this._element, CLASSES.ACTIVE);\n    }\n  }\n  \n  /**\n   * Set loading state\n   * @param {string} [state='loading'] - State to set (loading, reset)\n   */\n  setState(state = 'loading') {\n    const data = this._element.dataset;\n    const val = state === 'loading' ? data.loadingText : data.resetText;\n    \n    if (!val) return;\n    \n    // Store original text\n    if (!data.resetText) {\n      data.resetText = this._element.textContent;\n    }\n    \n    // Set loading state\n    this._element.textContent = val;\n    \n    // Manage disabled state\n    if (state === 'loading') {\n      setAttr(this._element, 'disabled', 'disabled');\n      addClass(this._element, CLASSES.DISABLED);\n    } else {\n      removeAttr(this._element, 'disabled');\n      removeClass(this._element, CLASSES.DISABLED);\n    }\n  }\n  \n  /**\n   * Destroy the button instance\n   */\n  dispose() {\n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Button instance from element\n   * @param {Element} element \n   * @returns {Button|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Button instance\n   * @param {Element} element \n   * @returns {Button}\n   */\n  static getOrCreateInstance(element) {\n    return Button.getInstance(element) || new Button(element);\n  }\n  \n  /**\n   * Handle click on toggle button\n   * @param {Event} event \n   */\n  static handleToggle(event) {\n    let button = event.target;\n    \n    // Find actual button element\n    if (!hasClass(button, CLASSES.BUTTON)) {\n      button = closest(button, SELECTORS.BUTTON);\n    }\n    \n    if (!button) return;\n    \n    // Check if disabled\n    if (hasClass(button, CLASSES.DISABLED) || button.disabled) {\n      event.preventDefault();\n      return;\n    }\n    \n    const instance = Button.getOrCreateInstance(button);\n    instance.toggle();\n    \n    // Don't prevent default for checkbox/radio inputs\n    const input = button.querySelector(SELECTORS.INPUT);\n    if (!input) {\n      event.preventDefault();\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n}\n\nexport default Button;\nexport { Button, CLASSES as ButtonClasses, SELECTORS as ButtonSelectors };","/**\n * Sandal Carousel Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Web Animation API for smooth transitions\n */\n\nimport {\n  $, $$, closest, hasClass, addClass, removeClass, toggleClass,\n  getAttr, setAttr, data as getData, children, find,\n  on, off, trigger,\n  reflow,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'carousel';\nconst DATA_KEY = 'bs.carousel';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  interval: 5000,\n  pause: 'hover',\n  wrap: true,\n  keyboard: true\n};\n\nconst EVENTS = {\n  SLIDE: `slide${EVENT_KEY}`,\n  SLID: `slid${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  CAROUSEL: 'carousel',\n  ACTIVE: 'active',\n  SLIDE: 'slide',\n  RIGHT: 'right',\n  LEFT: 'left',\n  NEXT: 'next',\n  PREV: 'prev',\n  ITEM: 'item'\n};\n\nconst SELECTORS = {\n  ACTIVE: '.active',\n  ACTIVE_ITEM: '.item.active',\n  ITEM: '.item',\n  ITEM_IMG: '.item img',\n  NEXT_PREV: '.next, .prev',\n  INDICATORS: '.carousel-indicators',\n  DATA_SLIDE: '[data-slide], [data-slide-to]',\n  DATA_RIDE: '[data-ride=\"carousel\"]'\n};\n\nconst DIRECTION = {\n  NEXT: 'next',\n  PREV: 'prev',\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\nconst TRANSITION_DURATION = 600;\n\n/**\n * Carousel Class\n * Provides carousel/slideshow functionality\n */\nclass Carousel {\n  /**\n   * Create a Carousel instance\n   * @param {Element} element - The carousel element\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    this._items = null;\n    this._interval = null;\n    this._activeElement = null;\n    this._isPaused = false;\n    this._isSliding = false;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Get indicators\n    this._indicatorsElement = $(SELECTORS.INDICATORS, this._element);\n    \n    // Bind events\n    this._bindEvents();\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Auto start if data-ride\n    if (this._options.interval) {\n      this.cycle();\n    }\n  }\n  \n  /**\n   * Get carousel element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Move to next slide\n   */\n  next() {\n    if (!this._isSliding) {\n      this._slide(DIRECTION.NEXT);\n    }\n  }\n  \n  /**\n   * Move to previous slide\n   */\n  prev() {\n    if (!this._isSliding) {\n      this._slide(DIRECTION.PREV);\n    }\n  }\n  \n  /**\n   * Pause the carousel\n   * @param {Event} [event] \n   */\n  pause(event) {\n    if (!event) {\n      this._isPaused = true;\n    }\n    \n    // Check for next/prev elements\n    if ($(SELECTORS.NEXT_PREV, this._element)) {\n      this._isPaused = true;\n    }\n    \n    this._clearInterval();\n  }\n  \n  /**\n   * Start cycling the carousel\n   * @param {Event} [event] \n   */\n  cycle(event) {\n    if (!event) {\n      this._isPaused = false;\n    }\n    \n    this._clearInterval();\n    \n    if (this._options.interval && !this._isPaused) {\n      this._interval = setInterval(\n        () => this.next(),\n        this._options.interval\n      );\n    }\n  }\n  \n  /**\n   * Go to specific slide\n   * @param {number} index \n   */\n  to(index) {\n    const items = this._getItems();\n    const activeIndex = this._getItemIndex($(SELECTORS.ACTIVE_ITEM, this._element));\n    \n    if (index > items.length - 1 || index < 0) return;\n    \n    if (this._isSliding) {\n      // Queue up slide after current transition\n      on(this._element, EVENTS.SLID, () => this.to(index), { once: true });\n      return;\n    }\n    \n    if (activeIndex === index) {\n      this.pause();\n      this.cycle();\n      return;\n    }\n    \n    const direction = index > activeIndex ? DIRECTION.NEXT : DIRECTION.PREV;\n    this._slide(direction, items[index]);\n  }\n  \n  /**\n   * Destroy carousel instance\n   */\n  dispose() {\n    this._clearInterval();\n    off(this._element, 'keydown');\n    off(this._element, 'mouseenter');\n    off(this._element, 'mouseleave');\n    off(this._element, 'touchstart');\n    off(this._element, 'touchmove');\n    off(this._element, 'touchend');\n    \n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._items = null;\n    this._options = null;\n    this._indicatorsElement = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Bind carousel events\n   * @private\n   */\n  _bindEvents() {\n    // Keyboard navigation\n    if (this._options.keyboard) {\n      on(this._element, 'keydown', (e) => this._keydown(e));\n    }\n    \n    // Pause on hover\n    if (this._options.pause === 'hover') {\n      on(this._element, 'mouseenter', () => this.pause());\n      on(this._element, 'mouseleave', () => this.cycle());\n    }\n    \n    // Touch support\n    this._addTouchEventListeners();\n  }\n  \n  /**\n   * Add touch event listeners\n   * @private\n   */\n  _addTouchEventListeners() {\n    let touchStartX = 0;\n    let touchDeltaX = 0;\n    \n    on(this._element, 'touchstart', (e) => {\n      touchStartX = e.touches[0].clientX;\n    });\n    \n    on(this._element, 'touchmove', (e) => {\n      touchDeltaX = e.touches[0].clientX - touchStartX;\n    });\n    \n    on(this._element, 'touchend', () => {\n      const absDeltaX = Math.abs(touchDeltaX);\n      \n      if (absDeltaX > 40) { // Minimum swipe distance\n        if (touchDeltaX > 0) {\n          this.prev();\n        } else {\n          this.next();\n        }\n      }\n      \n      touchDeltaX = 0;\n    });\n  }\n  \n  /**\n   * Handle keyboard navigation\n   * @param {KeyboardEvent} event \n   * @private\n   */\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) return;\n    \n    switch (event.key) {\n      case 'ArrowLeft':\n        event.preventDefault();\n        this.prev();\n        break;\n      case 'ArrowRight':\n        event.preventDefault();\n        this.next();\n        break;\n    }\n  }\n  \n  /**\n   * Get carousel items\n   * @returns {Element[]}\n   * @private\n   */\n  _getItems() {\n    if (!this._items) {\n      this._items = $$(SELECTORS.ITEM, this._element);\n    }\n    return this._items;\n  }\n  \n  /**\n   * Get item index\n   * @param {Element} element \n   * @returns {number}\n   * @private\n   */\n  _getItemIndex(element) {\n    return this._getItems().indexOf(element);\n  }\n  \n  /**\n   * Get next item\n   * @param {string} direction \n   * @param {Element} activeElement \n   * @returns {Element}\n   * @private\n   */\n  _getItemByDirection(direction, activeElement) {\n    const isNextDirection = direction === DIRECTION.NEXT;\n    const isPrevDirection = direction === DIRECTION.PREV;\n    const activeIndex = this._getItemIndex(activeElement);\n    const items = this._getItems();\n    const lastItemIndex = items.length - 1;\n    const isGoingToWrap = (isPrevDirection && activeIndex === 0) ||\n                          (isNextDirection && activeIndex === lastItemIndex);\n    \n    if (isGoingToWrap && !this._options.wrap) {\n      return activeElement;\n    }\n    \n    const delta = direction === DIRECTION.PREV ? -1 : 1;\n    const itemIndex = (activeIndex + delta) % items.length;\n    \n    return items[itemIndex === -1 ? items.length - 1 : itemIndex];\n  }\n  \n  /**\n   * Perform slide animation\n   * @param {string} direction \n   * @param {Element} [element] \n   * @private\n   */\n  async _slide(direction, element) {\n    const activeElement = $(SELECTORS.ACTIVE_ITEM, this._element);\n    const activeElementIndex = this._getItemIndex(activeElement);\n    const nextElement = element || (activeElement && this._getItemByDirection(direction, activeElement));\n    const nextElementIndex = this._getItemIndex(nextElement);\n    const isCycling = Boolean(this._interval);\n    \n    // Check if same element\n    if (nextElement === activeElement) return;\n    \n    // Determine directional class names\n    const isNext = direction === DIRECTION.NEXT;\n    const directionalClassName = isNext ? CLASSES.LEFT : CLASSES.RIGHT;\n    const orderClassName = isNext ? CLASSES.NEXT : CLASSES.PREV;\n    \n    // Dispatch slide event (cancelable)\n    const slideEvent = this._triggerEvent(EVENTS.SLIDE, {\n      relatedTarget: nextElement,\n      direction: directionalClassName,\n      from: activeElementIndex,\n      to: nextElementIndex\n    });\n    \n    if (slideEvent.defaultPrevented) return;\n    \n    if (!activeElement || !nextElement) return;\n    \n    this._isSliding = true;\n    \n    if (isCycling) {\n      this.pause();\n    }\n    \n    // Update indicators\n    this._setActiveIndicator(nextElement);\n    \n    if (hasClass(this._element, CLASSES.SLIDE)) {\n      // Animated slide\n      \n      // Add order class to next element\n      addClass(nextElement, orderClassName);\n      reflow(nextElement);\n      \n      // Add directional classes\n      addClass(activeElement, directionalClassName);\n      addClass(nextElement, directionalClassName);\n      \n      // Use Web Animation API for smooth transition\n      try {\n        await Promise.all([\n          activeElement.animate([\n            { transform: 'translateX(0)' },\n            { transform: isNext ? 'translateX(-100%)' : 'translateX(100%)' }\n          ], {\n            duration: TRANSITION_DURATION,\n            easing: 'ease-in-out'\n          }).finished,\n          nextElement.animate([\n            { transform: isNext ? 'translateX(100%)' : 'translateX(-100%)' },\n            { transform: 'translateX(0)' }\n          ], {\n            duration: TRANSITION_DURATION,\n            easing: 'ease-in-out'\n          }).finished\n        ]);\n      } catch (e) {\n        // Animation cancelled\n      }\n      \n      // Clean up classes\n      removeClass(nextElement, orderClassName);\n      removeClass(nextElement, directionalClassName);\n      addClass(nextElement, CLASSES.ACTIVE);\n      \n      removeClass(activeElement, CLASSES.ACTIVE);\n      removeClass(activeElement, orderClassName);\n      removeClass(activeElement, directionalClassName);\n    } else {\n      // No animation\n      removeClass(activeElement, CLASSES.ACTIVE);\n      addClass(nextElement, CLASSES.ACTIVE);\n    }\n    \n    this._isSliding = false;\n    \n    // Dispatch slid event\n    this._triggerEvent(EVENTS.SLID, {\n      relatedTarget: nextElement,\n      direction: directionalClassName,\n      from: activeElementIndex,\n      to: nextElementIndex\n    });\n    \n    if (isCycling) {\n      this.cycle();\n    }\n  }\n  \n  /**\n   * Set active indicator\n   * @param {Element} element \n   * @private\n   */\n  _setActiveIndicator(element) {\n    if (this._indicatorsElement) {\n      const indicators = $$(SELECTORS.ACTIVE, this._indicatorsElement);\n      for (const indicator of indicators) {\n        removeClass(indicator, CLASSES.ACTIVE);\n      }\n      \n      const nextIndicator = this._indicatorsElement.children[this._getItemIndex(element)];\n      if (nextIndicator) {\n        addClass(nextIndicator, CLASSES.ACTIVE);\n      }\n    }\n  }\n  \n  /**\n   * Clear interval\n   * @private\n   */\n  _clearInterval() {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = null;\n    }\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @param {Object} detail \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType === EVENTS.SLIDE,\n      detail\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Carousel instance from element\n   * @param {Element} element \n   * @returns {Carousel|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Carousel instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Carousel}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Carousel.getInstance(element) || new Carousel(element, options);\n  }\n  \n  /**\n   * Handle click on carousel controls\n   * @param {Event} event \n   */\n  static handleClick(event) {\n    const target = event.currentTarget || event.target.closest(SELECTORS.DATA_SLIDE);\n    if (!target) return;\n    \n    const slideIndex = getAttr(target, 'data-slide-to');\n    const targetSelector = getAttr(target, 'data-target') || getAttr(target, 'href');\n    \n    if (!targetSelector) return;\n    \n    const carousel = $(targetSelector);\n    if (!carousel) return;\n    \n    event.preventDefault();\n    \n    const instance = Carousel.getOrCreateInstance(carousel);\n    \n    if (slideIndex !== null) {\n      instance.to(parseInt(slideIndex, 10));\n    } else {\n      const slideDir = getAttr(target, 'data-slide');\n      if (slideDir === 'prev') {\n        instance.prev();\n      } else if (slideDir === 'next') {\n        instance.next();\n      }\n    }\n    \n    instance.cycle();\n  }\n  \n  /**\n   * Auto-initialize carousels with data-ride\n   */\n  static autoInit() {\n    const carousels = $$(SELECTORS.DATA_RIDE);\n    for (const carousel of carousels) {\n      Carousel.getOrCreateInstance(carousel);\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Carousel;\nexport { Carousel, EVENTS as CarouselEvents, CLASSES as CarouselClasses, SELECTORS as CarouselSelectors };","/**\n * Sandal Scrollspy Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Intersection Observer for efficient scroll detection\n */\n\nimport {\n  $, $$, closest, hasClass, addClass, removeClass,\n  getAttr, setAttr, parent,\n  on, off, trigger,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'scrollspy';\nconst DATA_KEY = 'bs.scrollspy';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  offset: 10,\n  method: 'auto',\n  target: ''\n};\n\nconst EVENTS = {\n  ACTIVATE: `activate${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  ACTIVE: 'active',\n  DROPDOWN: 'dropdown',\n  DROPDOWN_MENU: 'dropdown-menu',\n  DROPDOWN_ITEM: 'dropdown-item',\n  NAV_LINK: 'nav-link',\n  NAV: 'nav',\n  LIST_GROUP: 'list-group'\n};\n\nconst SELECTORS = {\n  DATA_SPY: '[data-spy=\"scroll\"]',\n  ACTIVE: '.active',\n  NAV_LIST: '.nav, .list-group',\n  NAV_LINKS: '.nav-link',\n  NAV_ITEMS: '.nav-item',\n  LIST_ITEMS: '.list-group-item',\n  DROPDOWN: '.dropdown',\n  DROPDOWN_TOGGLE: '.dropdown-toggle'\n};\n\n/**\n * Scrollspy Class\n * Provides scrollspy functionality using Intersection Observer\n */\nclass Scrollspy {\n  /**\n   * Create a Scrollspy instance\n   * @param {Element} element - The scrollable element to spy on\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...parseDataOptions(this._element, DEFAULTS),\n      ...options\n    };\n    \n    // Get scroll element (body or specific element)\n    this._scrollElement = this._element.tagName === 'BODY' ? window : this._element;\n    \n    // Get target navigation\n    this._selector = this._options.target || '';\n    this._offsets = [];\n    this._targets = [];\n    this._activeTarget = null;\n    this._observer = null;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Initialize\n    this.refresh();\n    this._process();\n  }\n  \n  /**\n   * Get scrollspy element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Refresh scrollspy targets\n   */\n  refresh() {\n    // Clean up existing observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    \n    const targetSelector = this._selector;\n    if (!targetSelector) return;\n    \n    const nav = $(targetSelector);\n    if (!nav) return;\n    \n    // Get all links in target navigation\n    const navLinks = $$('a[href]', nav).filter(link => {\n      const href = getAttr(link, 'href');\n      return href && href.charAt(0) === '#' && href.length > 1;\n    });\n    \n    this._targets = [];\n    this._offsets = [];\n    \n    // Get scroll height\n    const scrollHeight = this._getScrollHeight();\n    \n    // Build targets list\n    for (const link of navLinks) {\n      const href = getAttr(link, 'href');\n      const target = $(href);\n      \n      if (target) {\n        const targetBCR = target.getBoundingClientRect();\n        if (targetBCR.width || targetBCR.height) {\n          this._targets.push(href);\n          this._offsets.push(this._getOffsetTop(target));\n        }\n      }\n    }\n    \n    // Sort by offset\n    const items = this._targets.map((href, i) => ({ href, offset: this._offsets[i] }));\n    items.sort((a, b) => a.offset - b.offset);\n    this._targets = items.map(item => item.href);\n    this._offsets = items.map(item => item.offset);\n    \n    // Set up Intersection Observer for modern detection\n    this._setupIntersectionObserver();\n    \n    // Also keep scroll listener as fallback\n    this._setupScrollListener();\n  }\n  \n  /**\n   * Destroy scrollspy instance\n   */\n  dispose() {\n    // Clean up observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    \n    // Remove scroll listener\n    off(this._scrollElement, 'scroll', this._scrollHandler);\n    \n    // Clear active state\n    this._clear();\n    \n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._scrollElement = null;\n    this._options = null;\n    this._targets = null;\n    this._offsets = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Set up Intersection Observer\n   * @private\n   */\n  _setupIntersectionObserver() {\n    // Get all target elements\n    const targetElements = this._targets\n      .map(href => $(href))\n      .filter(Boolean);\n    \n    if (targetElements.length === 0) return;\n    \n    const rootMargin = `-${this._options.offset}px 0px -${window.innerHeight - this._options.offset - 1}px 0px`;\n    \n    this._observer = new IntersectionObserver((entries) => {\n      // Find the first intersecting entry\n      const intersectingEntries = entries.filter(entry => entry.isIntersecting);\n      \n      if (intersectingEntries.length > 0) {\n        // Get the topmost intersecting element\n        const topEntry = intersectingEntries.reduce((prev, current) => {\n          return (current.boundingClientRect.top < prev.boundingClientRect.top) ? current : prev;\n        });\n        \n        const targetId = `#${topEntry.target.id}`;\n        this._activate(targetId);\n      }\n    }, {\n      root: this._element === document.body ? null : this._element,\n      rootMargin,\n      threshold: 0\n    });\n    \n    // Observe all targets\n    for (const target of targetElements) {\n      this._observer.observe(target);\n    }\n  }\n  \n  /**\n   * Set up scroll listener as fallback\n   * @private\n   */\n  _setupScrollListener() {\n    this._scrollHandler = () => {\n      requestAnimationFrame(() => this._process());\n    };\n    \n    on(this._scrollElement, 'scroll', this._scrollHandler);\n  }\n  \n  /**\n   * Process scroll position\n   * @private\n   */\n  _process() {\n    const scrollTop = this._getScrollTop() + this._options.offset;\n    const scrollHeight = this._getScrollHeight();\n    const maxScroll = this._options.offset + scrollHeight - this._getOffsetHeight();\n    \n    if (this._offsets.length === 0) return;\n    \n    // Check if at bottom\n    if (scrollTop >= maxScroll) {\n      const target = this._targets[this._targets.length - 1];\n      if (this._activeTarget !== target) {\n        this._activate(target);\n      }\n      return;\n    }\n    \n    // Check if before first target\n    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {\n      this._activeTarget = null;\n      this._clear();\n      return;\n    }\n    \n    // Find active target\n    for (let i = this._offsets.length; i--;) {\n      const isActiveTarget = this._activeTarget !== this._targets[i] &&\n          scrollTop >= this._offsets[i] &&\n          (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1]);\n      \n      if (isActiveTarget) {\n        this._activate(this._targets[i]);\n      }\n    }\n  }\n  \n  /**\n   * Activate target\n   * @param {string} target - Target selector\n   * @private\n   */\n  _activate(target) {\n    this._activeTarget = target;\n    \n    this._clear();\n    \n    // Find matching nav links\n    const queries = this._selector.split(',')\n      .map(sel => `${sel} a[href=\"${target}\"], ${sel} [data-target=\"${target}\"]`);\n    \n    const links = $$(queries.join(','));\n    \n    for (const link of links) {\n      if (hasClass(link, CLASSES.DROPDOWN_ITEM)) {\n        // Dropdown item\n        const dropdown = closest(link, SELECTORS.DROPDOWN);\n        if (dropdown) {\n          const toggle = $(SELECTORS.DROPDOWN_TOGGLE, dropdown);\n          if (toggle) {\n            addClass(toggle, CLASSES.ACTIVE);\n          }\n        }\n        addClass(link, CLASSES.ACTIVE);\n      } else {\n        // Regular nav link\n        addClass(link, CLASSES.ACTIVE);\n        \n        // Activate parent items\n        let parentItem = link.parentElement;\n        while (parentItem) {\n          if (hasClass(parentItem, CLASSES.NAV) || hasClass(parentItem, CLASSES.LIST_GROUP)) {\n            // Check for parent nav-item\n            const prevSibling = parentItem.previousElementSibling;\n            if (prevSibling && hasClass(prevSibling, CLASSES.ACTIVE)) {\n              addClass(prevSibling, CLASSES.ACTIVE);\n            }\n          }\n          \n          // Handle li elements\n          if (parentItem.tagName === 'LI') {\n            addClass(parentItem, CLASSES.ACTIVE);\n          }\n          \n          // Handle dropdown parents\n          if (hasClass(parentItem, CLASSES.DROPDOWN)) {\n            const toggle = $(SELECTORS.DROPDOWN_TOGGLE, parentItem);\n            if (toggle) {\n              addClass(toggle, CLASSES.ACTIVE);\n            }\n          }\n          \n          parentItem = parentItem.parentElement;\n        }\n      }\n    }\n    \n    // Dispatch activate event\n    this._triggerEvent(EVENTS.ACTIVATE, { relatedTarget: target });\n  }\n  \n  /**\n   * Clear active state\n   * @private\n   */\n  _clear() {\n    const nav = $(this._selector);\n    if (!nav) return;\n    \n    const activeLinks = $$(SELECTORS.ACTIVE, nav);\n    for (const link of activeLinks) {\n      removeClass(link, CLASSES.ACTIVE);\n    }\n  }\n  \n  /**\n   * Get scroll top\n   * @returns {number}\n   * @private\n   */\n  _getScrollTop() {\n    return this._scrollElement === window\n      ? this._scrollElement.scrollY\n      : this._scrollElement.scrollTop;\n  }\n  \n  /**\n   * Get scroll height\n   * @returns {number}\n   * @private\n   */\n  _getScrollHeight() {\n    return this._scrollElement === window\n      ? Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n      : this._scrollElement.scrollHeight;\n  }\n  \n  /**\n   * Get offset height\n   * @returns {number}\n   * @private\n   */\n  _getOffsetHeight() {\n    return this._scrollElement === window\n      ? window.innerHeight\n      : this._scrollElement.getBoundingClientRect().height;\n  }\n  \n  /**\n   * Get offset top of element\n   * @param {Element} element \n   * @returns {number}\n   * @private\n   */\n  _getOffsetTop(element) {\n    if (this._scrollElement === window) {\n      return element.getBoundingClientRect().top + window.scrollY;\n    }\n    return element.offsetTop;\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @param {Object} detail \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType, detail = {}) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: false,\n      detail\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Scrollspy instance from element\n   * @param {Element} element \n   * @returns {Scrollspy|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Scrollspy instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Scrollspy}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Scrollspy.getInstance(element) || new Scrollspy(element, options);\n  }\n  \n  /**\n   * Auto-initialize scrollspy elements\n   */\n  static autoInit() {\n    const spyElements = $$(SELECTORS.DATA_SPY);\n    for (const element of spyElements) {\n      Scrollspy.getOrCreateInstance(element);\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Scrollspy;\nexport { Scrollspy, EVENTS as ScrollspyEvents, CLASSES as ScrollspyClasses, SELECTORS as ScrollspySelectors };","/**\n * Sandal Affix Component\n * Modern vanilla JS implementation with Bootstrap 3 API compatibility\n * Uses Intersection Observer for efficient scroll detection\n * Note: Bootstrap 4+ deprecated affix in favor of CSS position:sticky\n */\n\nimport {\n  $, hasClass, addClass, removeClass,\n  getAttr, css,\n  on, off, trigger,\n  setInstance, getInstance, removeInstance,\n  parseDataOptions\n} from '../utils/index.js';\n\n// Constants\nconst NAME = 'affix';\nconst DATA_KEY = 'bs.affix';\nconst EVENT_KEY = `.bs.${NAME}`;\n\nconst DEFAULTS = {\n  offset: 0,\n  target: window\n};\n\nconst EVENTS = {\n  AFFIX: `affix${EVENT_KEY}`,\n  AFFIXED: `affixed${EVENT_KEY}`,\n  AFFIX_TOP: `affix-top${EVENT_KEY}`,\n  AFFIXED_TOP: `affixed-top${EVENT_KEY}`,\n  AFFIX_BOTTOM: `affix-bottom${EVENT_KEY}`,\n  AFFIXED_BOTTOM: `affixed-bottom${EVENT_KEY}`\n};\n\nconst CLASSES = {\n  AFFIX: 'affix',\n  AFFIX_TOP: 'affix-top',\n  AFFIX_BOTTOM: 'affix-bottom'\n};\n\nconst SELECTORS = {\n  DATA_SPY: '[data-spy=\"affix\"]'\n};\n\n/**\n * Affix Class\n * Provides affix (sticky) positioning functionality\n */\nclass Affix {\n  /**\n   * Create an Affix instance\n   * @param {Element} element - The element to affix\n   * @param {Object} options - Configuration options\n   */\n  constructor(element, options = {}) {\n    this._element = typeof element === 'string' ? $(element) : element;\n    \n    if (!this._element) return;\n    \n    // Parse options\n    this._options = {\n      ...DEFAULTS,\n      ...this._parseOffsetOption(options),\n      ...parseDataOptions(this._element, DEFAULTS)\n    };\n    \n    // Get target scroll element\n    this._target = this._getTarget();\n    this._affixed = null;\n    this._unpin = null;\n    this._pinnedOffset = null;\n    this._observer = null;\n    this._scrollHandler = null;\n    \n    // Store instance\n    setInstance(this._element, DATA_KEY, this);\n    \n    // Initialize\n    this._checkPosition();\n    this._setupListeners();\n  }\n  \n  /**\n   * Get affix element\n   * @returns {Element}\n   */\n  get element() {\n    return this._element;\n  }\n  \n  /**\n   * Get affix state\n   * @returns {string|null}\n   */\n  get state() {\n    return this._affixed;\n  }\n  \n  /**\n   * Check and update position\n   */\n  checkPosition() {\n    this._checkPosition();\n  }\n  \n  /**\n   * Check and update position with resize\n   */\n  checkPositionWithEventLoop() {\n    requestAnimationFrame(() => this._checkPosition());\n  }\n  \n  /**\n   * Destroy affix instance\n   */\n  dispose() {\n    // Clean up observer\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    \n    // Remove scroll listener\n    if (this._scrollHandler) {\n      off(this._target, 'scroll', this._scrollHandler);\n    }\n    \n    // Remove resize listener\n    off(window, 'resize', this._resizeHandler);\n    \n    // Remove classes\n    removeClass(this._element, CLASSES.AFFIX);\n    removeClass(this._element, CLASSES.AFFIX_TOP);\n    removeClass(this._element, CLASSES.AFFIX_BOTTOM);\n    \n    removeInstance(this._element, DATA_KEY);\n    this._element = null;\n    this._options = null;\n    this._target = null;\n  }\n  \n  // Private methods\n  \n  /**\n   * Parse offset option\n   * @param {Object} options \n   * @returns {Object}\n   * @private\n   */\n  _parseOffsetOption(options) {\n    if (options.offset !== undefined) {\n      const offset = options.offset;\n      \n      if (typeof offset === 'number') {\n        return {\n          offset: {\n            top: offset,\n            bottom: offset\n          }\n        };\n      }\n      \n      if (typeof offset === 'object') {\n        return { offset };\n      }\n    }\n    \n    return {};\n  }\n  \n  /**\n   * Get target scroll element\n   * @returns {Window|Element}\n   * @private\n   */\n  _getTarget() {\n    const target = this._options.target;\n    \n    if (target === window || !target) return window;\n    \n    if (typeof target === 'string') {\n      return $(target) || window;\n    }\n    \n    return target;\n  }\n  \n  /**\n   * Set up scroll and resize listeners\n   * @private\n   */\n  _setupListeners() {\n    // Scroll listener\n    this._scrollHandler = () => {\n      requestAnimationFrame(() => this._checkPosition());\n    };\n    on(this._target, 'scroll', this._scrollHandler);\n    \n    // Resize listener\n    this._resizeHandler = () => {\n      requestAnimationFrame(() => this._checkPosition());\n    };\n    on(window, 'resize', this._resizeHandler);\n    \n    // Try to use Intersection Observer for top/bottom detection\n    this._setupIntersectionObserver();\n  }\n  \n  /**\n   * Set up Intersection Observer for boundary detection\n   * @private\n   */\n  _setupIntersectionObserver() {\n    // Create sentinels for top and bottom boundaries\n    const offset = this._getOffset();\n    \n    if (!offset.top && !offset.bottom) return;\n    \n    // This is a supplementary observer for more efficient detection\n    // The main position checking is still done via scroll events for accuracy\n  }\n  \n  /**\n   * Get offset values\n   * @returns {{top: number, bottom: number}}\n   * @private\n   */\n  _getOffset() {\n    const offset = this._options.offset;\n    \n    if (typeof offset === 'function') {\n      return offset.call(this, this._element);\n    }\n    \n    if (typeof offset === 'object') {\n      return {\n        top: typeof offset.top === 'function' ? offset.top.call(this, this._element) : (offset.top || 0),\n        bottom: typeof offset.bottom === 'function' ? offset.bottom.call(this, this._element) : (offset.bottom || 0)\n      };\n    }\n    \n    return {\n      top: Number(offset) || 0,\n      bottom: Number(offset) || 0\n    };\n  }\n  \n  /**\n   * Get scroll position\n   * @returns {number}\n   * @private\n   */\n  _getScrollTop() {\n    return this._target === window\n      ? window.scrollY || document.documentElement.scrollTop\n      : this._target.scrollTop;\n  }\n  \n  /**\n   * Get scroll height\n   * @returns {number}\n   * @private\n   */\n  _getScrollHeight() {\n    return this._target === window\n      ? Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n      : this._target.scrollHeight;\n  }\n  \n  /**\n   * Check and update position\n   * @private\n   */\n  _checkPosition() {\n    if (!this._element || getComputedStyle(this._element).display === 'none') {\n      return;\n    }\n    \n    const scrollTop = this._getScrollTop();\n    const scrollHeight = this._getScrollHeight();\n    const offset = this._getOffset();\n    const position = this._element.getBoundingClientRect();\n    const targetHeight = this._target === window\n      ? window.innerHeight\n      : this._target.getBoundingClientRect().height;\n    \n    let affix = null;\n    \n    // Check for unpin\n    if (this._unpin !== null && scrollTop + this._unpin <= position.top) {\n      affix = false;\n    }\n    // Check for bottom offset\n    else if (offset.bottom !== undefined && offset.bottom !== null) {\n      const offsetBottom = typeof offset.bottom === 'function'\n        ? offset.bottom.call(this, this._element)\n        : offset.bottom;\n      \n      if (scrollTop + targetHeight >= scrollHeight - offsetBottom) {\n        affix = 'bottom';\n      }\n    }\n    // Check for top offset\n    else if (offset.top !== undefined && offset.top !== null) {\n      const offsetTop = typeof offset.top === 'function'\n        ? offset.top.call(this, this._element)\n        : offset.top;\n      \n      if (scrollTop <= offsetTop) {\n        affix = 'top';\n      }\n    }\n    \n    // Determine if we should be affixed\n    if (affix === null) {\n      const offsetTop = typeof offset.top === 'function'\n        ? offset.top.call(this, this._element)\n        : (offset.top || 0);\n      \n      affix = scrollTop >= offsetTop;\n    }\n    \n    // No change needed\n    if (this._affixed === affix) return;\n    \n    // Handle unpin\n    if (this._unpin !== null) {\n      this._element.style.top = '';\n    }\n    \n    const affixType = affix === 'bottom' ? 'bottom' : (affix === 'top' ? 'top' : '');\n    const eventPrefix = affix ? `affix${affixType ? `-${affixType}` : ''}` : 'affix';\n    \n    // Dispatch affix event (cancelable)\n    const affixEvent = this._triggerEvent(`${eventPrefix}${EVENT_KEY}`);\n    if (affixEvent.defaultPrevented) return;\n    \n    this._affixed = affix;\n    this._unpin = affix === 'bottom' ? this._getPinnedOffset() : null;\n    \n    // Update classes\n    removeClass(this._element, CLASSES.AFFIX);\n    removeClass(this._element, CLASSES.AFFIX_TOP);\n    removeClass(this._element, CLASSES.AFFIX_BOTTOM);\n    \n    if (affix === 'bottom') {\n      addClass(this._element, CLASSES.AFFIX_BOTTOM);\n    } else if (affix === 'top') {\n      addClass(this._element, CLASSES.AFFIX_TOP);\n    } else if (affix) {\n      addClass(this._element, CLASSES.AFFIX);\n    }\n    \n    // Handle bottom positioning\n    if (affix === 'bottom') {\n      this._element.style.position = 'absolute';\n      this._element.style.top = `${scrollHeight - this._element.offsetHeight - offset.bottom}px`;\n    } else {\n      this._element.style.position = '';\n      this._element.style.top = '';\n    }\n    \n    // Dispatch affixed event\n    const affixedEventPrefix = affix ? `affixed${affixType ? `-${affixType}` : ''}` : 'affixed';\n    this._triggerEvent(`${affixedEventPrefix}${EVENT_KEY}`);\n  }\n  \n  /**\n   * Get pinned offset\n   * @returns {number}\n   * @private\n   */\n  _getPinnedOffset() {\n    if (this._pinnedOffset) return this._pinnedOffset;\n    \n    this._element.classList.remove(CLASSES.AFFIX_TOP, CLASSES.AFFIX_BOTTOM);\n    this._element.classList.add(CLASSES.AFFIX);\n    \n    const scrollTop = this._getScrollTop();\n    const position = this._element.getBoundingClientRect();\n    \n    this._pinnedOffset = scrollTop - position.top;\n    return this._pinnedOffset;\n  }\n  \n  /**\n   * Trigger custom event\n   * @param {string} eventType \n   * @returns {CustomEvent}\n   * @private\n   */\n  _triggerEvent(eventType) {\n    const event = new CustomEvent(eventType, {\n      bubbles: true,\n      cancelable: eventType.includes('affix') && !eventType.includes('affixed')\n    });\n    this._element.dispatchEvent(event);\n    return event;\n  }\n  \n  // Static methods\n  \n  /**\n   * Get Affix instance from element\n   * @param {Element} element \n   * @returns {Affix|null}\n   */\n  static getInstance(element) {\n    return getInstance(element, DATA_KEY);\n  }\n  \n  /**\n   * Get or create Affix instance\n   * @param {Element} element \n   * @param {Object} options \n   * @returns {Affix}\n   */\n  static getOrCreateInstance(element, options = {}) {\n    return Affix.getInstance(element) || new Affix(element, options);\n  }\n  \n  /**\n   * Auto-initialize affix elements\n   */\n  static autoInit() {\n    const affixElements = $$(SELECTORS.DATA_SPY);\n    for (const element of affixElements) {\n      Affix.getOrCreateInstance(element);\n    }\n  }\n  \n  /**\n   * Version\n   */\n  static get VERSION() {\n    return '1.0.0';\n  }\n  \n  /**\n   * Data key\n   */\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n  \n  /**\n   * Default options\n   */\n  static get DEFAULTS() {\n    return DEFAULTS;\n  }\n}\n\nexport default Affix;\nexport { Affix, EVENTS as AffixEvents, CLASSES as AffixClasses, SELECTORS as AffixSelectors };","import Modal from './components/modal.js';\nimport Dropdown from './components/dropdown.js';\nimport Tooltip from './components/tooltip.js';\nimport Popover from './components/popover.js';\nimport Tab from './components/tab.js';\nimport Collapse from './components/collapse.js';\nimport Alert from './components/alert.js';\nimport Button from './components/button.js';\nimport Carousel from './components/carousel.js';\nimport Scrollspy from './components/scrollspy.js';\nimport Affix from './components/affix.js';\n\n/**\n * SandalJS - Modern Bootstrap 3 API-compatible library\n * @class\n */\nclass Sandal {\n  constructor() {\n    this.version = '1.0.0';\n    this._components = new Map();\n  }\n\n  /**\n   * Initialize a modal component\n   * @param {HTMLElement|string} element - Modal element or selector\n   * @param {Object} options - Modal options\n   * @returns {Modal} Modal instance\n   */\n  modal(element, options = {}) {\n    return new Modal(element, options);\n  }\n\n  /**\n   * Initialize a dropdown component\n   * @param {HTMLElement|string} element - Dropdown element or selector\n   * @param {Object} options - Dropdown options\n   * @returns {Dropdown} Dropdown instance\n   */\n  dropdown(element, options = {}) {\n    return new Dropdown(element, options);\n  }\n\n  /**\n   * Initialize a tooltip component\n   * @param {HTMLElement|string} element - Tooltip element or selector\n   * @param {Object} options - Tooltip options\n   * @returns {Tooltip} Tooltip instance\n   */\n  tooltip(element, options = {}) {\n    return new Tooltip(element, options);\n  }\n\n  /**\n   * Initialize a popover component\n   * @param {HTMLElement|string} element - Popover element or selector\n   * @param {Object} options - Popover options\n   * @returns {Popover} Popover instance\n   */\n  popover(element, options = {}) {\n    return new Popover(element, options);\n  }\n\n  /**\n   * Initialize a tab component\n   * @param {HTMLElement|string} element - Tab element or selector\n   * @param {Object} options - Tab options\n   * @returns {Tab} Tab instance\n   */\n  tab(element, options = {}) {\n    return new Tab(element, options);\n  }\n\n  /**\n   * Initialize a collapse component\n   * @param {HTMLElement|string} element - Collapse element or selector\n   * @param {Object} options - Collapse options\n   * @returns {Collapse} Collapse instance\n   */\n  collapse(element, options = {}) {\n    return new Collapse(element, options);\n  }\n\n  /**\n   * Initialize an alert component\n   * @param {HTMLElement|string} element - Alert element or selector\n   * @param {Object} options - Alert options\n   * @returns {Alert} Alert instance\n   */\n  alert(element, options = {}) {\n    return new Alert(element, options);\n  }\n\n  /**\n   * Initialize a button component\n   * @param {HTMLElement|string} element - Button element or selector\n   * @param {Object} options - Button options\n   * @returns {Button} Button instance\n   */\n  button(element, options = {}) {\n    return new Button(element, options);\n  }\n\n  /**\n   * Initialize a carousel component\n   * @param {HTMLElement|string} element - Carousel element or selector\n   * @param {Object} options - Carousel options\n   * @returns {Carousel} Carousel instance\n   */\n  carousel(element, options = {}) {\n    return new Carousel(element, options);\n  }\n\n  /**\n   * Initialize a scrollspy component\n   * @param {HTMLElement|string} element - Scrollspy element or selector\n   * @param {Object} options - Scrollspy options\n   * @returns {Scrollspy} Scrollspy instance\n   */\n  scrollspy(element, options = {}) {\n    return new Scrollspy(element, options);\n  }\n\n  /**\n   * Initialize an affix component\n   * @param {HTMLElement|string} element - Affix element or selector\n   * @param {Object} options - Affix options\n   * @returns {Affix} Affix instance\n   */\n  affix(element, options = {}) {\n    return new Affix(element, options);\n  }\n\n  /**\n   * Initialize component by name (for programmatic use)\n   * @param {string} componentName - Name of the component\n   * @param {HTMLElement|string} element - Element or selector\n   * @param {Object} options - Component options\n   * @returns {Object|null} Component instance or null if not found\n   */\n  static initComponent(componentName, element, options = {}) {\n    const ComponentClass = {\n      modal: Modal,\n      dropdown: Dropdown,\n      tooltip: Tooltip,\n      popover: Popover,\n      tab: Tab,\n      collapse: Collapse,\n      alert: Alert,\n      button: Button,\n      carousel: Carousel,\n      scrollspy: Scrollspy,\n      affix: Affix\n    }[componentName];\n\n    if (ComponentClass) {\n      return new ComponentClass(element, options);\n    }\n    return null;\n  }\n\n  /**\n   * Get all active components\n   * @returns {Map} Map of active components\n   */\n  getComponents() {\n    return this._components;\n  }\n\n  /**\n   * Destroy all components\n   */\n  destroy() {\n    for (const [key, component] of this._components) {\n      if (typeof component.destroy === 'function') {\n        component.destroy();\n      }\n    }\n    this._components.clear();\n  }\n}\n\n// jQuery/presideJQuery compatibility layer\n// Preside uses presideJQuery instead of jQuery\n(function() {\n  // Get the jQuery reference - check for presideJQuery first (Preside), then jQuery\n  const $ = (typeof window !== 'undefined' && window.presideJQuery) ||\n            (typeof window !== 'undefined' && window.jQuery) ||\n            (typeof jQuery !== 'undefined' && jQuery);\n  \n  if (!$) {\n    // No jQuery available, skip plugin registration\n    if (typeof window !== 'undefined') {\n      window.Sandal = Sandal;\n    }\n    return;\n  }\n\n  // Add transition support detection (Bootstrap 3 requirement)\n  function transitionEnd() {\n    const el = document.createElement('bootstrap');\n    const transEndEventNames = {\n      'WebkitTransition': 'webkitTransitionEnd',\n      'MozTransition': 'transitionend',\n      'OTransition': 'oTransitionEnd otransitionend',\n      'transition': 'transitionend'\n    };\n\n    for (const name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] };\n      }\n    }\n    return false;\n  }\n\n  // Add $.support.transition\n  $(function() {\n    $.support.transition = transitionEnd();\n  });\n\n  // Add $.fn.emulateTransitionEnd\n  $.fn.emulateTransitionEnd = function(duration) {\n    let called = false;\n    const $el = this;\n    $(this).one($.support.transition.end, function() { called = true; });\n    const callback = function() { if (!called) $($el).trigger($.support.transition.end); };\n    setTimeout(callback, duration);\n    return this;\n  };\n\n  // Store old plugin references for noConflict\n  const old = {\n    modal: $.fn.modal,\n    dropdown: $.fn.dropdown,\n    tooltip: $.fn.tooltip,\n    popover: $.fn.popover,\n    tab: $.fn.tab,\n    collapse: $.fn.collapse,\n    alert: $.fn.alert,\n    button: $.fn.button,\n    carousel: $.fn.carousel,\n    scrollspy: $.fn.scrollspy,\n    affix: $.fn.affix\n  };\n\n  // Modal plugin\n  $.fn.modal = function(option, _relatedTarget) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.modal');\n      const options = $.extend({}, Modal.DEFAULTS || {}, $this.data(), typeof option === 'object' && option);\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)));\n      if (typeof option === 'string') data[option](_relatedTarget);\n      else if (options.show) data.show(_relatedTarget);\n    });\n  };\n  $.fn.modal.Constructor = Modal;\n  $.fn.modal.noConflict = function() { $.fn.modal = old.modal; return this; };\n\n  // Dropdown plugin\n  $.fn.dropdown = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.dropdown');\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.dropdown.Constructor = Dropdown;\n  $.fn.dropdown.noConflict = function() { $.fn.dropdown = old.dropdown; return this; };\n\n  // Tooltip plugin\n  $.fn.tooltip = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.tooltip');\n      const options = typeof option === 'object' && option;\n\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.tooltip.Constructor = Tooltip;\n  $.fn.tooltip.noConflict = function() { $.fn.tooltip = old.tooltip; return this; };\n\n  // Popover plugin\n  $.fn.popover = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.popover');\n      const options = typeof option === 'object' && option;\n\n      if (!data) {\n        $this.data('bs.popover', (data = new Popover(this, options)));\n      }\n      if (typeof option === 'string') {\n        data[option]();\n      }\n    });\n  };\n  $.fn.popover.Constructor = Popover;\n  $.fn.popover.noConflict = function() { $.fn.popover = old.popover; return this; };\n\n  // Tab plugin\n  $.fn.tab = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.tab');\n\n      if (!data) $this.data('bs.tab', (data = new Tab(this)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.tab.Constructor = Tab;\n  $.fn.tab.noConflict = function() { $.fn.tab = old.tab; return this; };\n\n  // Collapse plugin\n  $.fn.collapse = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.collapse');\n      const options = $.extend({}, Collapse.DEFAULTS || {}, $this.data(), typeof option === 'object' && option);\n\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.collapse.Constructor = Collapse;\n  $.fn.collapse.noConflict = function() { $.fn.collapse = old.collapse; return this; };\n\n  // Alert plugin\n  $.fn.alert = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.alert');\n\n      if (!data) $this.data('bs.alert', (data = new Alert(this)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.alert.Constructor = Alert;\n  $.fn.alert.noConflict = function() { $.fn.alert = old.alert; return this; };\n\n  // Button plugin\n  $.fn.button = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.button');\n      const options = typeof option === 'object' && option;\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)));\n      if (option === 'toggle') data.toggle();\n      else if (option) data.setState(option);\n    });\n  };\n  $.fn.button.Constructor = Button;\n  $.fn.button.noConflict = function() { $.fn.button = old.button; return this; };\n\n  // Carousel plugin\n  $.fn.carousel = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.carousel');\n      const options = $.extend({}, Carousel.DEFAULTS || {}, $this.data(), typeof option === 'object' && option);\n      const action = typeof option === 'string' ? option : options.slide;\n\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)));\n      if (typeof option === 'number') data.to(option);\n      else if (action) data[action]();\n      else if (options.interval) data.pause().cycle();\n    });\n  };\n  $.fn.carousel.Constructor = Carousel;\n  $.fn.carousel.noConflict = function() { $.fn.carousel = old.carousel; return this; };\n\n  // Scrollspy plugin\n  $.fn.scrollspy = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.scrollspy');\n      const options = typeof option === 'object' && option;\n\n      if (!data) $this.data('bs.scrollspy', (data = new Scrollspy(this, options)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.scrollspy.Constructor = Scrollspy;\n  $.fn.scrollspy.noConflict = function() { $.fn.scrollspy = old.scrollspy; return this; };\n\n  // Affix plugin\n  $.fn.affix = function(option) {\n    return this.each(function() {\n      const $this = $(this);\n      let data = $this.data('bs.affix');\n      const options = typeof option === 'object' && option;\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)));\n      if (typeof option === 'string') data[option]();\n    });\n  };\n  $.fn.affix.Constructor = Affix;\n  $.fn.affix.noConflict = function() { $.fn.affix = old.affix; return this; };\n\n  // ===========================================\n  // DATA-API (automatic initialization via data attributes)\n  // ===========================================\n\n  // Tab data-api (Preside uses .presidecms namespace and $= ends-with selector)\n  $(document).on('click.bs.tab.data-api', '.presidecms [data-toggle$=\"tab\"], .presidecms [data-toggle$=\"pill\"]', function(e) {\n    e.preventDefault();\n    $(this).tab('show');\n  });\n\n  // Modal data-api (Preside uses .presidecms namespace and $= ends-with selector)\n  $(document).on('click.bs.modal.data-api', '.presidecms [data-toggle$=\"modal\"]', function(e) {\n    const $this = $(this);\n    const href = $this.attr('href');\n    const $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, '')));\n    const option = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data());\n\n    if ($this.is('a')) e.preventDefault();\n\n    $target.modal(option, this);\n  });\n\n  // Dropdown data-api (Preside uses .presidecms namespace and $= ends-with selector)\n  $(document).on('click.bs.dropdown.data-api', '.presidecms [data-toggle$=dropdown]', function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    $(this).dropdown('toggle');\n  });\n\n  // Collapse data-api (Preside uses .presidecms namespace and $= ends-with selector)\n  $(document).on('click.bs.collapse.data-api', '.presidecms [data-toggle$=collapse]', function(e) {\n    const $this = $(this);\n    let href;\n    const target = $this.attr('data-target')\n      || e.preventDefault()\n      || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '');\n    const $target = $(target);\n    const data = $target.data('bs.collapse');\n    const option = data ? 'toggle' : $this.data();\n\n    $target.collapse(option);\n  });\n\n  // Alert data-api (Preside uses .presidecms namespace)\n  $(document).on('click.bs.alert.data-api', '.presidecms [data-dismiss=\"alert\"]', function(e) {\n    $(this).closest('.alert').alert('close');\n    e.preventDefault();\n  });\n\n  // Button data-api (Preside uses .presidecms namespace)\n  $(document).on('click.bs.button.data-api', '.presidecms [data-toggle^=button]', function(e) {\n    let $btn = $(e.target);\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn');\n    $btn.button('toggle');\n    e.preventDefault();\n  });\n\n  // Global export\n  if (typeof window !== 'undefined') {\n    window.Sandal = Sandal;\n  }\n})();\n\nexport default Sandal;"],"names":["$","selector","context","document","Element","querySelector","$$","Array","from","querySelectorAll","closest","element","children","kids","filter","child","matches","addClass","classes","classList","add","flatMap","c","split","Boolean","removeClass","remove","hasClass","className","contains","setAttr","name","value","Object","entries","forEach","key","val","setAttribute","getAttr","getAttribute","removeAttr","removeAttribute","createFromHTML","html","template","createElement","innerHTML","trim","content","firstChild","handlerStorage","WeakMap","on","eventType","handler","delegatedHandler","options","event","actualHandler","e","target","call","addEventListener","has","set","Map","elementHandlers","get","push","original","actual","off","events","handlers","idx","findIndex","h","removeEventListener","splice","startsWith","delete","DEFAULT_OPTIONS","duration","easing","fill","async","fadeOut","keyframes","opts","animation","animate","Promise","resolve","reject","onfinish","oncancel","Error","opacity","style","display","reflow","offsetHeight","getFloatingUI","window","FloatingUIDOM","PLACEMENT_MAP","top","bottom","left","right","auto","computePosition","reference","floating","placement","offset","offsetValue","flip","shift","arrow","container","fui","middleware","padding","result","x","y","middlewareData","refRect","getBoundingClientRect","floatRect","scrollX","documentElement","scrollLeft","scrollY","scrollTop","finalPlacement","width","height","viewport","innerWidth","innerHeight","Math","max","min","computePositionFallback","autoUpdate","update","parents","current","parentElement","getComputedStyle","overflow","overflowX","overflowY","test","getScrollParents","handleUpdate","requestAnimationFrame","parent","instanceStorage","setInstance","instance","getInstance","removeInstance","parseDataOptions","defaults","prefix","dataPrefix","keys","dataKey","replace","toLowerCase","attrName","isNaN","Number","JSON","parse","sanitizeHTML","div","textContent","idCounter","isDisabled","nodeType","Node","ELEMENT_NODE","hasAttribute","trapFocus","focusable","join","el","offsetWidth","getFocusable","length","firstFocusable","lastFocusable","handleKeydown","shiftKey","activeElement","preventDefault","focus","DATA_KEY","EVENT_KEY","DEFAULTS","backdrop","keyboard","show","EVENTS","SHOW","SHOWN","HIDE","HIDDEN","LOADED","CLASSES","SELECTORS","Modal","constructor","this","_element","_dialog","_backdrop","_isShown","_isTransitioning","_scrollbarWidth","_focusTrap","_options","_bindEvents","toggle","relatedTarget","hide","_triggerEvent","defaultPrevented","_checkScrollbar","_setScrollbar","body","_escape","_resize","_ignoreBackdropClick","once","_showBackdrop","_showModal","_escapeHandler","_resizeHandler","_waitForTransition","_hideModal","_adjustDialog","dispose","appendChild","_resetScrollbar","isModalOverflowing","scrollHeight","clientHeight","_isBodyOverflowing","paddingLeft","paddingRight","rect","_getScrollbarWidth","scrollDiv","cssText","scrollbarWidth","clientWidth","_originalPadding","computedPadding","parseFloat","fixedContent","actualPadding","calculatedPadding","dataset","undefined","setTimeout","detail","jQuery","presideJQuery","fn","trigger","Event","baseType","CustomEvent","bubbles","cancelable","dispatchEvent","getOrCreateInstance","handleToggle","currentTarget","href","modalElement","VERSION","boundary","KEYS","TAB","ESCAPE","SPACE","ARROW_UP","ARROW_DOWN","Dropdown","_parent","_getParentElement","_menu","_getMenuElement","isOpen","closeAll","_addDocumentListener","_removeDocumentListener","_handleKeydown","_documentClickHandler","isMenuItem","isInForm","_documentKeyHandler","includes","stopPropagation","items","index","indexOf","openDropdowns","dropdown","NAME","title","delay","fallbackPlacement","sanitize","INSERTED","TRIGGERS","Tooltip","_getOptions","_tip","_isEnabled","_timeout","_hoverState","_activeTrigger","_cleanupAutoUpdate","_setListeners","tip","enable","disable","toggleEnabled","_getDelegateConfig","click","_isWithActiveTrigger","_enter","_leave","_getTitle","_setContent","tipId","getElementById","getUID","position","visibility","pointerEvents","defaultContainer","getContainer","ownerDocument","_updatePosition","parentNode","removeChild","clearTimeout","_removeListeners","removeEl","dataOptions","String","inner","_getPlacement","assign","margin","applyPosition","actualPlacement","triggers","eventIn","eventOut","values","config","Popover","super","_getContent","titleEl","contentEl","titleText","_hasContent","popoverEventType","transitioningContainers","WeakSet","Tab","listElement","targetSelector","parentLi","previous","previousTab","activeChildren","activeLi","_triggerEventOn","_activate","isPane","activePanes","activePane","allLiElements","tagName","li","a","tabLink","item","dropdownMenu","dropdownLi","handleClick","tab","Collapse","_triggerArray","toggleList","_getParent","_addAriaAndCollapsedClass","actives","activesData","elem","map","some","data","active","_setTriggerState","naturalHeight","finished","currentHeight","charAt","toString","collapsed","targets","parentSelector","CLOSE","CLOSED","Alert","_bindDismiss","close","alertElement","rootElement","_removeElement","_unbindDismiss","removeElement","handleDismiss","Button","triggerChangeEvent","addAriaPressed","input","type","checked","activeInput","pressed","force","setState","state","loadingText","resetText","button","disabled","interval","pause","wrap","SLIDE","SLID","DIRECTION","Carousel","_items","_interval","_activeElement","_isPaused","_isSliding","_indicatorsElement","cycle","next","_slide","prev","_clearInterval","setInterval","to","_getItems","activeIndex","_getItemIndex","direction","_keydown","_addTouchEventListeners","touchStartX","touchDeltaX","touches","clientX","abs","_getItemByDirection","isNextDirection","isPrevDirection","lastItemIndex","itemIndex","activeElementIndex","nextElement","nextElementIndex","isCycling","isNext","directionalClassName","orderClassName","_setActiveIndicator","all","transform","indicators","indicator","nextIndicator","clearInterval","slideIndex","carousel","parseInt","slideDir","autoInit","carousels","method","ACTIVATE","Scrollspy","_scrollElement","_selector","_offsets","_targets","_activeTarget","_observer","refresh","_process","disconnect","nav","navLinks","link","_getScrollHeight","targetBCR","_getOffsetTop","i","sort","b","_setupIntersectionObserver","_setupScrollListener","_scrollHandler","_clear","targetElements","rootMargin","IntersectionObserver","intersectingEntries","entry","isIntersecting","targetId","reduce","boundingClientRect","id","root","threshold","observe","_getScrollTop","maxScroll","_getOffsetHeight","links","sel","parentItem","prevSibling","previousElementSibling","activeLinks","offsetTop","spyElements","Affix","_parseOffsetOption","_target","_getTarget","_affixed","_unpin","_pinnedOffset","_checkPosition","_setupListeners","checkPosition","checkPositionWithEventLoop","_getOffset","targetHeight","affix","affixType","eventPrefix","_getPinnedOffset","affixedEventPrefix","affixElements","Sandal","version","_components","modal","tooltip","popover","collapse","alert","scrollspy","initComponent","componentName","ComponentClass","getComponents","destroy","component","clear","support","transition","transEndEventNames","WebkitTransition","MozTransition","OTransition","end","transitionEnd","emulateTransitionEnd","called","$el","one","old","option","_relatedTarget","each","$this","extend","Constructor","noConflict","action","slide","attr","$target","remote","is","$btn"],"mappings":"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"}